(window.webpackJsonp=window.webpackJsonp||[]).push([[501],{"./manual/Treat/Storybook-With-Treat.md":function(e,t,o){"use strict";o.r(t),o.d(t,"default",function(){return s});var n=o("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),a=(o("./node_modules/react/index.js"),o("./node_modules/@mdx-js/react/dist/index.es.js")),r={},i="wrapper";function s(e){var t=e.components,o=Object(n.a)(e,["components"]);return Object(a.b)(i,Object.assign({},r,o,{components:t,mdxType:"MDXLayout"}),Object(a.b)("h1",{id:"storybook-with-treat"},"Storybook With Treat"),Object(a.b)("h2",{id:"setting-up-storybook"},"Setting Up Storybook"),Object(a.b)("p",null,"The reference for getting started with ",Object(a.b)("a",Object.assign({parentName:"p"},{href:"https://www.learnstorybook.com/intro-to-storybook/react/en/get-started/"}),"Storybook can be found here"),"."),Object(a.b)("h2",{id:"note-with-mixing-yarn-and-npm"},"Note With Mixing Yarn and NPM"),Object(a.b)("p",null,"If for some reason you are mixing ",Object(a.b)("inlineCode",{parentName:"p"},"npx")," and ",Object(a.b)("inlineCode",{parentName:"p"},"yarn"),", you may run into issues with package versions. If this occurs, troubleshooting may be eased by using Yarn Resolutions ie in package.json add the following:"),Object(a.b)("pre",null,Object(a.b)("code",Object.assign({parentName:"pre"},{className:"language-json"}),'"resolutions": {\n  "webpack": "4.39.1" // whatever version you want to resolve\n}\n')),Object(a.b)("p",null,"This was a killer when first attempting to setup."),Object(a.b)("h2",{id:"setting-up-configuration"},"Setting Up Configuration"),Object(a.b)("p",null,"In ",Object(a.b)("inlineCode",{parentName:"p"},".storybook/config.js")," we need to setup Storybook to have the TreatProvider over all the stories:"),Object(a.b)("pre",null,Object(a.b)("code",Object.assign({parentName:"pre"},{className:"language-javascript"}),"import { configure } from '@storybook/react';\nimport { load, addDecorator } from '@storybook/react';\nimport React from 'react';\nimport { TreatProvider } from 'react-treat';\nimport * as themes from '../src/themes/treat';\nconst themeNames = ['scruffy', 'daisy', 'three', 'four'];\n\n// use this to add the decorator to every story\naddDecorator(storyFn => (\n  <TreatProvider theme={themes['daisy']}>{storyFn()}</TreatProvider>\n));\n// automatically import all files ending in *.stories.js\nconfigure(require.context('../src', true, /\\.stories\\.js$/), module);\n")),Object(a.b)("p",null,"We also need to add the ",Object(a.b)("inlineCode",{parentName:"p"},"TreatPlugin")," into the Webpack build. For that, update ",Object(a.b)("inlineCode",{parentName:"p"},".storybook/webpack.config.js")," to reflect the following:"),Object(a.b)("pre",null,Object(a.b)("code",Object.assign({parentName:"pre"},{className:"language-javascript"}),"const path = require('path');\n// your app's webpack.config.js\nconst TreatPlugin = require('treat/webpack-plugin');\nconst MiniCssExtractPlugin = require('mini-css-extract-plugin');\n\nmodule.exports = async ({ config, mode }) => {\n  config.plugins.push(\n    new TreatPlugin({\n      outputLoaders: [MiniCssExtractPlugin.loader],\n    }),\n  );\n  config.plugins.push(new MiniCssExtractPlugin());\n  return config;\n};\n// you can use this file to add your custom webpack plugins, loaders and anything you like.\n// This is just the basic way to add additional webpack configurations.\n// For more information refer the docs: https://storybook.js.org/configurations/custom-webpack-config\n\n// IMPORTANT\n// When you add this file, we won't add the default configurations which is similar\n// to \"React Create App\". This only has babel loader to load JavaScript.\n")),Object(a.b)("p",null,"Perfecto! Added ",Object(a.b)("inlineCode",{parentName:"p"},'"storybook": "start-storybook -p 6006"')," to your scripts in ",Object(a.b)("inlineCode",{parentName:"p"},"package.json")," and you are ready to go!"))}s&&s===Object(s)&&Object.isExtensible(s)&&Object.defineProperty(s,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"MDXContent",filename:"manual/Treat/Storybook-With-Treat.md"}}),s.isMDXComponent=!0}}]);
//# sourceMappingURL=manual-treat-storybook-with-treat.101a1afd2417ec7a4a77.js.map