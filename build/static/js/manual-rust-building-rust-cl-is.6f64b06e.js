(window.webpackJsonp=window.webpackJsonp||[]).push([[439],{"./manual/Rust/Building-Rust-CLIs.md":function(e,n,t){"use strict";t.r(n),t.d(n,"default",function(){return r});var a=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),i=(t("./node_modules/react/index.js"),t("./node_modules/@mdx-js/react/dist/index.es.js")),s={},o="wrapper";function r(e){var n=e.components,t=Object(a.a)(e,["components"]);return Object(i.b)(o,Object.assign({},s,t,{components:n,mdxType:"MDXLayout"}),Object(i.b)("h1",{id:"building-rust-command-line-tools"},"Building Rust Command Line Tools"),Object(i.b)("p",null,"Initial findings based off a useful article ",Object(i.b)("a",Object.assign({parentName:"p"},{href:"https://mattgathu.github.io/writing-cli-app-rust/"}),"found here"),"."),Object(i.b)("p",null,"We're using the ",Object(i.b)("a",Object.assign({parentName:"p"},{href:"https://github.com/clap-rs/clap"}),"Clap")," crate to help bootstrap CLIs."),Object(i.b)("h2",{id:"useful-tools-to-consider"},"Useful tools to consider"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object.assign({parentName:"li"},{href:"https://github.com/rust-cli/human-panic"}),"https://github.com/rust-cli/human-panic")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object.assign({parentName:"li"},{href:"https://github.com/hniksic/rust-subprocess"}),"https://github.com/hniksic/rust-subprocess")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object.assign({parentName:"li"},{href:"https://github.com/oconnor663/duct.rs"}),"https://github.com/oconnor663/duct.rs")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object.assign({parentName:"li"},{href:"https://github.com/kkawakam/rustyline"}),"https://github.com/kkawakam/rustyline")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object.assign({parentName:"li"},{href:"https://github.com/mitsuhiko/indicatif"}),"https://github.com/mitsuhiko/indicatif")),Object(i.b)("li",{parentName:"ul"})),Object(i.b)("h2",{id:"tldr"},"tl;dr"),Object(i.b)("p",null,"Initialise an app using ",Object(i.b)("inlineCode",{parentName:"p"},"cargo new app_name_you_want --bin"),"."),Object(i.b)("p",null,'This example diverges from the above article by using the "Clap" crate with the YAML file config.'),Object(i.b)("h3",{id:"srcmainrs"},"src/main.rs"),Object(i.b)("p",null,"Update the file to reflect the following:"),Object(i.b)("pre",null,Object(i.b)("code",Object.assign({parentName:"pre"},{className:"language-rust"}),'#[macro_use]\nextern crate clap;\nuse clap::App;\n\nfn main() {\n    let yaml = load_yaml!("cli.yml");\n    let matches = App::from_yaml(yaml).get_matches();\n\n    // Gets a value for config if supplied by user, or defaults to "default.conf"\n    let config = matches.value_of("config").unwrap_or("default.conf");\n    println!("Value for config: {}", config);\n\n    // Calling .unwrap() is safe here because "INPUT" is required (if "INPUT" wasn\'t\n    // required we could have used an \'if let\' to conditionally get the value)\n    println!("Using input file: {}", matches.value_of("INPUT").unwrap());\n\n    // Vary the output based on how many times the user used the "verbose" flag\n    // (i.e. \'myprog -v -v -v\' or \'myprog -vvv\' vs \'myprog -v\'\n    match matches.occurrences_of("verbose") {\n        0 => println!("No verbose info"),\n        1 => println!("Some verbose info"),\n        2 => println!("Tons of verbose info"),\n        3 | _ => println!("Don\'t be crazy"),\n    }\n\n    // You can handle information about subcommands by requesting their matches by name\n    // (as below), requesting just the name used, or both at the same time\n    if let Some(matches) = matches.subcommand_matches("test") {\n        if matches.is_present("debug") {\n            println!("Printing debug info...");\n        } else {\n            println!("Printing normally...");\n        }\n    }\n}\n')),Object(i.b)("h3",{id:"srccliyml"},"src/cli.yml"),Object(i.b)("p",null,"For the CLI args, set the following:"),Object(i.b)("pre",null,Object(i.b)("code",Object.assign({parentName:"pre"},{className:"language-yml"}),'name: jamaica\nversion: "1.0"\nauthor: Dennis O\'Keeffe <hello@dennisokeeffe.com>\nabout: Build agnostic app configs\nargs:\n    - config:\n        short: c\n        long: config\n        value_name: FILE\n        help: Sets a custom config file\n        takes_value: true\n    - INPUT:\n        help: Sets the input file to use\n        required: true\n        index: 1\n    - verbose:\n        short: v\n        multiple: true\n        help: Sets the level of verbosity\nsubcommands:\n    - test:\n        about: controls testing features\n        version: "1.3"\n        author: Someone E. <someone_else@other.com>\n        args:\n            - debug:\n                short: d\n                help: print debug information\n')),Object(i.b)("h3",{id:"running-the-above-config"},"Running the above config"),Object(i.b)("pre",null,Object(i.b)("code",Object.assign({parentName:"pre"},{className:"language-shell"}),"cargo run -- src/main.rs --config=made/up/\n# ... omitted Rust build output\nValue for config: made/up/file\nUsing input file: src/main.rs\nNo verbose info\n\ncargo run -- --help\n# shows help output: omitted for now\n")))}r&&r===Object(r)&&Object.isExtensible(r)&&Object.defineProperty(r,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"MDXContent",filename:"manual/Rust/Building-Rust-CLIs.md"}}),r.isMDXComponent=!0}}]);
//# sourceMappingURL=manual-rust-building-rust-cl-is.101a1afd2417ec7a4a77.js.map