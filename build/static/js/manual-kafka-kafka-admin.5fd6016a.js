(window.webpackJsonp=window.webpackJsonp||[]).push([[255],{"./manual/Kafka/Kafka-Admin.md":function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return s});var n=a("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),r=(a("./node_modules/react/index.js"),a("./node_modules/@mdx-js/react/dist/index.es.js")),i={},l="wrapper";function s(e){var t=e.components,a=Object(n.a)(e,["components"]);return Object(r.b)(l,Object.assign({},i,a,{components:t,mdxType:"MDXLayout"}),Object(r.b)("h1",{id:"kafka-administration"},"Kafka Administration"),Object(r.b)("h2",{id:"file-formats-and-indexes"},"File Formats and Indexes"),Object(r.b)("p",null,"Log Segments are stored at ",Object(r.b)("inlineCode",{parentName:"p"},"/data/kafka"),". Within message logs, you see individual segment files accrue as messages are produced."),Object(r.b)("p",null,"To maintain this over time, you can set file compaction."),Object(r.b)("p",null,"You can also delete indexes, and they will populate automatically."),Object(r.b)("h2",{id:"file-management"},"File Management"),Object(r.b)("p",null,"The segment we are currently writing to is called the ",Object(r.b)("inlineCode",{parentName:"p"},"active segment"),". By default, the segment is deleted when it reaches a size of 1 GB or has been inactive for 1 week (whichever comes first)."),Object(r.b)("p",null,"The Broker has an open file handle to each segment in every partition, even inactive segments. Make sure your operating system can handle so many open files at once."),Object(r.b)("h2",{id:"storage-structures"},"Storage Structures"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"Batch Processing and Operational Workloads (Lambda Architecture): View real-time and historical data. This adds difficulty due to the many simultaneous interfaces."),Object(r.b)("li",{parentName:"ol"},"Version 1 and Version 2 in parallel (Kappa Architecture): Switch your view as a cut-over. This helps with migration or transitions to continuous jobs."),Object(r.b)("li",{parentName:"ol"},"Multi-Cluster (Multiple Consumption): Replicate clusters for scale, ingesting data from different Kafka clusters. The potential upside is bandwidth savings.")),Object(r.b)("h2",{id:"stream-processing"},"Stream Processing"),Object(r.b)("p",null,"Stream is a sequence of events. Because Kafka does not rely on an external process framework, any type of stream can exist."),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Credit card transactions"),Object(r.b)("li",{parentName:"ul"},"Stock trades"),Object(r.b)("li",{parentName:"ul"},"Package deliveries"),Object(r.b)("li",{parentName:"ul"},"Network events"),Object(r.b)("li",{parentName:"ul"},"Sensor events in manufacturing equipment"),Object(r.b)("li",{parentName:"ul"},"Emails sent"),Object(r.b)("li",{parentName:"ul"},"Moves in a game")),Object(r.b)("h2",{id:"data-replication"},"Data Replication"),Object(r.b)("p",null,"Multi-Cluster architectures include:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Hub-And-Spoke: Example being Central Kafka Cluster that connects a London, New York and AWS Kafka Cluster."),Object(r.b)("li",{parentName:"ul"},"Active-Active: Communication between a US-based Kafka Cluster and EU-based Kafka Cluster."),Object(r.b)("li",{parentName:"ul"},"Active-Standby: Production Kafka Cluster that connects to a Failover Kafka Cluster.")),Object(r.b)("h2",{id:"mirrormaker"},"MirrorMaker"),Object(r.b)("p",null,"Can be used for replicating data between two data centers. It's a collection of consumers in a consumer group."),Object(r.b)("p",null,"The group reads data from the set of topics you specify. Then MirrorMaker creates the thread and sends it to the target cluster. It creates one thread per consumer."),Object(r.b)("p",null,"For configuration, MirrorMaker has a few options. You typically install it as a service and run it at the destination data center. The biggest task is monitoring lag to ensure the destination cluster is not falling behind the source."),Object(r.b)("h2",{id:"cluster-and-broker-monitoring"},"Cluster and Broker Monitoring"),Object(r.b)("p",null,"Metrics can be accessed from:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Java Management Extensions (JMX)"),Object(r.b)("li",{parentName:"ul"},"Yammer Metrics")),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"get /brokers/ids/3")),Object(r.b)("p",null,"Use an Intelligent Platform Management Interface (IPMI) to monitor hardware health."),Object(r.b)("h2",{id:"monitoring-the-overall-health"},"Monitoring the Overall Health"),Object(r.b)("p",null,"Problems:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Under-replicated partitions"),Object(r.b)("li",{parentName:"ul"},"Hardware failures")),Object(r.b)("h2",{id:"broker-metrics-to-follow"},"Broker Metrics to Follow"),Object(r.b)("table",null,Object(r.b)("thead",{parentName:"table"},Object(r.b)("tr",{parentName:"thead"},Object(r.b)("th",Object.assign({parentName:"tr"},{align:null}),"Name"),Object(r.b)("th",Object.assign({parentName:"tr"},{align:null}),"To ask"))),Object(r.b)("tbody",{parentName:"table"},Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object.assign({parentName:"tr"},{align:null}),"ACTIVE CONTROLLER COUNT"),Object(r.b)("td",Object.assign({parentName:"tr"},{align:null}),"Is the broker the controller?")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object.assign({parentName:"tr"},{align:null}),"REQUEST HANDLER IDLE RATIO"),Object(r.b)("td",Object.assign({parentName:"tr"},{align:null}),"How much load is the broker under?")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object.assign({parentName:"tr"},{align:null}),"ALL TOPICS BYTES IN"),Object(r.b)("td",Object.assign({parentName:"tr"},{align:null}),"Do I need to scale up the number of brokers?")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object.assign({parentName:"tr"},{align:null}),"ALL TOPICS BYTES OUT"),Object(r.b)("td",Object.assign({parentName:"tr"},{align:null}),"How high is consumer traffic?")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object.assign({parentName:"tr"},{align:null}),"ALL TOPICS MESSAGES IN"),Object(r.b)("td",Object.assign({parentName:"tr"},{align:null}),"How many messages per second?")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object.assign({parentName:"tr"},{align:null}),"PARTITION COUNT"),Object(r.b)("td",Object.assign({parentName:"tr"},{align:null}),"How many partitions are assigned to be a broker?")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object.assign({parentName:"tr"},{align:null}),"LEADER COUNT"),Object(r.b)("td",Object.assign({parentName:"tr"},{align:null}),"How many partitions is this broker a leader for?")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object.assign({parentName:"tr"},{align:null}),"OFFLINE PARTITIONS"),Object(r.b)("td",Object.assign({parentName:"tr"},{align:null}),"How many brokers have no leader")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object.assign({parentName:"tr"},{align:null}),"REQUEST METRICS"),Object(r.b)("td",Object.assign({parentName:"tr"},{align:null}),"How many requests are going to the broker?")))))}s&&s===Object(s)&&Object.isExtensible(s)&&Object.defineProperty(s,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"MDXContent",filename:"manual/Kafka/Kafka-Admin.md"}}),s.isMDXComponent=!0}}]);
//# sourceMappingURL=manual-kafka-kafka-admin.101a1afd2417ec7a4a77.js.map