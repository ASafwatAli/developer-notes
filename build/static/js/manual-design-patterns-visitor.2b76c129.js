(window.webpackJsonp=window.webpackJsonp||[]).push([[128],{"./manual/Design-Patterns/Visitor.md":function(e,i,t){"use strict";t.r(i),t.d(i,"default",function(){return a});var n=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),s=(t("./node_modules/react/index.js"),t("./node_modules/@mdx-js/react/dist/index.es.js")),o={},m="wrapper";function a(e){var i=e.components,t=Object(n.a)(e,["components"]);return Object(s.b)(m,Object.assign({},o,t,{components:i,mdxType:"MDXLayout"}),Object(s.b)("h1",{id:"visitor"},"Visitor"),Object(s.b)("h2",{id:"example"},"Example"),Object(s.b)("pre",null,Object(s.b)("code",Object.assign({parentName:"pre"},{className:"language-typescript"}),"interface Visitable {\n  accept(visitor: IVisitor): void;\n}\n\ninterface IVisitor {\n  visitMainItem?(mainItem: MainItem): void;\n  visitSideItem?(sideItem: SideItem): void;\n}\n\nclass MainItem implements Visitable {\n  accept(visitor: IVisitor) {\n    if (visitor.visitMainItem) {\n      visitor.visitMainItem(this);\n    }\n  }\n}\n\nclass SideItem implements Visitable {\n  accept(visitor: IVisitor) {\n    if (visitor.visitSideItem) {\n      visitor.visitSideItem(this);\n    }\n  }\n}\n\nclass LogVisitor implements IVisitor {\n  visitMainItem(mainItem: MainItem): void {\n    console.log('Log mainItem, and add new logics');\n  }\n\n  visitSideItem(sideItem: SideItem): void {\n    console.log('Log sideItem, and add new logics');\n  }\n}\n\nclass DecorateVisitor implements IVisitor {\n  visitMainItem(mainItem: MainItem): void {\n    console.log('Decorate mainItem, and add new logics');\n  }\n\n  visitSideItem(sideItem: SideItem): void {\n    console.log('Decorate sideItem, and add new logics');\n  }\n}\n\nclass ItemsGroup implements Visitable {\n  private _items: Object[];\n\n  constructor() {\n    this._items = [];\n  }\n\n  public addItem(item: Object) {\n    this._items.push(item);\n  }\n\n  public popItem() {\n    return this._items.pop();\n  }\n\n  accept(visitor: IVisitor): void {\n    this._items.map((item: Visitable) => {\n      item.accept(visitor);\n    });\n  }\n}\n\n(function main() {\n  const group = new ItemsGroup();\n  group.addItem(new MainItem());\n  group.addItem(new SideItem());\n\n  const mainVisitor = new LogVisitor();\n  const sideVisitor = new DecorateVisitor();\n\n  group.accept(mainVisitor);\n  group.accept(sideVisitor);\n\n  // remove\n  const removedItem = group.popItem();\n  console.log('removedItem:', removedItem); // SideItem\n\n  // attempt to accept again\n  group.accept(mainVisitor);\n  group.accept(sideVisitor); // not accepted this time\n})();\n")))}a&&a===Object(a)&&Object.isExtensible(a)&&Object.defineProperty(a,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"MDXContent",filename:"manual/Design-Patterns/Visitor.md"}}),a.isMDXComponent=!0}}]);
//# sourceMappingURL=manual-design-patterns-visitor.101a1afd2417ec7a4a77.js.map