{"version":3,"sources":["/Users/dennis.okeeffe/Project-Imposter/developer-notes/manual/System-Design/Data-Systems.md"],"names":["layoutProps","MDXLayout","MDXContent","_ref","components","props","Object","_Users_dennis_okeeffe_Project_Imposter_developer_notes_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__","_mdx_js_react__WEBPACK_IMPORTED_MODULE_2__","assign","mdxType","id","parentName","isMDXComponent"],"mappings":"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","file":"static/js/manual-system-design-data-systems.cfcd55b9.js","sourcesContent":["/* @jsx mdx */\n  import React from 'react'\n  import { mdx } from '@mdx-js/react'\n  /* @jsx mdx */\n\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <h1 {...{\n      \"id\": \"data-systems\"\n    }}>{`Data Systems`}</h1>\n    <h2 {...{\n      \"id\": \"basics\"\n    }}>{`Basics`}</h2>\n    <ul>\n      <li parentName=\"ul\">{`The aim is to keep them: Reliable, Scalable and Maintainable`}</li>\n      <li parentName=\"ul\">{`Data Systems knowledge includes understanding caches, search indexes, stream/batch processing`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"reliability\"\n    }}>{`Reliability`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`Keeping data correctness, completeness across systems, performant and resilient.`}</li>\n      <li parentName=\"ul\">{`Fault vs Failure: Fault is a system failing to adhere to a design spec whereas failure means a system failure and requires failover backup procedures.`}</li>\n      <li parentName=\"ul\">{`It's better to measure the latency in percentiles.`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"scalability\"\n    }}>{`Scalability`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`For many backends, the response time is dependent on the slowest server response.`}</li>\n      <li parentName=\"ul\">{`Elastic vs manual scaling: one is automated.`}</li>\n    </ul>\n    <p>{`The architecture for each large scale project is highly specific. It depends on factors such as:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Volume of reads`}</li>\n      <li parentName=\"ol\">{`Volume of writes`}</li>\n      <li parentName=\"ol\">{`Type of data to stor`}</li>\n      <li parentName=\"ol\">{`Data complexity`}</li>\n      <li parentName=\"ol\">{`Response time`}</li>\n      <li parentName=\"ol\">{`Access patterns`}</li>\n    </ol>\n    <p>{`Example: You could expect 100,000 req/s @ 1kB in size vs 3 req/s @ 2GB in size which equates to the same data throughput but very different requirements.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Load parameters identify which requests are common vs which ones are rare.`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"maintainability\"\n    }}>{`Maintainability`}</h3>\n    <p>{`Remember these three principles:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Operability`}</li>\n      <li parentName=\"ol\">{`Simplicity (- think abstractions like SQL)`}</li>\n      <li parentName=\"ol\">{`Evolvability`}</li>\n    </ol>\n    <h2 {...{\n      \"id\": \"data-models\"\n    }}>{`Data Models`}</h2>\n    <ul>\n      <li parentName=\"ul\">{`Relational`}</li>\n      <li parentName=\"ul\">{`Document`}</li>\n      <li parentName=\"ul\">{`Graph (this is essentially a subtype of relational)`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"pros-of-the-document-model\"\n    }}>{`Pros of the Document Model`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`Schema flexibility`}</li>\n      <li parentName=\"ul\">{`Better performance due to locality`}</li>\n      <li parentName=\"ul\">{`Apps are generally closer to the data structure`}</li>\n    </ul>\n    <h2 {...{\n      \"id\": \"storage--retrieval\"\n    }}>{`Storage + Retrieval`}</h2>\n    <ul>\n      <li parentName=\"ul\">{`Big difference in storage engines that are optimized for transactional vs analytical (think OLTP/OLAP)`}</li>\n      <li parentName=\"ul\">{`Indexes help find keys but generally slow down writes`}</li>\n      <li parentName=\"ul\">{`In-memory tress: examples red-black trees, AVL trees. We can make the storage engines to use these styles of trees.`}</li>\n      <li parentName=\"ul\">{`LSM Trees can be slow when looking up keys that don't exist`}<ul parentName=\"li\">\n          <li parentName=\"ul\">{`Can be countered by \"Bloom Filters\" -> can tell if the key exists.`}</li>\n        </ul></li>\n    </ul>\n    <h3 {...{\n      \"id\": \"b-trees\"\n    }}>{`B-Trees`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`Most common index used by databases.`}</li>\n      <li parentName=\"ul\">{`While log-structured indexes work in variable-size segments and written sequentially, B-Trees have fixed sized \"blocks\" or \"pages\" - this design corresponds to reflecting the underlying hardware.`}</li>\n      <li parentName=\"ul\">{`B-Tree variant \"fractal trees\" borrow log-structured ideas to reduce disk seeks.`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"b-trees-vs-lsm-trees\"\n    }}>{`B-Trees vs LSM-Trees`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`B-Tree more mature`}</li>\n      <li parentName=\"ul\">{`LSM faster for writes`}</li>\n      <li parentName=\"ul\">{`B faster for reads`}</li>\n      <li parentName=\"ul\">{`B-Tree must write everything twice (write-ahead log and potential multi-writes to tree pages)`}</li>\n      <li parentName=\"ul\">{`Log structured indexes also rewrite data multiple times. This is known as \"write amplification\" and is a concern for SSDs.`}</li>\n      <li parentName=\"ul\">{`LSM trees compress files better`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"the-downsides-of-lsm-trees\"\n    }}>{`The downsides of LSM-Trees`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`Compaction process can sometimes interfere with ongoing reads/writes.`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"other-notes\"\n    }}>{`Other notes`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`Secondary index normally not unique (consider the use of `}<inlineCode parentName=\"li\">{`user_id`}</inlineCode>{`)`}</li>\n      <li parentName=\"ul\">{`R-Trees normally used for optimised geospatial query efficiency.`}</li>\n      <li parentName=\"ul\">{`LSM-Trees themselves do not handle updating. They essentially can only append and remove the stale data. B-Trees can update in place.`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"olap-vs-oltp\"\n    }}>{`OLAP vs OLTP`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`A transaction needn't adhere to all principles of ACID. \"Transaction\" processing mean low latency read/writes.`}</li>\n      <li parentName=\"ul\">{`Commonly used with relational databases.`}</li>\n      <li parentName=\"ul\">{`Performance can be improved using vectorized processing (SIMD - single instruction multi data)`}<ul parentName=\"li\">\n          <li parentName=\"ul\">{`Column compression can also make use of the L1 cache.`}</li>\n          <li parentName=\"ul\">{`Update-in-place like what B-Trees use are not possible with column compression.`}</li>\n        </ul></li>\n    </ul>\n    </MDXLayout>;\n}\n\nMDXContent.isMDXComponent = true;\n  "],"sourceRoot":""}