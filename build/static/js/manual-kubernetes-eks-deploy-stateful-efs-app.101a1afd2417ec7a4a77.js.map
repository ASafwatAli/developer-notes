{"version":3,"sources":["/Users/dennis.okeeffe/Project-Imposter/developer-notes/manual/Kubernetes/EKS-Deploy-Stateful-EFS-App.md"],"names":["layoutProps","MDXLayout","MDXContent","_ref","components","props","Object","_Users_dennis_okeeffe_Project_Imposter_developer_notes_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__","_mdx_js_react__WEBPACK_IMPORTED_MODULE_2__","assign","mdxType","id","parentName","alt","src","isMDXComponent"],"mappings":"wYAWMA,EAAc,GAGdC,EAAY,UACH,SAASC,EAATC,GAGZ,IAFDC,EAECD,EAFDC,WACGC,EACFC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,gBACD,OAAOG,OAAAE,EAAA,EAAAF,CAACL,EAADK,OAAAG,OAAA,GAAeT,EAAiBK,EAAhC,CAAuCD,WAAYA,EAAYM,QAAQ,cAC5EJ,OAAAE,EAAA,EAAAF,CAAA,KAAQ,CACNK,GAAM,oCADR,oCAGAL,OAAAE,EAAA,EAAAF,CAAA,KAAQ,CACNK,GAAM,eADR,gBAGAL,OAAAE,EAAA,EAAAF,CAAA,UACEA,OAAAE,EAAA,EAAAF,CAAA,MAAIM,WAAW,MAAf,gDACAN,OAAAE,EAAA,EAAAF,CAAA,MAAIM,WAAW,MAAf,6CACAN,OAAAE,EAAA,EAAAF,CAAA,MAAIM,WAAW,MAAf,gEAEFN,OAAAE,EAAA,EAAAF,CAAA,SAAGA,OAAAE,EAAA,EAAAF,CAAA,OAAKO,IAAI,iBAAiBC,IAAI,yHACjCR,OAAAE,EAAA,EAAAF,CAAA,KAAQ,CACNK,GAAM,sBADR,sBAGAL,OAAAE,EAAA,EAAAF,CAAA,kHACAA,OAAAE,EAAA,EAAAF,CAAA,4FACAA,OAAAE,EAAA,EAAAF,CAAA,KAAQ,CACNK,GAAM,gBADR,gBAGAL,OAAAE,EAAA,EAAAF,CAAA,8IACAA,OAAAE,EAAA,EAAAF,CAAA,SAAGA,OAAAE,EAAA,EAAAF,CAAA,UAAQM,WAAW,KAAnB,yHACHN,OAAAE,EAAA,EAAAF,CAAA,0FACAA,OAAAE,EAAA,EAAAF,CAAA,wCAAmCA,OAAAE,EAAA,EAAAF,CAAA,cAAYM,WAAW,KAAvB,YAAnC,QAAgGN,OAAAE,EAAA,EAAAF,CAAA,cAAYM,WAAW,KAAvB,kBAAhG,KACAN,OAAAE,EAAA,EAAAF,CAAA,6DAAwDA,OAAAE,EAAA,EAAAF,CAAA,cAAYM,WAAW,KAAvB,oBAAxD,mCACAN,OAAAE,EAAA,EAAAF,CAAA,0BAAqBA,OAAAE,EAAA,EAAAF,CAAA,cAAYM,WAAW,KAAvB,uFAArB,KACAN,OAAAE,EAAA,EAAAF,CAAA,KAAQ,CACNK,GAAM,+CADR,+CAGAL,OAAAE,EAAA,EAAAF,CAAA,SAAGA,OAAAE,EAAA,EAAAF,CAAA,OAAKO,IAAI,SAASC,IAAI,yHACzBR,OAAAE,EAAA,EAAAF,CAAA,mBACAA,OAAAE,EAAA,EAAAF,CAAA,UACEA,OAAAE,EAAA,EAAAF,CAAA,MAAIM,WAAW,MAAf,qBACAN,OAAAE,EAAA,EAAAF,CAAA,MAAIM,WAAW,MAAf,2BACAN,OAAAE,EAAA,EAAAF,CAAA,MAAIM,WAAW,MAAf,0BACAN,OAAAE,EAAA,EAAAF,CAAA,MAAIM,WAAW,MAAf,uBACAN,OAAAE,EAAA,EAAAF,CAAA,MAAIM,WAAW,MAAf,gPAKNV,EAAWa,gBAAiB","file":"static/js/manual-kubernetes-eks-deploy-stateful-efs-app.9ca94a28.js","sourcesContent":["/* @jsx mdx */\n  import React from 'react'\n  import { mdx } from '@mdx-js/react'\n  /* @jsx mdx */\n\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <h1 {...{\n      \"id\": \"deploy-stateful-efs-app-with-eks\"\n    }}>{`Deploy Stateful EFS App with EKS`}</h1>\n    <h2 {...{\n      \"id\": \"what-is-efs\"\n    }}>{`What is EFS?`}</h2>\n    <ul>\n      <li parentName=\"ul\">{`Managed NFS that can be mounted on many EC2.`}</li>\n      <li parentName=\"ul\">{`EFS works with EC2 instances in multi-AZ.`}</li>\n      <li parentName=\"ul\">{`Highly available, scalable, expensive (3xgp2), pay per use.`}</li>\n    </ul>\n    <p><img alt=\"Under the hood\" src=\"https://res.cloudinary.com/gitgoodclub/image/upload/v1548299128/eks-course/Screen_Shot_2019-01-24_at_2.05.15_pm.png\" /></p>\n    <h2 {...{\n      \"id\": \"efs-for-kubernetes\"\n    }}>{`EFS for Kubernetes`}</h2>\n    <p>{`Using EFS, our Wordpress Pods can now be launched into any AZ, and therefore on any K8s worker nodes.`}</p>\n    <p>{`They will all access the same underlying HTML folder (therefore sharing state).`}</p>\n    <h2 {...{\n      \"id\": \"enabling-efs\"\n    }}>{`Enabling EFS`}</h2>\n    <p>{`Heading to the AWS console. Head to the EFS page and create EFS. By default, it will try attach it to whateever VPC is available.`}</p>\n    <p><strong parentName=\"p\">{`Ensure that you attach the correct node worker security groups that we are using for Kubernetes and not the default.`}</strong></p>\n    <p>{`After adding, feel free to add a name tag but then accept the other defaults.`}</p>\n    <p>{`Ensure you take note of the `}<inlineCode parentName=\"p\">{`DNS name`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`File System ID`}</inlineCode>{`.`}</p>\n    <p>{`To be able to enable the EFS, we need to install `}<inlineCode parentName=\"p\">{`amazon-efs-utils`}</inlineCode>{` onto each of the worker nodes.`}</p>\n    <p>{`Example being `}<inlineCode parentName=\"p\">{`ssh -i .ssh/path/to/key.pem ec2-user@REDACTED \"sudo yum install -y amazon-efs-utils`}</inlineCode>{`.`}</p>\n    <h2 {...{\n      \"id\": \"creating-the-namespace-and-prepping-storage\"\n    }}>{`Creating the namespace and prepping storage`}</h2>\n    <p><img alt=\"Layout\" src=\"https://res.cloudinary.com/gitgoodclub/image/upload/v1548300383/eks-course/Screen_Shot_2019-01-24_at_2.26.08_pm.png\" /></p>\n    <p>{`Steps:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Create namespaces`}</li>\n      <li parentName=\"ol\">{`Create RBAC permissions`}</li>\n      <li parentName=\"ol\">{`Create EFS provisioner`}</li>\n      <li parentName=\"ol\">{`Create storageclass`}</li>\n      <li parentName=\"ol\">{`Create PVC's for MySQL and WordPress`}</li>\n    </ol>\n    </MDXLayout>;\n}\n\nMDXContent.isMDXComponent = true;\n  "],"sourceRoot":""}