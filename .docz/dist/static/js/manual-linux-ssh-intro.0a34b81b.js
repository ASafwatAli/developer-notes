(window.webpackJsonp=window.webpackJsonp||[]).push([[130],{"./manual/Linux/SSH-Intro.md":function(e,n,t){"use strict";t.r(n),t.d(n,"default",function(){return h});var o=t("./node_modules/react/index.js"),a=t.n(o),r=t("./node_modules/@mdx-js/tag/dist/index.js");function s(e){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,n){if(null==e)return{};var t,o,a=function(e,n){if(null==e)return{};var t,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function c(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function m(e,n){return!n||"object"!==s(n)&&"function"!==typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,n){return(p=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var h=function(e){function n(e){var t;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),(t=m(this,l(n).call(this,e))).layout=null,t}var t,o,s;return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&p(e,n)}(n,a.a.Component),t=n,(o=[{key:"render",value:function(){var e=this.props,n=e.components;i(e,["components"]);return a.a.createElement(r.MDXTag,{name:"wrapper",components:n},a.a.createElement(r.MDXTag,{name:"p",components:n},"Now, log into the remote server. We will need to adjust the entry in the authorized_keys file, so open it with root or sudo access:"),a.a.createElement(r.MDXTag,{name:"pre",components:n},a.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{}},"sudo nano /root/.ssh/authorized_keys\n")),a.a.createElement(r.MDXTag,{name:"p",components:n},"At the beginning of the line with the key you uploaded, add a command= listing that defines the command that this key is valid for. This should include the full path to the executable, plus any arguments:"),a.a.createElement(r.MDXTag,{name:"pre",components:n},a.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{}},'command="/path/to/command arg1 arg2" ssh-rsa ...\n')),a.a.createElement(r.MDXTag,{name:"p",components:n},"Save and close the file when you are finished."),a.a.createElement(r.MDXTag,{name:"p",components:n},"Now, open the sshd_config file with root or sudo privileges:"),a.a.createElement(r.MDXTag,{name:"pre",components:n},a.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{}},"sudo nano /etc/ssh/sshd_config\n")),a.a.createElement(r.MDXTag,{name:"p",components:n},"Find the directive PermitRootLogin, and change the value to forced-commands-only. This will only allow SSH key logins to use root when a command has been specified for the key:"),a.a.createElement(r.MDXTag,{name:"pre",components:n},a.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{}},"PermitRootLogin forced-commands-only\n")),a.a.createElement(r.MDXTag,{name:"p",components:n},"Save and close the file. Restart the SSH daemon to implement your changes. ",a.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"sudo service ssh restart")),a.a.createElement(r.MDXTag,{name:"hr",components:n}),a.a.createElement("div",{id:"SSH-20"}),"## SSH-20: Forwarding X Application Displays to the Client",a.a.createElement(r.MDXTag,{name:"p",components:n},"The SSH daemon can be configured to automatically forward the display of X applications on the server to the client machine. For this to function correctly, the client must have an X windows system configured and enabled."),a.a.createElement(r.MDXTag,{name:"p",components:n},"To enable this functionality, log into your remote server and edit the sshd_config file as root or with sudo privileges:"),a.a.createElement(r.MDXTag,{name:"pre",components:n},a.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{}},"sudo nano /etc/ssh/sshd_config\n")),a.a.createElement(r.MDXTag,{name:"p",components:n},'Search for the X11Forwarding directive. If it is commented out, uncomment it. Create it if necessary and set the value to "yes":'),a.a.createElement(r.MDXTag,{name:"p",components:n},a.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"X11Forwarding yes")),a.a.createElement(r.MDXTag,{name:"p",components:n},"Save and restart ",a.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"sudo service ssh restart")),a.a.createElement(r.MDXTag,{name:"p",components:n},"To connect to the server and forward an application's display, you have to pass the -X option from the client upon connection:"),a.a.createElement(r.MDXTag,{name:"pre",components:n},a.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{}},"ssh -X username@remote_host\n")),a.a.createElement(r.MDXTag,{name:"p",components:n},"Graphical applications started on the server through this session should be displayed on the local computer. The performance might be a bit slow, but it is very helpful in a pinch."),a.a.createElement(r.MDXTag,{name:"hr",components:n}),a.a.createElement("div",{id:"SSH-21"}),"## SSH-21: Client Side Configuration Options",a.a.createElement(r.MDXTag,{name:"p",components:n},a.a.createElement(r.MDXTag,{name:"strong",components:n,parentName:"p"},"Defining Server-Specific Connection Info")),a.a.createElement(r.MDXTag,{name:"p",components:n},"On your local computer, you can define individual configurations for some or all of the servers you connect to. These can be stored in the ~/.ssh/config file, which is read by your SSH client each time it is called."),a.a.createElement(r.MDXTag,{name:"p",components:n},"Create or open this file in your text editor on your local computer:"),a.a.createElement(r.MDXTag,{name:"pre",components:n},a.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{}},"nano ~/.ssh/config\n")),a.a.createElement(r.MDXTag,{name:"p",components:n},"Inside, you can define individual configuration options by introducing each with a Host keyword, followed by an alias. Beneath this and indented, you can define any of the directives found in the ssh_config man page:"),a.a.createElement(r.MDXTag,{name:"pre",components:n},a.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{}},"man ssh_config\n")),a.a.createElement(r.MDXTag,{name:"p",components:n},"An example configuration would be:"),a.a.createElement(r.MDXTag,{name:"pre",components:n},a.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{}},"Host testhost\n    HostName example.com\n    Port 4444\n    User demo\n")),a.a.createElement(r.MDXTag,{name:"p",components:n},'You could then connect to example.com on port 4444 using the username "demo" by simply typing:'),a.a.createElement(r.MDXTag,{name:"pre",components:n},a.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{}},"ssh testhost\n")),a.a.createElement(r.MDXTag,{name:"p",components:n},"You can also use wildcards to match more than one host. Keep in mind that later matches can override earlier ones. Because of this, you should put your most general matches at the top. For instance, you could default all connections to not allow X forwarding, with an override for example.com by having this in your file:"),a.a.createElement(r.MDXTag,{name:"pre",components:n},a.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{}},"Host *\n    ForwardX11 no\n\nHost testhost\n    HostName example.com\n    ForwardX11 yes\n    Port 4444\n    User demo\n")),a.a.createElement(r.MDXTag,{name:"p",components:n},"Save and close the file when you are done."),a.a.createElement(r.MDXTag,{name:"hr",components:n}),a.a.createElement("div",{id:"SSH-22"}),"### SSH-22: Keep Connections Alive to Avoid Timeout",a.a.createElement(r.MDXTag,{name:"p",components:n},"If you find yourself being disconnected from SSH sessions before you are ready, it is possible that your connection is timing out."),a.a.createElement(r.MDXTag,{name:"p",components:n},"You can configure your client to send a packet to the server every so often in order to avoid this situation:"),a.a.createElement(r.MDXTag,{name:"p",components:n},"On your local computer, you can configure this for every connection by editing your ~/.ssh/config file."),a.a.createElement(r.MDXTag,{name:"p",components:n},'If one does not already exist, at the top of the file, define a section that will match all hosts. Set the ServerAliveInterval to "120" to send a packet to the server every two minutes. This should be enough to notify the server not to close the connection:'),a.a.createElement(r.MDXTag,{name:"pre",components:n},a.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{}},"Host *\n    ServerAliveInterval 120\n")),a.a.createElement(r.MDXTag,{name:"p",components:n},"Save and close."),a.a.createElement(r.MDXTag,{name:"hr",components:n}),a.a.createElement("div",{id:"SSH-23"}),"## SSH-23: Disabling Host Checking",a.a.createElement(r.MDXTag,{name:"p",components:n},"By default, whenever you connect to a new server, you will be shown the remote SSH daemon's host key fingerprint."),a.a.createElement(r.MDXTag,{name:"pre",components:n},a.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{}},"The authenticity of host '111.111.11.111 (111.111.11.111)' can't be established.\nECDSA key fingerprint is fd:fd:d4:f9:77:fe:73:84:e1:55:00:ad:d6:6d:22:fe.\nAre you sure you want to continue connecting (yes/no)? yes\n")),a.a.createElement(r.MDXTag,{name:"p",components:n},"This is configured so that you can verify the authenticity of the host you are attempting to connect to and spot instances where a malicious user may be trying to masquerade as the remote host."),a.a.createElement(r.MDXTag,{name:"p",components:n},"In certain circumstances, you may wish to disable this feature. Note: This can be a big security risk, so make sure you know what you are doing if you set your system up like this."),a.a.createElement(r.MDXTag,{name:"p",components:n},"To make the change, the open the ~/.ssh/config file on your local computer."),a.a.createElement(r.MDXTag,{name:"p",components:n},'If one does not already exist, at the top of the file, define a section that will match all hosts. Set the StrictHostKeyChecking directive to "no" to add new hosts automatically to the known_hosts file. Set the UserKnownHostsFile to /dev/null to not warn on new or changed hosts:'),a.a.createElement(r.MDXTag,{name:"pre",components:n},a.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{}},"Host *\n    StrictHostKeyChecking no\n    UserKnownHostsFile /dev/null\n")),a.a.createElement(r.MDXTag,{name:"p",components:n},'You can enable the checking on a case-by-case basis by reversing those options for other hosts. The default for StrictHostKeyChecking is "ask":'),a.a.createElement(r.MDXTag,{name:"pre",components:n},a.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{}},"Host *\n    StrictHostKeyChecking no\n    UserKnownHostsFile /dev/null\n")),a.a.createElement(r.MDXTag,{name:"pre",components:n},a.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{}},"Host testhost\n    HostName example.com\n    StrictHostKeyChecking ask\n    UserKnownHostsFile /home/demo/.ssh/known_hosts\n")),a.a.createElement(r.MDXTag,{name:"hr",components:n}),a.a.createElement("div",{id:"SSH-24"}),"### SSH-24: Multiplexing SSH Over a Single TCP Connection",a.a.createElement(r.MDXTag,{name:"hr",components:n}),a.a.createElement(r.MDXTag,{name:"p",components:n},a.a.createElement(r.MDXTag,{name:"strong",components:n,parentName:"p"},"Definition: Multiplexing")),a.a.createElement(r.MDXTag,{name:"p",components:n},"Generally speaking, multiplexing is the ability to carry multiple signals over a single connection. Similarly, SSH multiplexing is the ability to carry multiple SSH sessions over a single TCP connection. ",a.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://en.wikibooks.org/wiki/OpenSSH/Cookbook/Multiplexing"}},"This Wikibook article")," goes into more detail on SSH multiplexing; in particular, I would call your attention to the table under the \u201cAdvantages of Multiplexing\u201d to better understand the idea of multiple SSH sessions with a single TCP connection."),a.a.createElement(r.MDXTag,{name:"hr",components:n}),a.a.createElement(r.MDXTag,{name:"p",components:n},"There are situations where establishing a new TCP connection can take longer than you would like. If you are making multiple connections to the same machine, you can take advantage of multiplexing."),a.a.createElement(r.MDXTag,{name:"p",components:n},"SSH multiplexing re-uses the same TCP connection for multiple SSH sessions. This removes some of the work necessary to establish a new session, possibly speeding things up. Limiting the number of connections may also be helpful for other reasons."),a.a.createElement(r.MDXTag,{name:"p",components:n},"To set up multiplexing, you can manually set up the connections, or you can configure your client to automatically use multiplexing when available. We will demonstrate the second option here."),a.a.createElement(r.MDXTag,{name:"p",components:n},"To configure multiplexing, edit your SSH client's configuration file on your local machine:"),a.a.createElement(r.MDXTag,{name:"pre",components:n},a.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{}},"nano ~/.ssh/config\n")),a.a.createElement(r.MDXTag,{name:"p",components:n},"If you do not already have a wildcard host definition at the top of the file, add one now (as Host ","*","). We will be setting the ",a.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"ControlMaster, ControlPath, and ControlPersist")," values to establish our multiplexing configuration."),a.a.createElement(r.MDXTag,{name:"p",components:n},"The ",a.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"ControlMaster"),' should be set to "auto" in able to automatically allow multiplexing if possible. The ',a.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"ControlPath")," will establish the path to control socket. The first session will create this socket and subsequent sessions will be able to find it because it is labeled by username, host, and port."),a.a.createElement(r.MDXTag,{name:"p",components:n},"Setting the ",a.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"ControlPersist"),' option to "1" will allow the initial master connection to be backgrounded. The "1" specifies that the TCP connection should automatically terminate one second after the last SSH session is closed:'),a.a.createElement(r.MDXTag,{name:"pre",components:n},a.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{}},"Host *\n    ControlMaster auto\n    ControlPath ~/.ssh/multiplex/%r@%h:%p\n    ControlPersist 1\n")),a.a.createElement(r.MDXTag,{name:"p",components:n},"Save and close the file when you are finished. Now, we need to actually create the directory we specified in the control path:"),a.a.createElement(r.MDXTag,{name:"pre",components:n},a.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{}},"mkdir ~/.ssh/multiplex\n")),a.a.createElement(r.MDXTag,{name:"p",components:n},"Now, any sessions that are established with the same machine will attempt to use the existing socket and TCP connection. When the last session exists, the connection will be torn down after one second."),a.a.createElement(r.MDXTag,{name:"p",components:n},'If for some reason you need to bypass the multiplexing configuration temporarily, you can do so by passing the -S flag with "none":'),a.a.createElement(r.MDXTag,{name:"pre",components:n},a.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{}},"ssh -S none username@remote_host\n")),a.a.createElement(r.MDXTag,{name:"hr",components:n}),a.a.createElement("div",{id:"SSH-25"}),"## SSH-25: Setting Up SSH Tunnels",a.a.createElement(r.MDXTag,{name:"p",components:n},"// todo"),a.a.createElement(r.MDXTag,{name:"hr",components:n}),a.a.createElement("div",{id:"UBU-1"}),"## UBU-1: Installing Ubuntu onto VirtualBox",a.a.createElement(r.MDXTag,{name:"p",components:n},"// todo"))}}])&&c(t.prototype,o),s&&c(t,s),n}();h.__docgenInfo={description:"",methods:[],displayName:"MDXContent"}}}]);
//# sourceMappingURL=manual-linux-ssh-intro.305817e8304de77c75ce.js.map