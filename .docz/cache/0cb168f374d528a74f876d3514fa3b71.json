{"remainingRequest":"/Users/dennis.okeeffe/Project-Imposter/developer-notes/node_modules/docz-core/node_modules/babel-loader/lib/index.js??ref--6-1!/Users/dennis.okeeffe/Project-Imposter/developer-notes/node_modules/@mdx-js/loader/index.js??ref--6-2!/Users/dennis.okeeffe/Project-Imposter/developer-notes/node_modules/source-map-loader/index.js!/Users/dennis.okeeffe/Project-Imposter/developer-notes/manual/Stripe/Stripe-Node-React.md","dependencies":[{"path":"/Users/dennis.okeeffe/Project-Imposter/developer-notes/manual/Stripe/Stripe-Node-React.md","mtime":1581231666385},{"path":"/Users/dennis.okeeffe/Project-Imposter/developer-notes/node_modules/cache-loader/dist/cjs.js","mtime":1581496618588},{"path":"/Users/dennis.okeeffe/Project-Imposter/developer-notes/node_modules/docz-core/node_modules/babel-loader/lib/index.js","mtime":1578565694890},{"path":"/Users/dennis.okeeffe/Project-Imposter/developer-notes/node_modules/@mdx-js/loader/index.js","mtime":1581496618277},{"path":"/Users/dennis.okeeffe/Project-Imposter/developer-notes/node_modules/source-map-loader/index.js","mtime":1580255490569}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyBmcm9tICIvVXNlcnMvZGVubmlzLm9rZWVmZmUvUHJvamVjdC1JbXBvc3Rlci9kZXZlbG9wZXItbm90ZXMvbm9kZV9tb2R1bGVzL2JhYmVsLXByZXNldC1yZWFjdC1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIjsKdmFyIF9qc3hGaWxlTmFtZSA9ICIvVXNlcnMvZGVubmlzLm9rZWVmZmUvUHJvamVjdC1JbXBvc3Rlci9kZXZlbG9wZXItbm90ZXMvbWFudWFsL1N0cmlwZS9TdHJpcGUtTm9kZS1SZWFjdC5tZCI7CgooZnVuY3Rpb24gKCkgewogIHZhciBlbnRlck1vZHVsZSA9ICh0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwgOiByZXF1aXJlKCdyZWFjdC1ob3QtbG9hZGVyJykpLmVudGVyTW9kdWxlOwogIGVudGVyTW9kdWxlICYmIGVudGVyTW9kdWxlKG1vZHVsZSk7Cn0pKCk7Cgp2YXIgX19zaWduYXR1cmVfXyA9IHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbFsiZGVmYXVsdCJdLnNpZ25hdHVyZSA6IGZ1bmN0aW9uIChhKSB7CiAgcmV0dXJuIGE7Cn07CgovKiBAanN4IG1keCAqLwppbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnOwppbXBvcnQgeyBtZHggfSBmcm9tICdAbWR4LWpzL3JlYWN0JzsKLyogQGpzeCBtZHggKi8KCnZhciBtYWtlU2hvcnRjb2RlID0gZnVuY3Rpb24gbWFrZVNob3J0Y29kZShuYW1lKSB7CiAgcmV0dXJuIGZ1bmN0aW9uIE1EWERlZmF1bHRTaG9ydGNvZGUocHJvcHMpIHsKICAgIGNvbnNvbGUud2FybigiQ29tcG9uZW50ICIgKyBuYW1lICsgIiB3YXMgbm90IGltcG9ydGVkLCBleHBvcnRlZCwgb3IgcHJvdmlkZWQgYnkgTURYUHJvdmlkZXIgYXMgZ2xvYmFsIHNjb3BlIik7CiAgICByZXR1cm4gbWR4KCJkaXYiLCBPYmplY3QuYXNzaWduKHt9LCBwcm9wcywgewogICAgICBfX3NvdXJjZTogewogICAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgICAgbGluZU51bWJlcjogOQogICAgICB9LAogICAgICBfX3NlbGY6IHRoaXMKICAgIH0pKTsKICB9Owp9OwoKdmFyIGxheW91dFByb3BzID0ge307CnZhciBNRFhMYXlvdXQgPSAid3JhcHBlciI7CmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIE1EWENvbnRlbnQoX3JlZikgewogIHZhciBjb21wb25lbnRzID0gX3JlZi5jb21wb25lbnRzLAogICAgICBwcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcmVmLCBbImNvbXBvbmVudHMiXSk7CgogIHJldHVybiBtZHgoTURYTGF5b3V0LCBPYmplY3QuYXNzaWduKHt9LCBsYXlvdXRQcm9wcywgcHJvcHMsIHsKICAgIGNvbXBvbmVudHM6IGNvbXBvbmVudHMsCiAgICBtZHhUeXBlOiAiTURYTGF5b3V0IiwKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDIwCiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSksIG1keCgiaDEiLCBPYmplY3QuYXNzaWduKHsKICAgICJpZCI6ICJ1c2luZy1zdHJpcGUtd2l0aC1ub2RlanMiCiAgfSwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMjEKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9KSwgIlVzaW5nIFN0cmlwZSB3aXRoIE5vZGUuanMiKSwgbWR4KCJoMiIsIE9iamVjdC5hc3NpZ24oewogICAgImlkIjogInJlc291cmNlcyIKICB9LCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAyNAogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0pLCAiUmVzb3VyY2VzIiksIG1keCgib2wiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAyNwogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sIG1keCgibGkiLCB7CiAgICBwYXJlbnROYW1lOiAib2wiLAogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMjgKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCBtZHgoImEiLCBPYmplY3QuYXNzaWduKHsKICAgIHBhcmVudE5hbWU6ICJsaSIKICB9LCB7CiAgICAiaHJlZiI6ICJodHRwczovL3N0cmlwZS5jb20vZG9jcy9wYXltZW50cy9wYXltZW50LWludGVudHMvbWlncmF0aW9uIgogIH0sIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDI4CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSksICJQYXltZW50IE1pZ3JhdGlvbiBHdWlkZSIpKSwgbWR4KCJsaSIsIHsKICAgIHBhcmVudE5hbWU6ICJvbCIsCiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAzMQogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sIG1keCgiYSIsIE9iamVjdC5hc3NpZ24oewogICAgcGFyZW50TmFtZTogImxpIgogIH0sIHsKICAgICJocmVmIjogImh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL3BheW1lbnRzL3BheW1lbnQtaW50ZW50cyIKICB9LCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAzMQogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0pLCAiUGF5bWVudCBJbnRlbnRzIikpLCBtZHgoImxpIiwgewogICAgcGFyZW50TmFtZTogIm9sIiwKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDM0CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgbWR4KCJhIiwgT2JqZWN0LmFzc2lnbih7CiAgICBwYXJlbnROYW1lOiAibGkiCiAgfSwgewogICAgImhyZWYiOiAiaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvanMvcGF5bWVudF9pbnRlbnRzL2NvbmZpcm1fY2FyZF9wYXltZW50IgogIH0sIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDM0CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSksICJTdHJpcGUuanMgRG9jcyIpKSwgbWR4KCJsaSIsIHsKICAgIHBhcmVudE5hbWU6ICJvbCIsCiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAzNwogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sIG1keCgiYSIsIE9iamVjdC5hc3NpZ24oewogICAgcGFyZW50TmFtZTogImxpIgogIH0sIHsKICAgICJocmVmIjogImh0dHBzOi8vZ2l0aHViLmNvbS9zdHJpcGUvcmVhY3Qtc3RyaXBlLWVsZW1lbnRzIgogIH0sIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDM3CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSksICJSZWFjdCBTdHJpcGUgRWxlbWVudHMgR2l0SHViIikpKSwgbWR4KCJoMiIsIE9iamVjdC5hc3NpZ24oewogICAgImlkIjogImludHJvIgogIH0sIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDQxCiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSksICJJbnRybyIpLCBtZHgoInAiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA0NAogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJUaGlzIHdpbGwgc2hvdyBob3cgdG8gbWFrZSBwYXltZW50cyB3aXRob3V0IG5lZWRpbmcgY2FyZCBkZXRhaWxzIHRvIGhpdCB0aGUgc2VydmVyIHVzaW5nIFBheW1lbnQgSW50ZW50cy4gVGhlcmUgaXMgdHdvIHNlY3Rpb25zIHRvIHRoaXM6IiksIG1keCgib2wiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA0NQogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sIG1keCgibGkiLCB7CiAgICBwYXJlbnROYW1lOiAib2wiLAogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogNDYKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiTm9kZSBFeHByZXNzIHNlcnZlciIpLCBtZHgoImxpIiwgewogICAgcGFyZW50TmFtZTogIm9sIiwKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDQ3CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgIlJlYWN0IEFwcCIpKSwgbWR4KCJoMiIsIE9iamVjdC5hc3NpZ24oewogICAgImlkIjogInByZXJlcXMiCiAgfSwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogNDkKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9KSwgIlByZXJlcXMiKSwgbWR4KCJ1bCIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDUyCiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgbWR4KCJsaSIsIHsKICAgIHBhcmVudE5hbWU6ICJ1bCIsCiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA1MwogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJFbnN1cmUgeW91IGhhdmUgYSBTdHJpcGUgYWNjb3VudCIpLCBtZHgoImxpIiwgewogICAgcGFyZW50TmFtZTogInVsIiwKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDU0CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgIkJhc2ljIGtub3dsZWRnZSBvbiBFeHByZXNzLmpzIiksIG1keCgibGkiLCB7CiAgICBwYXJlbnROYW1lOiAidWwiLAogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogNTUKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiQmFzaWMga25vd2xlZGdlIGZvciAiLCBtZHgoImlubGluZUNvZGUiLCB7CiAgICBwYXJlbnROYW1lOiAibGkiLAogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogNTUKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiY3JlYXRlLXJlYWN0LWFwcCIpKSksIG1keCgiaDIiLCBPYmplY3QuYXNzaWduKHsKICAgICJpZCI6ICIxLXRoZS1leHByZXNzLXNlcnZlciIKICB9LCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA1NwogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0pLCAiMS4gVGhlIEV4cHJlc3MgU2VydmVyIiksIG1keCgicHJlIiwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogNjAKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCBtZHgoImNvZGUiLCBPYmplY3QuYXNzaWduKHsKICAgIHBhcmVudE5hbWU6ICJwcmUiCiAgfSwgewogICAgImNsYXNzTmFtZSI6ICJsYW5ndWFnZS1zaGVsbCIKICB9LCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA2MAogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0pLCAibWtkaXIgc2VydmVyXG5jZCBzZXJ2ZXJcbnlhcm4gaW5pdCAteSAjIHNraXAgeWFybiBpbml0IHdpdGggZGVmYXVsdHMgZm9yIG5vd1xueWFybiBhZGQgZXhwcmVzcyBib2R5LXBhcnNlciBzdHJpcGUgY29ycyBtb3JnYW5cbiIpKSwgbWR4KCJwIiwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogNjcKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiQ29uZmlndXJlIHRoZSAuZW52IGZpbGUgdG8gY29udGFpbiB5b3VyIFN0cmlwZSBrZXkgKHdlJ3JlIG9ubHkgdXNpbmcgdGhlIHRlc3Qga2V5IGZvciBub3cpOiIpLCBtZHgoInByZSIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDY4CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgbWR4KCJjb2RlIiwgT2JqZWN0LmFzc2lnbih7CiAgICBwYXJlbnROYW1lOiAicHJlIgogIH0sIHsKICAgICJjbGFzc05hbWUiOiAibGFuZ3VhZ2Utc2hlbGwiCiAgfSwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogNjgKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9KSwgIlNLX1RFU1RfS0VZPXNrX3Rlc3QuLi5cbiIpKSwgbWR4KCJwIiwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogNzIKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiQ3JlYXRlICIsIG1keCgiaW5saW5lQ29kZSIsIHsKICAgIHBhcmVudE5hbWU6ICJwIiwKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDcyCiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgImluZGV4LmpzIiksICIgYW5kIGFkZCB0aGUgZm9sbG93aW5nOiIpLCBtZHgoInByZSIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDczCiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgbWR4KCJjb2RlIiwgT2JqZWN0LmFzc2lnbih7CiAgICBwYXJlbnROYW1lOiAicHJlIgogIH0sIHsKICAgICJjbGFzc05hbWUiOiAibGFuZ3VhZ2UtamF2YXNjcmlwdCIKICB9LCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA3MwogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0pLCAicmVxdWlyZSgnZG90ZW52JykuY29uZmlnKCk7XG5jb25zdCBjb3JzID0gcmVxdWlyZSgnY29ycycpO1xuY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcbmNvbnN0IHN0cmlwZSA9IHJlcXVpcmUoJ3N0cmlwZScpKHByb2Nlc3MuZW52LlNLX1RFU1RfS0VZKTtcblxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuY29uc3QgcG9ydCA9IDgwODA7XG5jb25zdCBib2R5UGFyc2VyID0gcmVxdWlyZSgnYm9keS1wYXJzZXInKTtcbmNvbnN0IG1vcmdhbiA9IHJlcXVpcmUoJ21vcmdhbicpO1xuLy8gcGFyc2UgYXBwbGljYXRpb24vanNvblxuYXBwLnVzZShib2R5UGFyc2VyLmpzb24oKSk7XG5hcHAudXNlKGNvcnMoKSk7XG5hcHAudXNlKG1vcmdhbignY29tYmluZWQnKSk7XG5cblxuLy8gYmFzaWMgcm91dGUgY3JlYXRlIGEgcGF5bWVudCBpbnRlbnRcbmFwcC5wb3N0KCcvYXBpL3YxL2NyZWF0ZScsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCBpbnRlbnQgPSBhd2FpdCBzdHJpcGUucGF5bWVudEludGVudHMuY3JlYXRlKHtcbiAgICBhbW91bnQ6IDEwOTksXG4gICAgY3VycmVuY3k6ICdhdWQnLFxuICAgIHBheW1lbnRfbWV0aG9kX3R5cGVzOiBbJ2NhcmQnXSxcbiAgfSk7XG4gIHJlcy5qc29uKHsgaW50ZW50OiBpbnRlbnQuY2xpZW50X3NlY3JldCB9KTtcbn0pO1xuXG5hcHAucG9zdCgnL2FwaS92MS9jaGFyZ2UnLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgY2hhcmdlID0gYXdhaXQgc3RyaXBlLmNoYXJnZXMuY3JlYXRlKHtcbiAgICBhbW91bnQ6IDE2MDAsXG4gICAgY3VycmVuY3k6ICdhdWQnLFxuICB9KTtcbiAgcmVzLmpzb24oY2hhcmdlKTtcbn0pXG5cbi8vIGJhc2ljIHJvdXRlIGNyZWF0ZSBhIHNldHVwIGludGVudFxuYXBwLnBvc3QoJy9hcGkvdjEvc2V0dXAtaW50ZW50JywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgcGF5bWVudF9tZXRob2RfdHlwZXM6IFsnY2FyZCddLFxuICB9KTtcbiAgcmVzLmpzb24oeyBpbnRlbnQ6IGludGVudC5jbGllbnRfc2VjcmV0IH0pO1xufSk7XG5cbi8vIGJhc2ljIHJvdXRlIHRvIHJlY2VpdmUgYW5kIGxvZyBhIHdlYmhvb2tcbmFwcC5wb3N0KCcvYXBpL3YxL2V2ZW50cy93ZWJob29rJywgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnNvbGUubG9nKCdAIFdlYmhvb2sgcmVjZWl2ZWQnLCByZXEuYm9keSk7XG4gIHJlcy5qc29uKHsgc3RhdHVzOiAnc3VjY2VzcycgfSk7XG59KTtcblxuYXBwLmxpc3Rlbihwb3J0LCAoKSA9PlxuICBjb25zb2xlLmxvZyhgU3RyaXBlIGV4YW1wbGUgYXBwIGxpc3RlbmluZyBvbiBwb3J0ICR7cG9ydH0hYCksXG4pO1xuIikpLCBtZHgoInAiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAxMjUKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiRm9yIHRlc3RpbmcgdGhlIHdlYmhvb2sgVVJMLCB3ZSBjYW4gdXNlIHRoZSBTdHJpcGUgQ0xJICh1bmxlc3MgeW91IHdhbnQgdG8gc2V0dXAgdGhlIHdlYmhvb2sgZm9yIHlvdXIgYWNjb3VudCk6IiksIG1keCgicHJlIiwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMTI2CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgbWR4KCJjb2RlIiwgT2JqZWN0LmFzc2lnbih7CiAgICBwYXJlbnROYW1lOiAicHJlIgogIH0sIHsKICAgICJjbGFzc05hbWUiOiAibGFuZ3VhZ2Utc2hlbGwiCiAgfSwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMTI2CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSksICJzdHJpcGUgbGlzdGVuIC0tZm9yd2FyZC10byBsb2NhbGhvc3Q6ODA4MC9ob29rcyAjIGxpc3RlbiBmb3IgZXZlbnRzIGFuZCBmb3J3YXJkIHRvIGxvY2FsIFVSTFxuc3RyaXBlIHRyaWdnZXIgcGF5bWVudF9pbnRlbnQuY3JlYXRlZCAjIHRyaWdnZXIgYSBwYXltZW50X2ludGVudC5jcmVhdGVkIGV2ZW50XG5zdHJpcGUgcGF5bWVudF9pbnRlbnRzIGNyZWF0ZSAtLWFtb3VudD0xMDAgLS1jdXJyZW5jeT11c2QgIyBjcmVhdGUgYSBwYXltZW50IGludGVudCBmcm9tIHRoZSBDTElcbiIpKSwgbWR4KCJoMiIsIE9iamVjdC5hc3NpZ24oewogICAgImlkIjogIjItZm9yLXRoZS1yZWFjdC1hcHAiCiAgfSwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMTMyCiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSksICIyLiBGb3IgdGhlIFJlYWN0IEFwcCIpLCBtZHgoInByZSIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDEzNQogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sIG1keCgiY29kZSIsIE9iamVjdC5hc3NpZ24oewogICAgcGFyZW50TmFtZTogInByZSIKICB9LCB7CiAgICAiY2xhc3NOYW1lIjogImxhbmd1YWdlLXNoZWxsIgogIH0sIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDEzNQogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0pLCAibnB4IGNyZWF0ZS1yZWFjdC1hcHAgcmVhY3Qtc3RyaXBlXG5jZCByZWFjdC1zdHJpcGVcbnlhcm4gYWRkIGF4aW9zXG4iKSksIG1keCgicCIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDE0MQogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJBcyBmb3IgdGhlIGNvZGUsIHlvdSBjYW4gY3JlYXRlICIsIG1keCgiaW5saW5lQ29kZSIsIHsKICAgIHBhcmVudE5hbWU6ICJwIiwKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDE0MQogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJTdHJpcGUuanMiKSwgIiBpbiB0aGUgbWFpbiBkaXJlY3RvcnkgYW5kIGNoYW5nZSB0aGUgIiwgbWR4KCJpbmxpbmVDb2RlIiwgewogICAgcGFyZW50TmFtZTogInAiLAogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMTQxCiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgIlN0cmlwZVByb3ZpZGVyIiksICIgcHVibGlzaGFibGUgQVBJIGtleSB3aXRoIHlvdXIgb3duLiIpLCBtZHgoInAiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAxNDIKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiV2UgYXJlIHVzaW5nIGF4aW9zIGhlcmUgdG8gY2hhdCB0byB0aGUgRXhwcmVzcyBzZXJ2ZXIuIiksIG1keCgicCIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDE0MwogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJUaGUgY29kZSBsb29rcyBhcyBmb2xsb3dzOiIpLCBtZHgoInByZSIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDE0NAogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sIG1keCgiY29kZSIsIE9iamVjdC5hc3NpZ24oewogICAgcGFyZW50TmFtZTogInByZSIKICB9LCB7CiAgICAiY2xhc3NOYW1lIjogImxhbmd1YWdlLWphdmFzY3JpcHQiCiAgfSwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMTQ0CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSksICJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgcmVuZGVyIH0gZnJvbSAncmVhY3QtZG9tJztcblxuaW1wb3J0IHtcbiAgQ2FyZEVsZW1lbnQsXG4gIFN0cmlwZVByb3ZpZGVyLFxuICBFbGVtZW50cyxcbiAgaW5qZWN0U3RyaXBlLFxufSBmcm9tICdyZWFjdC1zdHJpcGUtZWxlbWVudHMnO1xuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcblxuY29uc3QgaGFuZGxlQmx1ciA9ICgpID0+IHtcbiAgY29uc29sZS5sb2coJ1tibHVyXScpO1xufTtcbmNvbnN0IGhhbmRsZUNoYW5nZSA9IGNoYW5nZSA9PiB7XG4gIGNvbnNvbGUubG9nKCdbY2hhbmdlXScsIGNoYW5nZSk7XG59O1xuY29uc3QgaGFuZGxlRm9jdXMgPSAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKCdbZm9jdXNdJyk7XG59O1xuY29uc3QgaGFuZGxlUmVhZHkgPSAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKCdbcmVhZHldJyk7XG59O1xuXG5jb25zdCBjcmVhdGVPcHRpb25zID0gKGZvbnRTaXplOiBzdHJpbmcsIHBhZGRpbmc6ID9zdHJpbmcpID0+IHtcbiAgcmV0dXJuIHtcbiAgICBzdHlsZToge1xuICAgICAgYmFzZToge1xuICAgICAgICBmb250U2l6ZSxcbiAgICAgICAgY29sb3I6ICcjNDI0NzcwJyxcbiAgICAgICAgbGV0dGVyU3BhY2luZzogJzAuMDI1ZW0nLFxuICAgICAgICBmb250RmFtaWx5OiAnU291cmNlIENvZGUgUHJvLCBtb25vc3BhY2UnLFxuICAgICAgICAnOjpwbGFjZWhvbGRlcic6IHtcbiAgICAgICAgICBjb2xvcjogJyNhYWI3YzQnLFxuICAgICAgICB9LFxuICAgICAgICAuLi4ocGFkZGluZyA/IHsgcGFkZGluZyB9IDoge30pLFxuICAgICAgfSxcbiAgICAgIGludmFsaWQ6IHtcbiAgICAgICAgY29sb3I6ICcjOWUyMTQ2JyxcbiAgICAgIH0sXG4gICAgfSxcbiAgfTtcbn07XG5cbmNsYXNzIF9DcmVhdGVQYXltZW50TWV0aG9kIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgc3RhdGUgPSB7XG4gICAgZXJyb3I6IG51bGwsXG4gICAgcHJvY2Vzc2luZzogZmFsc2UsXG4gICAgbWVzc2FnZTogbnVsbCxcbiAgfTtcblxuICBoYW5kbGVTdWJtaXQgPSBldiA9PiB7XG4gICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICBpZiAodGhpcy5wcm9wcy5zdHJpcGUgJiYgdGhpcy5wcm9wcy5lbGVtZW50cykge1xuICAgICAgdGhpcy5wcm9wcy5zdHJpcGVcbiAgICAgICAgLmNyZWF0ZVBheW1lbnRNZXRob2Qoe1xuICAgICAgICAgIHR5cGU6ICdjYXJkJyxcbiAgICAgICAgICBjYXJkOiB0aGlzLnByb3BzLmVsZW1lbnRzLmdldEVsZW1lbnQoJ2NhcmQnKSxcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4ocGF5bG9hZCA9PiB7XG4gICAgICAgICAgaWYgKHBheWxvYWQuZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICBlcnJvcjogYEZhaWxlZCB0byBjcmVhdGUgUGF5bWVudE1ldGhvZDogJHtwYXlsb2FkLmVycm9yLm1lc3NhZ2V9YCxcbiAgICAgICAgICAgICAgcHJvY2Vzc2luZzogZmFsc2UsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbZXJyb3JdJywgcGF5bG9hZC5lcnJvcik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICBtZXNzYWdlOiBgQ3JlYXRlZCBQYXltZW50TWV0aG9kOiAke3BheWxvYWQucGF5bWVudE1ldGhvZC5pZH1gLFxuICAgICAgICAgICAgICBwcm9jZXNzaW5nOiBmYWxzZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1twYXltZW50TWV0aG9kXScsIHBheWxvYWQucGF5bWVudE1ldGhvZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBwcm9jZXNzaW5nOiB0cnVlIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZyhcIlN0cmlwZS5qcyBoYXNuJ3QgbG9hZGVkIHlldC5cIik7XG4gICAgfVxuICB9O1xuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGZvcm0gb25TdWJtaXQ9e3RoaXMuaGFuZGxlU3VibWl0fT5cbiAgICAgICAgPGxhYmVsPlxuICAgICAgICAgIHN0cmlwZS5jcmVhdGVQYXltZW50TWV0aG9kXG4gICAgICAgICAgPENhcmRFbGVtZW50XG4gICAgICAgICAgICBvbkJsdXI9e2hhbmRsZUJsdXJ9XG4gICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlfVxuICAgICAgICAgICAgb25Gb2N1cz17aGFuZGxlRm9jdXN9XG4gICAgICAgICAgICBvblJlYWR5PXtoYW5kbGVSZWFkeX1cbiAgICAgICAgICAgIHsuLi5jcmVhdGVPcHRpb25zKHRoaXMucHJvcHMuZm9udFNpemUpfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvbGFiZWw+XG4gICAgICAgIHt0aGlzLnN0YXRlLmVycm9yICYmIDxkaXYgY2xhc3NOYW1lPVwiZXJyb3JcIj57dGhpcy5zdGF0ZS5lcnJvcn08L2Rpdj59XG4gICAgICAgIHt0aGlzLnN0YXRlLm1lc3NhZ2UgJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWVzc2FnZVwiPnt0aGlzLnN0YXRlLm1lc3NhZ2V9PC9kaXY+XG4gICAgICAgICl9XG4gICAgICAgIDxidXR0b24gZGlzYWJsZWQ9e3RoaXMuc3RhdGUucHJvY2Vzc2luZ30+XG4gICAgICAgICAge3RoaXMuc3RhdGUucHJvY2Vzc2luZyA/ICdQcm9jZXNzaW5nXHUyMDI2JyA6ICdDcmVhdGUnfVxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvZm9ybT5cbiAgICApO1xuICB9XG59XG5cbmNvbnN0IENyZWF0ZVBheW1lbnRNZXRob2QgPSBpbmplY3RTdHJpcGUoX0NyZWF0ZVBheW1lbnRNZXRob2QpO1xuXG5jbGFzcyBfSGFuZGxlQ2FyZFBheW1lbnQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBzdGF0ZSA9IHtcbiAgICBjbGllbnRTZWNyZXQ6IG51bGwsXG4gICAgZXJyb3I6IG51bGwsXG4gICAgZGlzYWJsZWQ6IGZhbHNlLFxuICAgIHN1Y2NlZWRlZDogZmFsc2UsXG4gICAgcHJvY2Vzc2luZzogZmFsc2UsXG4gICAgbWVzc2FnZTogbnVsbCxcbiAgfTtcblxuICBoYW5kbGVTdWJtaXQgPSBhc3luYyBldiA9PiB7XG4gICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICBpZiAodGhpcy5wcm9wcy5zdHJpcGUgJiYgdGhpcy5wcm9wcy5lbGVtZW50cykge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXhpb3MucG9zdCgnaHR0cDovL2xvY2FsaG9zdDo4MDgwL2FwaS92MS9jcmVhdGUnKTtcbiAgICAgIHRoaXMucHJvcHMuc3RyaXBlXG4gICAgICAgIC5jb25maXJtQ2FyZFBheW1lbnQocmVzLmRhdGEuaW50ZW50LCB7XG4gICAgICAgICAgcGF5bWVudF9tZXRob2Q6IHtcbiAgICAgICAgICAgIGNhcmQ6IHRoaXMucHJvcHMuZWxlbWVudHMuZ2V0RWxlbWVudCgnY2FyZCcpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKHBheWxvYWQgPT4ge1xuICAgICAgICAgIGlmIChwYXlsb2FkLmVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgZXJyb3I6IGBDaGFyZ2UgZmFpbGVkOiAke3BheWxvYWQuZXJyb3IubWVzc2FnZX1gLFxuICAgICAgICAgICAgICBkaXNhYmxlZDogZmFsc2UsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbZXJyb3JdJywgcGF5bG9hZC5lcnJvcik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICBzdWNjZWVkZWQ6IHRydWUsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6IGBDaGFyZ2Ugc3VjY2VlZGVkISBQYXltZW50SW50ZW50IGlzIGluIHN0YXRlOiAke3BheWxvYWQucGF5bWVudEludGVudC5zdGF0dXN9YCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tQYXltZW50SW50ZW50XScsIHBheWxvYWQucGF5bWVudEludGVudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBkaXNhYmxlZDogdHJ1ZSwgcHJvY2Vzc2luZzogdHJ1ZSB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coXCJTdHJpcGUuanMgaGFzbid0IGxvYWRlZCB5ZXQuXCIpO1xuICAgIH1cbiAgfTtcblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxmb3JtIG9uU3VibWl0PXt0aGlzLmhhbmRsZVN1Ym1pdH0+XG4gICAgICAgIDxsYWJlbD5cbiAgICAgICAgICBzdHJpcGUuY29uZmlybUNhcmRQYXltZW50XG4gICAgICAgICAgPENhcmRFbGVtZW50XG4gICAgICAgICAgICBvbkJsdXI9e2hhbmRsZUJsdXJ9XG4gICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlfVxuICAgICAgICAgICAgb25Gb2N1cz17aGFuZGxlRm9jdXN9XG4gICAgICAgICAgICBvblJlYWR5PXtoYW5kbGVSZWFkeX1cbiAgICAgICAgICAgIHsuLi5jcmVhdGVPcHRpb25zKHRoaXMucHJvcHMuZm9udFNpemUpfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvbGFiZWw+XG4gICAgICAgIHt0aGlzLnN0YXRlLmVycm9yICYmIDxkaXYgY2xhc3NOYW1lPVwiZXJyb3JcIj57dGhpcy5zdGF0ZS5lcnJvcn08L2Rpdj59XG4gICAgICAgIHt0aGlzLnN0YXRlLm1lc3NhZ2UgJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWVzc2FnZVwiPnt0aGlzLnN0YXRlLm1lc3NhZ2V9PC9kaXY+XG4gICAgICAgICl9XG4gICAgICAgIHshdGhpcy5zdGF0ZS5zdWNjZWVkZWQgJiYgKFxuICAgICAgICAgIDxidXR0b24gZGlzYWJsZWQ9e3RoaXMuc3RhdGUuZGlzYWJsZWR9PlxuICAgICAgICAgICAge3RoaXMuc3RhdGUucHJvY2Vzc2luZyA/ICdQcm9jZXNzaW5nXHUyMDI2JyA6ICdQYXknfVxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICApfVxuICAgICAgPC9mb3JtPlxuICAgICk7XG4gIH1cbn1cblxuY29uc3QgSGFuZGxlQ2FyZFBheW1lbnQgPSBpbmplY3RTdHJpcGUoX0hhbmRsZUNhcmRQYXltZW50KTtcblxuY2xhc3MgX0hhbmRsZUNhcmRTZXR1cCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHN0YXRlID0ge1xuICAgIGNsaWVudFNlY3JldDogbnVsbCxcbiAgICBlcnJvcjogbnVsbCxcbiAgICBkaXNhYmxlZDogZmFsc2UsXG4gICAgc3VjY2VlZGVkOiBmYWxzZSxcbiAgICBwcm9jZXNzaW5nOiBmYWxzZSxcbiAgICBtZXNzYWdlOiBudWxsLFxuICB9O1xuXG4gIGhhbmRsZVN1Ym1pdCA9IGFzeW5jIGV2ID0+IHtcbiAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGlmICh0aGlzLnByb3BzLnN0cmlwZSAmJiB0aGlzLnByb3BzLmVsZW1lbnRzKSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBheGlvcy5wb3N0KCdodHRwOi8vbG9jYWxob3N0OjgwODAvYXBpL3YxL3NldHVwLWludGVudCcpO1xuICAgICAgdGhpcy5wcm9wcy5zdHJpcGVcbiAgICAgICAgLmNvbmZpcm1DYXJkU2V0dXAocmVzLmRhdGEuaW50ZW50LCB7XG4gICAgICAgICAgcGF5bWVudF9tZXRob2Q6IHtcbiAgICAgICAgICAgIGNhcmQ6IHRoaXMucHJvcHMuZWxlbWVudHMuZ2V0RWxlbWVudCgnY2FyZCcpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKHBheWxvYWQgPT4ge1xuICAgICAgICAgIGlmIChwYXlsb2FkLmVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgZXJyb3I6IGBTZXR1cCBmYWlsZWQ6ICR7cGF5bG9hZC5lcnJvci5tZXNzYWdlfWAsXG4gICAgICAgICAgICAgIGRpc2FibGVkOiBmYWxzZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tlcnJvcl0nLCBwYXlsb2FkLmVycm9yKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgIHN1Y2NlZWRlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgbWVzc2FnZTogYFNldHVwIHN1Y2NlZWRlZCEgU2V0dXBJbnRlbnQgaXMgaW4gc3RhdGU6ICR7cGF5bG9hZC5zZXR1cEludGVudC5zdGF0dXN9YCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tTZXR1cEludGVudF0nLCBwYXlsb2FkLnNldHVwSW50ZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGRpc2FibGVkOiB0cnVlLCBwcm9jZXNzaW5nOiB0cnVlIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZyhcIlN0cmlwZS5qcyBoYXNuJ3QgbG9hZGVkIHlldC5cIik7XG4gICAgfVxuICB9O1xuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGZvcm0gb25TdWJtaXQ9e3RoaXMuaGFuZGxlU3VibWl0fT5cbiAgICAgICAgPGxhYmVsPlxuICAgICAgICAgIHN0cmlwZS5jb25maXJtQ2FyZFNldHVwXG4gICAgICAgICAgPENhcmRFbGVtZW50XG4gICAgICAgICAgICBvbkJsdXI9e2hhbmRsZUJsdXJ9XG4gICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlfVxuICAgICAgICAgICAgb25Gb2N1cz17aGFuZGxlRm9jdXN9XG4gICAgICAgICAgICBvblJlYWR5PXtoYW5kbGVSZWFkeX1cbiAgICAgICAgICAgIHsuLi5jcmVhdGVPcHRpb25zKHRoaXMucHJvcHMuZm9udFNpemUpfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvbGFiZWw+XG4gICAgICAgIHt0aGlzLnN0YXRlLmVycm9yICYmIDxkaXYgY2xhc3NOYW1lPVwiZXJyb3JcIj57dGhpcy5zdGF0ZS5lcnJvcn08L2Rpdj59XG4gICAgICAgIHt0aGlzLnN0YXRlLm1lc3NhZ2UgJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWVzc2FnZVwiPnt0aGlzLnN0YXRlLm1lc3NhZ2V9PC9kaXY+XG4gICAgICAgICl9XG4gICAgICAgIHshdGhpcy5zdGF0ZS5zdWNjZWVkZWQgJiYgKFxuICAgICAgICAgIDxidXR0b24gZGlzYWJsZWQ9e3RoaXMuc3RhdGUuZGlzYWJsZWR9PlxuICAgICAgICAgICAge3RoaXMuc3RhdGUucHJvY2Vzc2luZyA/ICdQcm9jZXNzaW5nXHUyMDI2JyA6ICdTZXR1cCd9XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICl9XG4gICAgICA8L2Zvcm0+XG4gICAgKTtcbiAgfVxufVxuXG5jb25zdCBIYW5kbGVDYXJkU2V0dXAgPSBpbmplY3RTdHJpcGUoX0hhbmRsZUNhcmRTZXR1cCk7XG5cbmNsYXNzIENoZWNrb3V0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgZWxlbWVudEZvbnRTaXplOiB3aW5kb3cuaW5uZXJXaWR0aCA8IDQ1MCA/ICcxNHB4JyA6ICcxOHB4JyxcbiAgICB9O1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XG4gICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPCA0NTAgJiYgdGhpcy5zdGF0ZS5lbGVtZW50Rm9udFNpemUgIT09ICcxNHB4Jykge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgZWxlbWVudEZvbnRTaXplOiAnMTRweCcgfSk7XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICB3aW5kb3cuaW5uZXJXaWR0aCA+PSA0NTAgJiZcbiAgICAgICAgdGhpcy5zdGF0ZS5lbGVtZW50Rm9udFNpemUgIT09ICcxOHB4J1xuICAgICAgKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBlbGVtZW50Rm9udFNpemU6ICcxOHB4JyB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGVsZW1lbnRGb250U2l6ZSB9ID0gdGhpcy5zdGF0ZTtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJDaGVja291dFwiPlxuICAgICAgICA8aDE+UmVhY3QgU3RyaXBlIEVsZW1lbnRzIHdpdGggUGF5bWVudEludGVudHM8L2gxPlxuICAgICAgICA8RWxlbWVudHM+XG4gICAgICAgICAgPENyZWF0ZVBheW1lbnRNZXRob2QgZm9udFNpemU9e2VsZW1lbnRGb250U2l6ZX0gLz5cbiAgICAgICAgPC9FbGVtZW50cz5cbiAgICAgICAgPEVsZW1lbnRzPlxuICAgICAgICAgIDxIYW5kbGVDYXJkUGF5bWVudCBmb250U2l6ZT17ZWxlbWVudEZvbnRTaXplfSAvPlxuICAgICAgICA8L0VsZW1lbnRzPlxuICAgICAgICA8RWxlbWVudHM+XG4gICAgICAgICAgPEhhbmRsZUNhcmRTZXR1cCBmb250U2l6ZT17ZWxlbWVudEZvbnRTaXplfSAvPlxuICAgICAgICA8L0VsZW1lbnRzPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufVxuXG5jb25zdCBTdHJpcGVBcHAgPSAoKSA9PiB7XG4gIHJldHVybiAoXG4gICAgPFN0cmlwZVByb3ZpZGVyIGFwaUtleT1cInBrX3Rlc3RfLi4uXCI+XG4gICAgICA8Q2hlY2tvdXQgLz5cbiAgICA8L1N0cmlwZVByb3ZpZGVyPlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgU3RyaXBlQXBwO1xuIikpKTsKfQoKaWYgKHR5cGVvZiBNRFhDb250ZW50ICE9PSAndW5kZWZpbmVkJyAmJiBNRFhDb250ZW50ICYmIE1EWENvbnRlbnQgPT09IE9iamVjdChNRFhDb250ZW50KSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKE1EWENvbnRlbnQpKSB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1EWENvbnRlbnQsICdfX2ZpbGVtZXRhJywgewogICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIHZhbHVlOiB7CiAgICAgIG5hbWU6ICJNRFhDb250ZW50IiwKICAgICAgZmlsZW5hbWU6ICJtYW51YWwvU3RyaXBlL1N0cmlwZS1Ob2RlLVJlYWN0Lm1kIgogICAgfQogIH0pOwp9CgpNRFhDb250ZW50LmlzTURYQ29tcG9uZW50ID0gdHJ1ZTsKOwoKKGZ1bmN0aW9uICgpIHsKICB2YXIgcmVhY3RIb3RMb2FkZXIgPSAodHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsIDogcmVxdWlyZSgncmVhY3QtaG90LWxvYWRlcicpKS5kZWZhdWx0OwoKICBpZiAoIXJlYWN0SG90TG9hZGVyKSB7CiAgICByZXR1cm47CiAgfQoKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihtYWtlU2hvcnRjb2RlLCAibWFrZVNob3J0Y29kZSIsICIvVXNlcnMvZGVubmlzLm9rZWVmZmUvUHJvamVjdC1JbXBvc3Rlci9kZXZlbG9wZXItbm90ZXMvbWFudWFsL1N0cmlwZS9TdHJpcGUtTm9kZS1SZWFjdC5tZCIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKGxheW91dFByb3BzLCAibGF5b3V0UHJvcHMiLCAiL1VzZXJzL2Rlbm5pcy5va2VlZmZlL1Byb2plY3QtSW1wb3N0ZXIvZGV2ZWxvcGVyLW5vdGVzL21hbnVhbC9TdHJpcGUvU3RyaXBlLU5vZGUtUmVhY3QubWQiKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihNRFhMYXlvdXQsICJNRFhMYXlvdXQiLCAiL1VzZXJzL2Rlbm5pcy5va2VlZmZlL1Byb2plY3QtSW1wb3N0ZXIvZGV2ZWxvcGVyLW5vdGVzL21hbnVhbC9TdHJpcGUvU3RyaXBlLU5vZGUtUmVhY3QubWQiKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihNRFhDb250ZW50LCAiTURYQ29udGVudCIsICIvVXNlcnMvZGVubmlzLm9rZWVmZmUvUHJvamVjdC1JbXBvc3Rlci9kZXZlbG9wZXItbm90ZXMvbWFudWFsL1N0cmlwZS9TdHJpcGUtTm9kZS1SZWFjdC5tZCIpOwp9KSgpOwoKOwoKKGZ1bmN0aW9uICgpIHsKICB2YXIgbGVhdmVNb2R1bGUgPSAodHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsIDogcmVxdWlyZSgncmVhY3QtaG90LWxvYWRlcicpKS5sZWF2ZU1vZHVsZTsKICBsZWF2ZU1vZHVsZSAmJiBsZWF2ZU1vZHVsZShtb2R1bGUpOwp9KSgpOw=="},{"version":3,"sources":["/Users/dennis.okeeffe/Project-Imposter/developer-notes/manual/Stripe/Stripe-Node-React.md"],"names":["React","mdx","makeShortcode","name","MDXDefaultShortcode","props","console","warn","layoutProps","MDXLayout","MDXContent","components","isMDXComponent"],"mappings":"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","sourcesContent":["/* @jsx mdx */\n  import React from 'react'\n  import { mdx } from '@mdx-js/react'\n  /* @jsx mdx */\n\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <h1 {...{\n      \"id\": \"using-stripe-with-nodejs\"\n    }}>{`Using Stripe with Node.js`}</h1>\n    <h2 {...{\n      \"id\": \"resources\"\n    }}>{`Resources`}</h2>\n    <ol>\n      <li parentName=\"ol\"><a parentName=\"li\" {...{\n          \"href\": \"https://stripe.com/docs/payments/payment-intents/migration\"\n        }}>{`Payment Migration Guide`}</a></li>\n      <li parentName=\"ol\"><a parentName=\"li\" {...{\n          \"href\": \"https://stripe.com/docs/payments/payment-intents\"\n        }}>{`Payment Intents`}</a></li>\n      <li parentName=\"ol\"><a parentName=\"li\" {...{\n          \"href\": \"https://stripe.com/docs/js/payment_intents/confirm_card_payment\"\n        }}>{`Stripe.js Docs`}</a></li>\n      <li parentName=\"ol\"><a parentName=\"li\" {...{\n          \"href\": \"https://github.com/stripe/react-stripe-elements\"\n        }}>{`React Stripe Elements GitHub`}</a></li>\n    </ol>\n    <h2 {...{\n      \"id\": \"intro\"\n    }}>{`Intro`}</h2>\n    <p>{`This will show how to make payments without needing card details to hit the server using Payment Intents. There is two sections to this:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Node Express server`}</li>\n      <li parentName=\"ol\">{`React App`}</li>\n    </ol>\n    <h2 {...{\n      \"id\": \"prereqs\"\n    }}>{`Prereqs`}</h2>\n    <ul>\n      <li parentName=\"ul\">{`Ensure you have a Stripe account`}</li>\n      <li parentName=\"ul\">{`Basic knowledge on Express.js`}</li>\n      <li parentName=\"ul\">{`Basic knowledge for `}<inlineCode parentName=\"li\">{`create-react-app`}</inlineCode></li>\n    </ul>\n    <h2 {...{\n      \"id\": \"1-the-express-server\"\n    }}>{`1. The Express Server`}</h2>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`mkdir server\ncd server\nyarn init -y # skip yarn init with defaults for now\nyarn add express body-parser stripe cors morgan\n`}</code></pre>\n    <p>{`Configure the .env file to contain your Stripe key (we're only using the test key for now):`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`SK_TEST_KEY=sk_test...\n`}</code></pre>\n    <p>{`Create `}<inlineCode parentName=\"p\">{`index.js`}</inlineCode>{` and add the following:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`require('dotenv').config();\nconst cors = require('cors');\nconst express = require('express');\nconst stripe = require('stripe')(process.env.SK_TEST_KEY);\n\nconst app = express();\nconst port = 8080;\nconst bodyParser = require('body-parser');\nconst morgan = require('morgan');\n// parse application/json\napp.use(bodyParser.json());\napp.use(cors());\napp.use(morgan('combined'));\n\n\n// basic route create a payment intent\napp.post('/api/v1/create', async (req, res) => {\n  const intent = await stripe.paymentIntents.create({\n    amount: 1099,\n    currency: 'aud',\n    payment_method_types: ['card'],\n  });\n  res.json({ intent: intent.client_secret });\n});\n\napp.post('/api/v1/charge', async (req, res) => {\n  const charge = await stripe.charges.create({\n    amount: 1600,\n    currency: 'aud',\n  });\n  res.json(charge);\n})\n\n// basic route create a setup intent\napp.post('/api/v1/setup-intent', async (req, res) => {\n    payment_method_types: ['card'],\n  });\n  res.json({ intent: intent.client_secret });\n});\n\n// basic route to receive and log a webhook\napp.post('/api/v1/events/webhook', (req, res) => {\n  console.log('@ Webhook received', req.body);\n  res.json({ status: 'success' });\n});\n\napp.listen(port, () =>\n  console.log(\\`Stripe example app listening on port \\${port}!\\`),\n);\n`}</code></pre>\n    <p>{`For testing the webhook URL, we can use the Stripe CLI (unless you want to setup the webhook for your account):`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`stripe listen --forward-to localhost:8080/hooks # listen for events and forward to local URL\nstripe trigger payment_intent.created # trigger a payment_intent.created event\nstripe payment_intents create --amount=100 --currency=usd # create a payment intent from the CLI\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"2-for-the-react-app\"\n    }}>{`2. For the React App`}</h2>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`npx create-react-app react-stripe\ncd react-stripe\nyarn add axios\n`}</code></pre>\n    <p>{`As for the code, you can create `}<inlineCode parentName=\"p\">{`Stripe.js`}</inlineCode>{` in the main directory and change the `}<inlineCode parentName=\"p\">{`StripeProvider`}</inlineCode>{` publishable API key with your own.`}</p>\n    <p>{`We are using axios here to chat to the Express server.`}</p>\n    <p>{`The code looks as follows:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`import React from 'react';\nimport { render } from 'react-dom';\n\nimport {\n  CardElement,\n  StripeProvider,\n  Elements,\n  injectStripe,\n} from 'react-stripe-elements';\nimport axios from 'axios';\n\nconst handleBlur = () => {\n  console.log('[blur]');\n};\nconst handleChange = change => {\n  console.log('[change]', change);\n};\nconst handleFocus = () => {\n  console.log('[focus]');\n};\nconst handleReady = () => {\n  console.log('[ready]');\n};\n\nconst createOptions = (fontSize: string, padding: ?string) => {\n  return {\n    style: {\n      base: {\n        fontSize,\n        color: '#424770',\n        letterSpacing: '0.025em',\n        fontFamily: 'Source Code Pro, monospace',\n        '::placeholder': {\n          color: '#aab7c4',\n        },\n        ...(padding ? { padding } : {}),\n      },\n      invalid: {\n        color: '#9e2146',\n      },\n    },\n  };\n};\n\nclass _CreatePaymentMethod extends React.Component {\n  state = {\n    error: null,\n    processing: false,\n    message: null,\n  };\n\n  handleSubmit = ev => {\n    ev.preventDefault();\n    if (this.props.stripe && this.props.elements) {\n      this.props.stripe\n        .createPaymentMethod({\n          type: 'card',\n          card: this.props.elements.getElement('card'),\n        })\n        .then(payload => {\n          if (payload.error) {\n            this.setState({\n              error: \\`Failed to create PaymentMethod: \\${payload.error.message}\\`,\n              processing: false,\n            });\n            console.log('[error]', payload.error);\n          } else {\n            this.setState({\n              message: \\`Created PaymentMethod: \\${payload.paymentMethod.id}\\`,\n              processing: false,\n            });\n            console.log('[paymentMethod]', payload.paymentMethod);\n          }\n        });\n      this.setState({ processing: true });\n    } else {\n      console.log(\"Stripe.js hasn't loaded yet.\");\n    }\n  };\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <label>\n          stripe.createPaymentMethod\n          <CardElement\n            onBlur={handleBlur}\n            onChange={handleChange}\n            onFocus={handleFocus}\n            onReady={handleReady}\n            {...createOptions(this.props.fontSize)}\n          />\n        </label>\n        {this.state.error && <div className=\"error\">{this.state.error}</div>}\n        {this.state.message && (\n          <div className=\"message\">{this.state.message}</div>\n        )}\n        <button disabled={this.state.processing}>\n          {this.state.processing ? 'Processing…' : 'Create'}\n        </button>\n      </form>\n    );\n  }\n}\n\nconst CreatePaymentMethod = injectStripe(_CreatePaymentMethod);\n\nclass _HandleCardPayment extends React.Component {\n  state = {\n    clientSecret: null,\n    error: null,\n    disabled: false,\n    succeeded: false,\n    processing: false,\n    message: null,\n  };\n\n  handleSubmit = async ev => {\n    ev.preventDefault();\n    if (this.props.stripe && this.props.elements) {\n      const res = await axios.post('http://localhost:8080/api/v1/create');\n      this.props.stripe\n        .confirmCardPayment(res.data.intent, {\n          payment_method: {\n            card: this.props.elements.getElement('card'),\n          },\n        })\n        .then(payload => {\n          if (payload.error) {\n            this.setState({\n              error: \\`Charge failed: \\${payload.error.message}\\`,\n              disabled: false,\n            });\n            console.log('[error]', payload.error);\n          } else {\n            this.setState({\n              succeeded: true,\n              message: \\`Charge succeeded! PaymentIntent is in state: \\${payload.paymentIntent.status}\\`,\n            });\n            console.log('[PaymentIntent]', payload.paymentIntent);\n          }\n        });\n      this.setState({ disabled: true, processing: true });\n    } else {\n      console.log(\"Stripe.js hasn't loaded yet.\");\n    }\n  };\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <label>\n          stripe.confirmCardPayment\n          <CardElement\n            onBlur={handleBlur}\n            onChange={handleChange}\n            onFocus={handleFocus}\n            onReady={handleReady}\n            {...createOptions(this.props.fontSize)}\n          />\n        </label>\n        {this.state.error && <div className=\"error\">{this.state.error}</div>}\n        {this.state.message && (\n          <div className=\"message\">{this.state.message}</div>\n        )}\n        {!this.state.succeeded && (\n          <button disabled={this.state.disabled}>\n            {this.state.processing ? 'Processing…' : 'Pay'}\n          </button>\n        )}\n      </form>\n    );\n  }\n}\n\nconst HandleCardPayment = injectStripe(_HandleCardPayment);\n\nclass _HandleCardSetup extends React.Component {\n  state = {\n    clientSecret: null,\n    error: null,\n    disabled: false,\n    succeeded: false,\n    processing: false,\n    message: null,\n  };\n\n  handleSubmit = async ev => {\n    ev.preventDefault();\n    if (this.props.stripe && this.props.elements) {\n      const res = await axios.post('http://localhost:8080/api/v1/setup-intent');\n      this.props.stripe\n        .confirmCardSetup(res.data.intent, {\n          payment_method: {\n            card: this.props.elements.getElement('card'),\n          },\n        })\n        .then(payload => {\n          if (payload.error) {\n            this.setState({\n              error: \\`Setup failed: \\${payload.error.message}\\`,\n              disabled: false,\n            });\n            console.log('[error]', payload.error);\n          } else {\n            this.setState({\n              succeeded: true,\n              message: \\`Setup succeeded! SetupIntent is in state: \\${payload.setupIntent.status}\\`,\n            });\n            console.log('[SetupIntent]', payload.setupIntent);\n          }\n        });\n      this.setState({ disabled: true, processing: true });\n    } else {\n      console.log(\"Stripe.js hasn't loaded yet.\");\n    }\n  };\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <label>\n          stripe.confirmCardSetup\n          <CardElement\n            onBlur={handleBlur}\n            onChange={handleChange}\n            onFocus={handleFocus}\n            onReady={handleReady}\n            {...createOptions(this.props.fontSize)}\n          />\n        </label>\n        {this.state.error && <div className=\"error\">{this.state.error}</div>}\n        {this.state.message && (\n          <div className=\"message\">{this.state.message}</div>\n        )}\n        {!this.state.succeeded && (\n          <button disabled={this.state.disabled}>\n            {this.state.processing ? 'Processing…' : 'Setup'}\n          </button>\n        )}\n      </form>\n    );\n  }\n}\n\nconst HandleCardSetup = injectStripe(_HandleCardSetup);\n\nclass Checkout extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      elementFontSize: window.innerWidth < 450 ? '14px' : '18px',\n    };\n    window.addEventListener('resize', () => {\n      if (window.innerWidth < 450 && this.state.elementFontSize !== '14px') {\n        this.setState({ elementFontSize: '14px' });\n      } else if (\n        window.innerWidth >= 450 &&\n        this.state.elementFontSize !== '18px'\n      ) {\n        this.setState({ elementFontSize: '18px' });\n      }\n    });\n  }\n\n  render() {\n    const { elementFontSize } = this.state;\n    return (\n      <div className=\"Checkout\">\n        <h1>React Stripe Elements with PaymentIntents</h1>\n        <Elements>\n          <CreatePaymentMethod fontSize={elementFontSize} />\n        </Elements>\n        <Elements>\n          <HandleCardPayment fontSize={elementFontSize} />\n        </Elements>\n        <Elements>\n          <HandleCardSetup fontSize={elementFontSize} />\n        </Elements>\n      </div>\n    );\n  }\n}\n\nconst StripeApp = () => {\n  return (\n    <StripeProvider apiKey=\"pk_test_...\">\n      <Checkout />\n    </StripeProvider>\n  );\n};\n\nexport default StripeApp;\n`}</code></pre>\n    </MDXLayout>;\n}\n\nMDXContent.isMDXComponent = true;\n  "]}]}