{"remainingRequest":"/Users/okeeffe_d/Business/Documentation/node_modules/babel-loader/lib/index.js?{\"presets\":[[\"/Users/okeeffe_d/Business/Documentation/node_modules/babel-preset-docz/dist/index.js\",{\"flow\":true,\"typescript\":false,\"parseProps\":true}]],\"plugins\":[[\"/Users/okeeffe_d/Business/Documentation/node_modules/docz-utils/lib/named-asset-import.js\",{\"loaderMap\":{\"svg\":{\"ReactComponent\":\"@svgr/webpack?-prettier,-svgo![path]\"}}}]],\"babelrc\":false,\"cacheCompression\":true,\"compact\":true}!/Users/okeeffe_d/Business/Documentation/manual/Kubernetes/Kubernetes-Clusters.md","dependencies":[{"path":"/Users/okeeffe_d/Business/Documentation/manual/Kubernetes/Kubernetes-Clusters.md","mtime":1548209344356},{"path":"/Users/okeeffe_d/Business/Documentation/node_modules/cache-loader/dist/cjs.js","mtime":1548134640245},{"path":"/Users/okeeffe_d/Business/Documentation/node_modules/babel-loader/lib/index.js","mtime":1548134640227}],"contextDependencies":[],"result":["function _typeof(obj){if(typeof Symbol===\"function\"&&typeof Symbol.iterator===\"symbol\"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol===\"function\"&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj;};}return _typeof(obj);}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key];}}return target;}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key];}return target;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)===\"object\"||typeof call===\"function\")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return self;}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function\");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}import React from'react';import{MDXTag}from'@mdx-js/tag';var MDXContent=/*#__PURE__*/function(_React$Component){_inherits(MDXContent,_React$Component);function MDXContent(props){var _this;_classCallCheck(this,MDXContent);_this=_possibleConstructorReturn(this,_getPrototypeOf(MDXContent).call(this,props));_this.layout=null;return _this;}_createClass(MDXContent,[{key:\"render\",value:function render(){var _this$props=this.props,components=_this$props.components,props=_objectWithoutProperties(_this$props,[\"components\"]);return React.createElement(MDXTag,{name:\"wrapper\",components:components},React.createElement(MDXTag,{name:\"h1\",components:components,props:{\"id\":\"running-container-clusters-with-kuberentes\"}},\"Running Container Clusters with Kuberentes\"),React.createElement(MDXTag,{name:\"ul\",components:components},React.createElement(MDXTag,{name:\"li\",components:components,parentName:\"ul\"},React.createElement(MDXTag,{name:\"a\",components:components,parentName:\"li\",props:{\"href\":\"#running-container-clusters-with-kuberentes\"}},\"Running Container Clusters with Kuberentes\"),React.createElement(MDXTag,{name:\"ul\",components:components,parentName:\"li\"},React.createElement(MDXTag,{name:\"li\",components:components,parentName:\"ul\"},React.createElement(MDXTag,{name:\"a\",components:components,parentName:\"li\",props:{\"href\":\"#intro-to-kubernetes\"}},\"Intro to Kubernetes\"),React.createElement(MDXTag,{name:\"ul\",components:components,parentName:\"li\"},React.createElement(MDXTag,{name:\"li\",components:components,parentName:\"ul\"},React.createElement(MDXTag,{name:\"a\",components:components,parentName:\"li\",props:{\"href\":\"#-----kubernetes-architecture\"}},\"---- Kubernetes Architecture\")),React.createElement(MDXTag,{name:\"li\",components:components,parentName:\"ul\"},React.createElement(MDXTag,{name:\"a\",components:components,parentName:\"li\",props:{\"href\":\"#-----introduction-to-yaml\"}},\"---- Introduction to YAML\")))),React.createElement(MDXTag,{name:\"li\",components:components,parentName:\"ul\"},React.createElement(MDXTag,{name:\"a\",components:components,parentName:\"li\",props:{\"href\":\"#kubernetes-setup-and-config\"}},\"Kubernetes Setup and Config\"),React.createElement(MDXTag,{name:\"ul\",components:components,parentName:\"li\"},React.createElement(MDXTag,{name:\"li\",components:components,parentName:\"ul\"},React.createElement(MDXTag,{name:\"a\",components:components,parentName:\"li\",props:{\"href\":\"#-----multi-pod-container-replication-controller\"}},\"---- Multi-Pod (Container) Replication Controller\")),React.createElement(MDXTag,{name:\"li\",components:components,parentName:\"ul\"},React.createElement(MDXTag,{name:\"a\",components:components,parentName:\"li\",props:{\"href\":\"#-----create-and-deploy-service-definitions\"}},\"---- Create and Deploy Service Definitions\")))),React.createElement(MDXTag,{name:\"li\",components:components,parentName:\"ul\"},React.createElement(MDXTag,{name:\"a\",components:components,parentName:\"li\",props:{\"href\":\"#logs-scaling-and-recovery\"}},\"Logs, Scaling and Recovery\"),React.createElement(MDXTag,{name:\"ul\",components:components,parentName:\"li\"},React.createElement(MDXTag,{name:\"li\",components:components,parentName:\"ul\"},React.createElement(MDXTag,{name:\"a\",components:components,parentName:\"li\",props:{\"href\":\"#-----creating-temporary-pods-at-the-command-line\"}},\"---- Creating Temporary Pods at the Command Line\"))))))),React.createElement(MDXTag,{name:\"h2\",components:components,props:{\"id\":\"intro-to-kubernetes\"}},\"Intro to Kubernetes\"),React.createElement(MDXTag,{name:\"p\",components:components},\"k8s is an open source container cluster manager.\"),React.createElement(MDXTag,{name:\"p\",components:components},\"Google donated it under the Apache Commons license.\"),React.createElement(MDXTag,{name:\"p\",components:components},\"It's obejctive is to provide a platform for deploying, scaling and operations of application containers across a cluster of hosts.\"),React.createElement(MDXTag,{name:\"p\",components:components},\"Google uses it to run billions of containers a day on Google Cloud.\"),React.createElement(MDXTag,{name:\"p\",components:components},React.createElement(MDXTag,{name:\"strong\",components:components,parentName:\"p\"},\"Components of Kubernetes\")),React.createElement(MDXTag,{name:\"ul\",components:components},React.createElement(MDXTag,{name:\"li\",components:components,parentName:\"ul\"},\"Nodes\"),React.createElement(MDXTag,{name:\"li\",components:components,parentName:\"ul\"},\"Pods\"),React.createElement(MDXTag,{name:\"li\",components:components,parentName:\"ul\"},\"Labels\"),React.createElement(MDXTag,{name:\"li\",components:components,parentName:\"ul\"},\"Selectors\"),React.createElement(MDXTag,{name:\"li\",components:components,parentName:\"ul\"},\"Controllers\"),React.createElement(MDXTag,{name:\"li\",components:components,parentName:\"ul\"},\"Services\"),React.createElement(MDXTag,{name:\"li\",components:components,parentName:\"ul\"},\"Control Page\"),React.createElement(MDXTag,{name:\"li\",components:components,parentName:\"ul\"},\"API\")),React.createElement(MDXTag,{name:\"h3\",components:components,props:{\"id\":\"-----kubernetes-architecture\"}},\"---- Kubernetes Architecture\"),React.createElement(MDXTag,{name:\"p\",components:components},\"We will end up with one \",React.createElement(MDXTag,{name:\"inlineCode\",components:components,parentName:\"p\"},\"Master/Controller\"),\" which can have \",React.createElement(MDXTag,{name:\"em\",components:components,parentName:\"p\"},\"n\"),\" Minions, which can have \",React.createElement(MDXTag,{name:\"em\",components:components,parentName:\"p\"},\"n\"),\" pods which themselves can container \",React.createElement(MDXTag,{name:\"em\",components:components,parentName:\"p\"},\"n\"),\" containers.\"),React.createElement(MDXTag,{name:\"p\",components:components},React.createElement(MDXTag,{name:\"strong\",components:components,parentName:\"p\"},\"Minions (Nodes)\")),React.createElement(MDXTag,{name:\"p\",components:components},\"These are the physical/virtual container clients. They host the various containers within the cluster.\"),React.createElement(MDXTag,{name:\"p\",components:components},\"Each of them run \",React.createElement(MDXTag,{name:\"inlineCode\",components:components,parentName:\"p\"},\"ETCD\"),\" (a key pair management and communication service) - it's how we can keep everything in sync and the \",React.createElement(MDXTag,{name:\"inlineCode\",components:components,parentName:\"p\"},\"Kubernetes Proxy\"),\".\"),React.createElement(MDXTag,{name:\"p\",components:components},\"Docker must be installed on each of these \",React.createElement(MDXTag,{name:\"inlineCode\",components:components,parentName:\"p\"},\"minions\"),\" as well.\"),React.createElement(MDXTag,{name:\"p\",components:components},React.createElement(MDXTag,{name:\"strong\",components:components,parentName:\"p\"},\"Pods\")),React.createElement(MDXTag,{name:\"p\",components:components},\"One or more containers. These containers are then guarenteed by the \",React.createElement(MDXTag,{name:\"inlineCode\",components:components,parentName:\"p\"},\"Master/Controller\"),\" to be located on the same host machine in order to facilitate sharing of resources.\"),React.createElement(MDXTag,{name:\"p\",components:components},\"Pods are assigned unique IPs within each cluster.\"),React.createElement(MDXTag,{name:\"p\",components:components},\"Pods can container definitions of disk volumes or share, and then provide access from those to all the members (containers) within the pod.\"),React.createElement(MDXTag,{name:\"p\",components:components},React.createElement(MDXTag,{name:\"strong\",components:components,parentName:\"p\"},\"Labels\")),React.createElement(MDXTag,{name:\"p\",components:components},\"Clients can attach \\\"key-value pairs\\\" to any object in the system (like Pods or Minions). The become the labels that identify them in the config and management of them.\"),React.createElement(MDXTag,{name:\"p\",components:components},React.createElement(MDXTag,{name:\"strong\",components:components,parentName:\"p\"},\"Selectors\")),React.createElement(MDXTag,{name:\"p\",components:components},\"Label Selectors represent queries that are made against those labels. The resolve to the corresponding matching objects.\"),React.createElement(MDXTag,{name:\"p\",components:components},\"These two items are the primary way that grouping is done in Kubernetes and determine which components that a given operation applies to when indicated.\"),React.createElement(MDXTag,{name:\"p\",components:components},React.createElement(MDXTag,{name:\"strong\",components:components,parentName:\"p\"},\"Controllers\")),React.createElement(MDXTag,{name:\"p\",components:components},\"These are used in the management of your cluster. Controllers are the mechanism by which your desired configuration state is enforced.\"),React.createElement(MDXTag,{name:\"p\",components:components},\"Controllers manage a set of pods and - depending on the desired configuration state - may engage other controllers to handle replication and scaling (Replication Controller) of X number of containers and pods across the cluster. it is also responsible for replacing any container in a pod that fails (based on the desired state of the cluster).\"),React.createElement(MDXTag,{name:\"p\",components:components},\"Other controllers that can be engaged include a DaemonSet Controller (enforces a 1 to 1 ratio of pods to minions) and a Job Controller (that runs pods to \\\"completion\\\" such as in batch jobs).\"),React.createElement(MDXTag,{name:\"p\",components:components},\"Each set of pods any controller manages is determined by the label selectors that are part of its definition.\"),React.createElement(MDXTag,{name:\"p\",components:components},React.createElement(MDXTag,{name:\"strong\",components:components,parentName:\"p\"},\"Services\")),React.createElement(MDXTag,{name:\"p\",components:components},\"Services allow pods to \",React.createElement(MDXTag,{name:\"inlineCode\",components:components,parentName:\"p\"},\"work together\"),\" eg multi-tiered application eg. web layer, db layer etc. are defined by the label selector.\"),React.createElement(MDXTag,{name:\"p\",components:components},\"Kubernetes can then provide service discovery and handle routing with the static IP for each pod as well as load balancing (round robin based) connections to that service among the pods that match the label selector indicated.\"),React.createElement(MDXTag,{name:\"p\",components:components},\"By default, although a service is only exposed inside a cluster, it can also be exposed outside a cluster as needed.\"),React.createElement(MDXTag,{name:\"h3\",components:components,props:{\"id\":\"-----introduction-to-yaml\"}},\"---- Introduction to YAML\"),React.createElement(MDXTag,{name:\"p\",components:components},React.createElement(MDXTag,{name:\"inlineCode\",components:components,parentName:\"p\"},\"Yet Another Markup Language\"),\", although it moved to \",React.createElement(MDXTag,{name:\"inlineCode\",components:components,parentName:\"p\"},\"YAML Ain't Markup Language\")),React.createElement(MDXTag,{name:\"p\",components:components},\"It's a data serialisation format. It's designed to be easy to map to high level languages.\"),React.createElement(MDXTag,{name:\"pre\",components:components},React.createElement(MDXTag,{name:\"code\",components:components,parentName:\"pre\",props:{}},\"--- # Our Favourite Movies of All Time\\n- The Terminator\\n- Star Wars\\n\")),React.createElement(MDXTag,{name:\"p\",components:components},\"It is highly dependent on the dashes and indentations.\"),React.createElement(MDXTag,{name:\"hr\",components:components}),React.createElement(MDXTag,{name:\"h2\",components:components,props:{\"id\":\"kubernetes-setup-and-config\"}},\"Kubernetes Setup and Config\"),React.createElement(MDXTag,{name:\"p\",components:components},\"Ensure that for your nodes etc and the control-master that you apt-get/yum install \",React.createElement(MDXTag,{name:\"inlineCode\",components:components,parentName:\"p\"},\"ntp\")),React.createElement(MDXTag,{name:\"p\",components:components},\"We use \",React.createElement(MDXTag,{name:\"inlineCode\",components:components,parentName:\"p\"},\"ntp\"),\" for accurate reporting. Ensure for each node you use \",React.createElement(MDXTag,{name:\"inlineCode\",components:components,parentName:\"p\"},\"systemctl enable ntpd && sysmctl start ntpd\"),\".\"),React.createElement(MDXTag,{name:\"p\",components:components},\"To ensure that they can all communicate, edit the \",React.createElement(MDXTag,{name:\"inlineCode\",components:components,parentName:\"p\"},\"/etc/hosts\"),\" file and paste in the IP addresses and names of the minions. That hosts will allow you to ping that minion name.\"),React.createElement(MDXTag,{name:\"p\",components:components},\"In the \",React.createElement(MDXTag,{name:\"inlineCode\",components:components,parentName:\"p\"},\"master/controller\"),\", \",React.createElement(MDXTag,{name:\"inlineCode\",components:components,parentName:\"p\"},\"vim /etc/yum.repos.d/virt7-docker-common-release.repo\")),React.createElement(MDXTag,{name:\"pre\",components:components},React.createElement(MDXTag,{name:\"code\",components:components,parentName:\"pre\",props:{}},\"[virt7-docker-common-release]\\nname=virt7-docker-common-release\\nbaseurl=http://cbs.centos.org/repos/virt7-docker-common-release/x86_64/0s/\\ngpgcheck=0\\n\")),React.createElement(MDXTag,{name:\"p\",components:components},\"Then hit \",React.createElement(MDXTag,{name:\"inlineCode\",components:components,parentName:\"p\"},\"yum update\"),\".\"),React.createElement(MDXTag,{name:\"p\",components:components},\"Ensure \",React.createElement(MDXTag,{name:\"inlineCode\",components:components,parentName:\"p\"},\"systemctl status [iptables|firewalld]\"),\" are not running.\"),React.createElement(MDXTag,{name:\"pre\",components:components},React.createElement(MDXTag,{name:\"code\",components:components,parentName:\"pre\",props:{}},\"Now to ensure that we can share and communicate values, we will install `etcd` and `kubernetes`.\\n\\n`yum install -y --enablerepo=virt7-docker-common-release kubernetes docker`\\n\\n### ---- Install and Configure the Master Controller\\n\\nFor the master, we want to edit the Kubernetes config file.\\n\\n__Master Kube Config__\\n\")),React.createElement(MDXTag,{name:\"p\",components:components},\"cd /etc/kubernetes\\nvim config\"),React.createElement(MDXTag,{name:\"pre\",components:components},React.createElement(MDXTag,{name:\"code\",components:components,parentName:\"pre\",props:{}},\"In the file, the `KUBE_LOTOSTDERR` we want one, `KUBE_LOG_LEBEL` can be set as 0 for debug, `KUBE_ALLOW_PRIV` can be left as false - it is a way to allow any docker container to run in our kube cluster, but we can learn about this later. `KUBE_MASTER` we want to change to ensure that it binds to an interface that we can communicate with. It will default at localhost, so for this example we would do something like `--master=http://centos-master:8080` where centos-master is what we set up in `/etc/hosts`\\n\\nWe will then add `KUBE_ETCD_SERVERS=\\\"--etcd-servers=http://centos-master:2379\\\"`\\n\\n__Setting up etcd__\\n\")),React.createElement(MDXTag,{name:\"p\",components:components},\"cd /etc/etcd\\nvim etcd.conf\"),React.createElement(MDXTag,{name:\"pre\",components:components},React.createElement(MDXTag,{name:\"code\",components:components,parentName:\"pre\",props:{}},\"In the file, we want to change `ETCD_LISTEN_CLIENT_URLS=\\\"http://0.0.0.0:2379\\\"` and the same value in the cluster section for `ETCD_ADVERTISE_CLIENT_URLS`\\n\\n__Editing the Kubernetes APIServer___\\n\")),React.createElement(MDXTag,{name:\"p\",components:components},\"cd /etc/kubernetes\\nvim apiserver\"),React.createElement(MDXTag,{name:\"pre\",components:components},React.createElement(MDXTag,{name:\"code\",components:components,parentName:\"pre\",props:{}},\"Inside, we need to change to the following for the following fields:\\n\")),React.createElement(MDXTag,{name:\"p\",components:components},\"KUBE_API_ADDRESS=\\\"--address=0.0.0.0\\\"\\nKUBE_API_PORT=\\\"--port=8080\\\"\\nKUBELET_PORT=\\\"--kubelet-port=10250\\\"\"),React.createElement(MDXTag,{name:\"p\",components:components},\"// for the basic config, we can comment out the KUBE_ADMISSION_CONTROL\"),React.createElement(MDXTag,{name:\"pre\",components:components},React.createElement(MDXTag,{name:\"code\",components:components,parentName:\"pre\",props:{}},\"__systemctl enable___\\n\\nFinally, we want to enable the following with the command:\\n\")),React.createElement(MDXTag,{name:\"p\",components:components},\"systemctl enable etcd kube-apiserver kube-controller-manager kube-scheduler\\nsystemctl start etcd kube-apiserver kube-controller-manager kube-scheduler\\nsystemctl status etcd kube-apiserver kube-controller-manager kube-scheduler | grep\\\"(running)\\\" | wc -l\"),React.createElement(MDXTag,{name:\"pre\",components:components},React.createElement(MDXTag,{name:\"code\",components:components,parentName:\"pre\",props:{}},\"### ---- Install and Configure the Minions\\n\\nAt this stage, we should be able to see the master controller from the minions.\\n\\n__Minion Kube Config__\\n\")),React.createElement(MDXTag,{name:\"p\",components:components},\"KUBE_MASTER=\\\"--master=\",React.createElement(MDXTag,{name:\"a\",components:components,parentName:\"p\",props:{\"href\":\"http://centos-master:8080\"}},\"http://centos-master:8080\"),\"\\\"\"),React.createElement(MDXTag,{name:\"p\",components:components},\"// add the following\\nKUBE_ETCD_SERVERS=\\\"--etcd-server=\",React.createElement(MDXTag,{name:\"a\",components:components,parentName:\"p\",props:{\"href\":\"http://centos-master:2379\"}},\"http://centos-master:2379\"),\"\\\"\"),React.createElement(MDXTag,{name:\"pre\",components:components},React.createElement(MDXTag,{name:\"code\",components:components,parentName:\"pre\",props:{}},\"__Kublet Config__\\n\\nEdit the `/etc/kubernetes/kublet` file.\\n\")),React.createElement(MDXTag,{name:\"p\",components:components},\"KUBELET_ADDRESS=\\\"--address=0.0.0.0\\\"\"),React.createElement(MDXTag,{name:\"p\",components:components},\"KUBELET_PORT=\\\"--port=102050\\\"\"),React.createElement(MDXTag,{name:\"p\",components:components},\"KUBELET_HOSTNAME=\\\"--hostname-override=centos-minion1\\\"\"),React.createElement(MDXTag,{name:\"p\",components:components},\"KUBELET_API_SERVER=\\\"--api-servers=\",React.createElement(MDXTag,{name:\"a\",components:components,parentName:\"p\",props:{\"href\":\"http://centos-master:8080\"}},\"http://centos-master:8080\"),\"\\\"\"),React.createElement(MDXTag,{name:\"p\",components:components},\"// comment out pod_infra_container\"),React.createElement(MDXTag,{name:\"pre\",components:components},React.createElement(MDXTag,{name:\"code\",components:components,parentName:\"pre\",props:{}},\"Afterwards, ensure you run the following:\\n\")),React.createElement(MDXTag,{name:\"p\",components:components},\"systemctl enable kube-proxy kubelet docker\\nsystemctl start kube-proxy kubelet docker\\nsystemctl status kube-proxy kubelet docker | grep \\\"(running)\\\" | wc-l\"),React.createElement(MDXTag,{name:\"pre\",components:components},React.createElement(MDXTag,{name:\"code\",components:components,parentName:\"pre\",props:{}},\"### ---- Exploring the Environment\\n\\nWe will use `kubectl` from the command line to control the cluster manager.\\n\\nMain functions:\\n\")),React.createElement(MDXTag,{name:\"p\",components:components},\"// list of registered nodes for the cluster\\nkubectl get nodes\"),React.createElement(MDXTag,{name:\"p\",components:components},\"// to get help on it\\nman kubectl-get\"),React.createElement(MDXTag,{name:\"p\",components:components},\"// how to get the ip addresses/info\\nkubetrl describe nodes\"),React.createElement(MDXTag,{name:\"p\",components:components},\"// getting the json info\\nkubectl get nodes -o jsonpath='{.items\",\"[*]\",\".status.addresses\",\"[?(@.type==\\\"ExternalIP\\\")]\",\".address}'\"),React.createElement(MDXTag,{name:\"pre\",components:components},React.createElement(MDXTag,{name:\"code\",components:components,parentName:\"pre\",props:{}},\"***\\n\\n## Pods, Tags and Services\\n\\n### ---- Create and Deploy Pod Definitions\\n\\nLet's start running containers in pods in our cluster.\\n\\nFor configuration, you can use both `json` or `yaml` file format. From a definitions standpoint, it may be better for the current input configuration.\\n\\n`Desired State` for our system is a key concept. It's the only responsibility of Kubernetes to match the defined `desired state`.\\n\\nOn the master node, `cd Builds` and inside that directory `vim nginx.yaml`\\n\")),React.createElement(MDXTag,{name:\"p\",components:components},\"apiVersion: v1\\nkind: Pod\\nmetadata:\\nname: nginx\\nspec:\\ncontainers: - name: nginx\\nimage: nginx:1.7.9 # this is not the latest - used for a reason\\nports: - containerPort: 80\"),React.createElement(MDXTag,{name:\"pre\",components:components},React.createElement(MDXTag,{name:\"code\",components:components,parentName:\"pre\",props:{}},\"If we now use `kubectl get pods`, we should get no pods that are running.\\n\\nThat will be because there are no containers running on any minions.\\n\\nRun `kubectl create -f ./nginx.yaml` and we'll get a notification.\\n\\n`kubectl get pods` should now return results and the minion should now have a container running!\\n\\n__Describing a pod__\\n\\n`kubectl describe pod nginx`\\n\\nThis will tell us a number of things including IDs assigned to the minion, labels if they are assigned, IP etc and info on the containers.\\n\\nThe events will also describe how the container has gone.\\n\\n__Accessing the pod from master___\\n\\nCan we ping that address? No. The reason is that we have no extenal route to that pod. What we can do is run a busy-box image. This will allow us to connect to or test our container.\\n\")),React.createElement(MDXTag,{name:\"p\",components:components},\"// -t is not --tty for kubectl\\nkubectl run busybox --image=busybox --restart=Never --tty -i --generator=run-pod/v1\"),React.createElement(MDXTag,{name:\"p\",components:components},\"// this will spin up the pod called busybox\\n// we will then be in the command line for that pod\\n// If we have this pod running within the minion\\n// we will then have access to other pods on the\\n// same environment\\nwget -q0- \",React.createElement(MDXTag,{name:\"a\",components:components,parentName:\"p\",props:{\"href\":\"http://172.1.0.2\"}},\"http://172.1.0.2\")),React.createElement(MDXTag,{name:\"pre\",components:components},React.createElement(MDXTag,{name:\"code\",components:components,parentName:\"pre\",props:{}},\"To clean up the system, we can use `kubectl delete pod podName`\\n\\nFrom the master, we can then see that the pod is no longer running.\\n\\nWe can also forward temporarily our ports to a remote copy. We can do this with port forward.\\n\")),React.createElement(MDXTag,{name:\"p\",components:components},\"kubectl get pods\\nkubectl create -f nginx.yaml\\nkubectl get pods # will show the pods\"),React.createElement(MDXTag,{name:\"p\",components:components},\"// to forward ports\\n// & means to run in the background\\n// this will return a port above 34000 - otherwise we can specify\\nkubectl port-forward nginx :80 &\\n// from still in the master\\nwget -q0- \",React.createElement(MDXTag,{name:\"a\",components:components,parentName:\"p\",props:{\"href\":\"http://localhost:34853\"}},\"http://localhost:34853\")),React.createElement(MDXTag,{name:\"pre\",components:components},React.createElement(MDXTag,{name:\"code\",components:components,parentName:\"pre\",props:{}},\"### ---- Tags, Labels and Selectors\\n\\nCreate `nginx-pod-label.yaml`\\n\")),React.createElement(MDXTag,{name:\"p\",components:components},\"apiVersion: v1\\nkind: Pod\\nmetadata:\\nname: nginx\\nlabels:\\napp: nginx\\nspec:\\ncontainers: - name: nginx\\nimage: nginx:1.7.9 # this is not the latest - used for a reason\\nports: - containerPort: 80\"),React.createElement(MDXTag,{name:\"pre\",components:components},React.createElement(MDXTag,{name:\"code\",components:components,parentName:\"pre\",props:{}},\"\")),React.createElement(MDXTag,{name:\"p\",components:components},\"kubectl create -f nginx-pod-label.yaml\\nkubectl get pods # will be running\\nkubectl get -l app=nginx\"),React.createElement(MDXTag,{name:\"pre\",components:components},React.createElement(MDXTag,{name:\"code\",components:components,parentName:\"pre\",props:{}},\"If we copy that .yaml file and rename `nginx` to `nginx2`, we can get info just by searching for that name.\\n\\nIf we also do `kubectl decribe pod -l app=nginx2`, we'd just get the info for that name.\\n\\n### ---- Deployment State\\n\\nCreate `nginx-deployment-prod.yaml`\\n\\nThis will make a number of changes. This will go from a simple pod definition to a deployment production set.\\n\")),React.createElement(MDXTag,{name:\"p\",components:components},\"apiVersion: extensions/v1beta1 # this should now be in v1.3\\nkind: Deployment\\nmetadata:\\nname: nginx-deployment-prod\\nspec:\\nreplicas: 1\\ntemplate: # this will be for the pod replicas\\nmetadata:\\nlabels:\\napp: nginx-deployment-prod\\nspec:\\ncontainers: - name: nginx\\nimage: nginx:1.7.9 # this is not the latest - used for a reason\\nports: - containerPort: 80\"),React.createElement(MDXTag,{name:\"pre\",components:components},React.createElement(MDXTag,{name:\"code\",components:components,parentName:\"pre\",props:{}},\"\")),React.createElement(MDXTag,{name:\"p\",components:components},\"kubectl create -f -nginx-deployent-prod.yaml\\nkubectl get pods\\n// this will now return the name + the id concatentated to the end!\\nkubectl get deployments\\n// this will now give us the nginx-deployment-prod with details\"),React.createElement(MDXTag,{name:\"p\",components:components},\"This seems like we're making it more complex than we need to be... but...\"),React.createElement(MDXTag,{name:\"p\",components:components},\"Create \",React.createElement(MDXTag,{name:\"inlineCode\",components:components,parentName:\"p\"},\"nginx-deployment-dev.yaml\"),\" and just change everything to dev.\"),React.createElement(MDXTag,{name:\"p\",components:components},\"Again, create the .yaml kubectl. It will now show two deployments.\"),React.createElement(MDXTag,{name:\"p\",components:components},\"If we create \",React.createElement(MDXTag,{name:\"inlineCode\",components:components,parentName:\"p\"},\"nginx-deployment-dev-update.yaml\"),\" and just change a few things. If we run \",React.createElement(MDXTag,{name:\"inlineCode\",components:components,parentName:\"p\"},\"kubectl apply -f nginx-deployment-dev-update.yaml\"),\" and it will update by apply the contents of that to the name deployment cluster.\"),React.createElement(MDXTag,{name:\"p\",components:components},\"If we run \",React.createElement(MDXTag,{name:\"inlineCode\",components:components,parentName:\"p\"},\"kubectl describe deployments ...\"),\", we can get the details with things like the \",React.createElement(MDXTag,{name:\"inlineCode\",components:components,parentName:\"p\"},\"StrategyType\"),\" etc.\"),React.createElement(MDXTag,{name:\"h3\",components:components,props:{\"id\":\"-----multi-pod-container-replication-controller\"}},\"---- Multi-Pod (Container) Replication Controller\"),React.createElement(MDXTag,{name:\"p\",components:components},\"Until now, we have been creating one or more pods either directly or using a file. However, there has only been one container in each of the pods that we've been working with.\"),React.createElement(MDXTag,{name:\"p\",components:components},\"We can use the replication controller to do more than one container in a pod. It will allow us to deploy 1 to n pods of a particular container.\"),React.createElement(MDXTag,{name:\"pre\",components:components},React.createElement(MDXTag,{name:\"code\",components:components,parentName:\"pre\",props:{}},\"kubectl get pods # we will initially have nothing\\n\\nvim nginx-multi-label.yaml\\n\")),React.createElement(MDXTag,{name:\"p\",components:components},React.createElement(MDXTag,{name:\"strong\",components:components,parentName:\"p\"},\"nginx-multi-label.yaml\")),React.createElement(MDXTag,{name:\"pre\",components:components},React.createElement(MDXTag,{name:\"code\",components:components,parentName:\"pre\",props:{}},\"apiVersion: v1\\nkind: ReplicationController\\nmetadata:\\n    name: nginx-www\\nspec:\\n    replicas: 3\\n    select:\\n        app: nginx\\n    template:\\n        metadata:\\n            name: nginx\\n            labels:\\n                app: nginx\\n            spec:\\n                containers:\\n                    - name: nginx\\n                        image: nginx\\n                        ports:\\n                        - containerPort: 80\\n\")),React.createElement(MDXTag,{name:\"p\",components:components},\"Ensure that if you're going to do this, start the \",React.createElement(MDXTag,{name:\"inlineCode\",components:components,parentName:\"p\"},\"kubelet\"),\" and \",React.createElement(MDXTag,{name:\"inlineCode\",components:components,parentName:\"p\"},\"kube-proxy\"),\" on the other nodes.\"),React.createElement(MDXTag,{name:\"pre\",components:components},React.createElement(MDXTag,{name:\"code\",components:components,parentName:\"pre\",props:{}},\"kubectl get nodes\\n# if everything is on, all three minions should report that they are ready\\nkubectl create -f nginx-multi-label.yaml\\n# replicationcontroller \\\"nginx-www\\\" created\\nkubectl get pods\\n# will show the pods\\nkubectrl describe replicationcontroller\\n# tells us 3 running and 3 pods\\nkubectl describe pods\\n# it will show all of our pods being happy!\\nkubectl get services\\n# gives us just the one service\\n\")),React.createElement(MDXTag,{name:\"p\",components:components},\"If we delete a pod, we will still end up having a service! When we create a definition, that defines the expected state of the entire environment!\"),React.createElement(MDXTag,{name:\"p\",components:components},\"If there is an app error etc. the service will ensure that it gets back to the expected state.\"),React.createElement(MDXTag,{name:\"h3\",components:components,props:{\"id\":\"-----create-and-deploy-service-definitions\"}},\"---- Create and Deploy Service Definitions\"),React.createElement(MDXTag,{name:\"p\",components:components},\"Starting to put things together.\"),React.createElement(MDXTag,{name:\"pre\",components:components},React.createElement(MDXTag,{name:\"code\",components:components,parentName:\"pre\",props:{}},\"kubectl get replicationcontrollers\\nkubectl get pods\\nkubectl get nodes\\n\")),React.createElement(MDXTag,{name:\"p\",components:components},\"Time to use the multicontainer configuration.\"),React.createElement(MDXTag,{name:\"p\",components:components},React.createElement(MDXTag,{name:\"strong\",components:components,parentName:\"p\"},\"nginx-multi-label.yaml\")),React.createElement(MDXTag,{name:\"pre\",components:components},React.createElement(MDXTag,{name:\"code\",components:components,parentName:\"pre\",props:{}},\"apiVersion: v1\\nkind: ReplicationController\\nmetadata:\\n    name: nginx-www\\nspec:\\n    replicas: 3\\n    select:\\n        app: nginx\\n    template:\\n        metadata:\\n            name: nginx\\n            labels:\\n                app: nginx\\n            spec:\\n                containers:\\n                    - name: nginx\\n                        image: nginx\\n                        ports:\\n                        - containerPort: 80\\n\")),React.createElement(MDXTag,{name:\"p\",components:components},React.createElement(MDXTag,{name:\"inlineCode\",components:components,parentName:\"p\"},\"kubectl create -f nginx-multi-label.yaml\")),React.createElement(MDXTag,{name:\"p\",components:components},React.createElement(MDXTag,{name:\"strong\",components:components,parentName:\"p\"},\"Defining an nginx service\")),React.createElement(MDXTag,{name:\"pre\",components:components},React.createElement(MDXTag,{name:\"code\",components:components,parentName:\"pre\",props:{}},\"apiVersion: v1\\nkind: Service\\nmetadata:\\n    data: nginx-service\\nspec:\\n    ports:\\n        port: 8080\\n        targetPort: 80\\n        protocol: TCP\\n    selector:\\n        app: nginx\\n\")),React.createElement(MDXTag,{name:\"p\",components:components},React.createElement(MDXTag,{name:\"inlineCode\",components:components,parentName:\"p\"},\"kubectl create -f nginx-service.yaml\")),React.createElement(MDXTag,{name:\"p\",components:components},\"Now, if we run \",React.createElement(MDXTag,{name:\"inlineCode\",components:components,parentName:\"p\"},\"kubectl get services\"),\", we will now have two services.\"),React.createElement(MDXTag,{name:\"p\",components:components},\"If we run \",React.createElement(MDXTag,{name:\"inlineCode\",components:components,parentName:\"p\"},\"kubectl describe service nginx-service\"),\", we can see info about and that it is a ClusterIP and that the endpoints are assigned to the minions with Kubernetes managing this.\"),React.createElement(MDXTag,{name:\"p\",components:components},\"So how do we connect?\"),React.createElement(MDXTag,{name:\"p\",components:components},React.createElement(MDXTag,{name:\"inlineCode\",components:components,parentName:\"p\"},\"kubectl run busybox --generator=run-pod/v1 --image=busybox --restart=Never --tty -i\")),React.createElement(MDXTag,{name:\"p\",components:components},\"Once it is running, we should be able to do \",React.createElement(MDXTag,{name:\"inlineCode\",components:components,parentName:\"p\"},\"wget -q0- http://10.254.197.123:8080\")),React.createElement(MDXTag,{name:\"p\",components:components},\"Now this idea is referring to a cluster of this IP. So now we've tied everything together to have a clustered referred to with just one IP address. We no longer even have to know the other IPs.\"),React.createElement(MDXTag,{name:\"hr\",components:components}),React.createElement(MDXTag,{name:\"h2\",components:components,props:{\"id\":\"logs-scaling-and-recovery\"}},\"Logs, Scaling and Recovery\"),React.createElement(MDXTag,{name:\"h3\",components:components,props:{\"id\":\"-----creating-temporary-pods-at-the-command-line\"}},\"---- Creating Temporary Pods at the Command Line\"));}}]);return MDXContent;}(React.Component);export{MDXContent as default};MDXContent.__docgenInfo={\"description\":\"\",\"methods\":[],\"displayName\":\"MDXContent\"};",{"version":3,"sources":["/Users/okeeffe_d/Business/Documentation/manual/Kubernetes/Kubernetes-Clusters.md"],"names":["React","MDXTag","MDXContent","props","layout","components","Component"],"mappings":"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","sourcesContent":["\n  import React from 'react'\n  import { MDXTag } from '@mdx-js/tag'\n  \n\nexport default class MDXContent extends React.Component {\n  constructor(props) {\n    super(props)\n    this.layout = null\n  }\n  render() {\n    const { components, ...props } = this.props\n\n    return <MDXTag\n             name=\"wrapper\"\n             \n             components={components}><MDXTag name=\"h1\" components={components} props={{\"id\":\"running-container-clusters-with-kuberentes\"}}>{`Running Container Clusters with Kuberentes`}</MDXTag>\n{/* TOC */}\n<MDXTag name=\"ul\" components={components}>\n<MDXTag name=\"li\" components={components} parentName=\"ul\"><MDXTag name=\"a\" components={components} parentName=\"li\" props={{\"href\":\"#running-container-clusters-with-kuberentes\"}}>{`Running Container Clusters with Kuberentes`}</MDXTag><MDXTag name=\"ul\" components={components} parentName=\"li\">\n<MDXTag name=\"li\" components={components} parentName=\"ul\"><MDXTag name=\"a\" components={components} parentName=\"li\" props={{\"href\":\"#intro-to-kubernetes\"}}>{`Intro to Kubernetes`}</MDXTag><MDXTag name=\"ul\" components={components} parentName=\"li\">\n<MDXTag name=\"li\" components={components} parentName=\"ul\"><MDXTag name=\"a\" components={components} parentName=\"li\" props={{\"href\":\"#-----kubernetes-architecture\"}}>{`---- Kubernetes Architecture`}</MDXTag></MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ul\"><MDXTag name=\"a\" components={components} parentName=\"li\" props={{\"href\":\"#-----introduction-to-yaml\"}}>{`---- Introduction to YAML`}</MDXTag></MDXTag>\n</MDXTag></MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ul\"><MDXTag name=\"a\" components={components} parentName=\"li\" props={{\"href\":\"#kubernetes-setup-and-config\"}}>{`Kubernetes Setup and Config`}</MDXTag><MDXTag name=\"ul\" components={components} parentName=\"li\">\n<MDXTag name=\"li\" components={components} parentName=\"ul\"><MDXTag name=\"a\" components={components} parentName=\"li\" props={{\"href\":\"#-----multi-pod-container-replication-controller\"}}>{`---- Multi-Pod (Container) Replication Controller`}</MDXTag></MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ul\"><MDXTag name=\"a\" components={components} parentName=\"li\" props={{\"href\":\"#-----create-and-deploy-service-definitions\"}}>{`---- Create and Deploy Service Definitions`}</MDXTag></MDXTag>\n</MDXTag></MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ul\"><MDXTag name=\"a\" components={components} parentName=\"li\" props={{\"href\":\"#logs-scaling-and-recovery\"}}>{`Logs, Scaling and Recovery`}</MDXTag><MDXTag name=\"ul\" components={components} parentName=\"li\">\n<MDXTag name=\"li\" components={components} parentName=\"ul\"><MDXTag name=\"a\" components={components} parentName=\"li\" props={{\"href\":\"#-----creating-temporary-pods-at-the-command-line\"}}>{`---- Creating Temporary Pods at the Command Line`}</MDXTag></MDXTag>\n</MDXTag></MDXTag>\n</MDXTag></MDXTag>\n</MDXTag>\n{/* /TOC */}\n<MDXTag name=\"h2\" components={components} props={{\"id\":\"intro-to-kubernetes\"}}>{`Intro to Kubernetes`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`k8s is an open source container cluster manager.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Google donated it under the Apache Commons license.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`It's obejctive is to provide a platform for deploying, scaling and operations of application containers across a cluster of hosts.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Google uses it to run billions of containers a day on Google Cloud.`}</MDXTag>\n<MDXTag name=\"p\" components={components}><MDXTag name=\"strong\" components={components} parentName=\"p\">{`Components of Kubernetes`}</MDXTag></MDXTag>\n<MDXTag name=\"ul\" components={components}>\n<MDXTag name=\"li\" components={components} parentName=\"ul\">{`Nodes`}</MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ul\">{`Pods`}</MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ul\">{`Labels`}</MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ul\">{`Selectors`}</MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ul\">{`Controllers`}</MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ul\">{`Services`}</MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ul\">{`Control Page`}</MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ul\">{`API`}</MDXTag>\n</MDXTag>\n<MDXTag name=\"h3\" components={components} props={{\"id\":\"-----kubernetes-architecture\"}}>{`---- Kubernetes Architecture`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`We will end up with one `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`Master/Controller`}</MDXTag>{` which can have `}<MDXTag name=\"em\" components={components} parentName=\"p\">{`n`}</MDXTag>{` Minions, which can have `}<MDXTag name=\"em\" components={components} parentName=\"p\">{`n`}</MDXTag>{` pods which themselves can container `}<MDXTag name=\"em\" components={components} parentName=\"p\">{`n`}</MDXTag>{` containers.`}</MDXTag>\n<MDXTag name=\"p\" components={components}><MDXTag name=\"strong\" components={components} parentName=\"p\">{`Minions (Nodes)`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`These are the physical/virtual container clients. They host the various containers within the cluster.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Each of them run `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`ETCD`}</MDXTag>{` (a key pair management and communication service) - it's how we can keep everything in sync and the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`Kubernetes Proxy`}</MDXTag>{`.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Docker must be installed on each of these `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`minions`}</MDXTag>{` as well.`}</MDXTag>\n<MDXTag name=\"p\" components={components}><MDXTag name=\"strong\" components={components} parentName=\"p\">{`Pods`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`One or more containers. These containers are then guarenteed by the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`Master/Controller`}</MDXTag>{` to be located on the same host machine in order to facilitate sharing of resources.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Pods are assigned unique IPs within each cluster.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Pods can container definitions of disk volumes or share, and then provide access from those to all the members (containers) within the pod.`}</MDXTag>\n<MDXTag name=\"p\" components={components}><MDXTag name=\"strong\" components={components} parentName=\"p\">{`Labels`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`Clients can attach \"key-value pairs\" to any object in the system (like Pods or Minions). The become the labels that identify them in the config and management of them.`}</MDXTag>\n<MDXTag name=\"p\" components={components}><MDXTag name=\"strong\" components={components} parentName=\"p\">{`Selectors`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`Label Selectors represent queries that are made against those labels. The resolve to the corresponding matching objects.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`These two items are the primary way that grouping is done in Kubernetes and determine which components that a given operation applies to when indicated.`}</MDXTag>\n<MDXTag name=\"p\" components={components}><MDXTag name=\"strong\" components={components} parentName=\"p\">{`Controllers`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`These are used in the management of your cluster. Controllers are the mechanism by which your desired configuration state is enforced.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Controllers manage a set of pods and - depending on the desired configuration state - may engage other controllers to handle replication and scaling (Replication Controller) of X number of containers and pods across the cluster. it is also responsible for replacing any container in a pod that fails (based on the desired state of the cluster).`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Other controllers that can be engaged include a DaemonSet Controller (enforces a 1 to 1 ratio of pods to minions) and a Job Controller (that runs pods to \"completion\" such as in batch jobs).`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Each set of pods any controller manages is determined by the label selectors that are part of its definition.`}</MDXTag>\n<MDXTag name=\"p\" components={components}><MDXTag name=\"strong\" components={components} parentName=\"p\">{`Services`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`Services allow pods to `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`work together`}</MDXTag>{` eg multi-tiered application eg. web layer, db layer etc. are defined by the label selector.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Kubernetes can then provide service discovery and handle routing with the static IP for each pod as well as load balancing (round robin based) connections to that service among the pods that match the label selector indicated.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`By default, although a service is only exposed inside a cluster, it can also be exposed outside a cluster as needed.`}</MDXTag>\n<MDXTag name=\"h3\" components={components} props={{\"id\":\"-----introduction-to-yaml\"}}>{`---- Introduction to YAML`}</MDXTag>\n<MDXTag name=\"p\" components={components}><MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`Yet Another Markup Language`}</MDXTag>{`, although it moved to `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`YAML Ain't Markup Language`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`It's a data serialisation format. It's designed to be easy to map to high level languages.`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{}}>{`--- # Our Favourite Movies of All Time\n- The Terminator\n- Star Wars\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`It is highly dependent on the dashes and indentations.`}</MDXTag>\n<MDXTag name=\"hr\" components={components}></MDXTag>\n<MDXTag name=\"h2\" components={components} props={{\"id\":\"kubernetes-setup-and-config\"}}>{`Kubernetes Setup and Config`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Ensure that for your nodes etc and the control-master that you apt-get/yum install `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`ntp`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`We use `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`ntp`}</MDXTag>{` for accurate reporting. Ensure for each node you use `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`systemctl enable ntpd && sysmctl start ntpd`}</MDXTag>{`.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`To ensure that they can all communicate, edit the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`/etc/hosts`}</MDXTag>{` file and paste in the IP addresses and names of the minions. That hosts will allow you to ping that minion name.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`In the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`master/controller`}</MDXTag>{`, `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`vim /etc/yum.repos.d/virt7-docker-common-release.repo`}</MDXTag></MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{}}>{`[virt7-docker-common-release]\nname=virt7-docker-common-release\nbaseurl=http://cbs.centos.org/repos/virt7-docker-common-release/x86_64/0s/\ngpgcheck=0\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`Then hit `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`yum update`}</MDXTag>{`.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Ensure `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`systemctl status [iptables|firewalld]`}</MDXTag>{` are not running.`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{}}>{`Now to ensure that we can share and communicate values, we will install \\`etcd\\` and \\`kubernetes\\`.\n\n\\`yum install -y --enablerepo=virt7-docker-common-release kubernetes docker\\`\n\n### ---- Install and Configure the Master Controller\n\nFor the master, we want to edit the Kubernetes config file.\n\n__Master Kube Config__\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`cd /etc/kubernetes\nvim config`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{}}>{`In the file, the \\`KUBE_LOTOSTDERR\\` we want one, \\`KUBE_LOG_LEBEL\\` can be set as 0 for debug, \\`KUBE_ALLOW_PRIV\\` can be left as false - it is a way to allow any docker container to run in our kube cluster, but we can learn about this later. \\`KUBE_MASTER\\` we want to change to ensure that it binds to an interface that we can communicate with. It will default at localhost, so for this example we would do something like \\`--master=http://centos-master:8080\\` where centos-master is what we set up in \\`/etc/hosts\\`\n\nWe will then add \\`KUBE_ETCD_SERVERS=\"--etcd-servers=http://centos-master:2379\"\\`\n\n__Setting up etcd__\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`cd /etc/etcd\nvim etcd.conf`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{}}>{`In the file, we want to change \\`ETCD_LISTEN_CLIENT_URLS=\"http://0.0.0.0:2379\"\\` and the same value in the cluster section for \\`ETCD_ADVERTISE_CLIENT_URLS\\`\n\n__Editing the Kubernetes APIServer___\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`cd /etc/kubernetes\nvim apiserver`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{}}>{`Inside, we need to change to the following for the following fields:\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`KUBE_API_ADDRESS=\"--address=0.0.0.0\"\nKUBE_API_PORT=\"--port=8080\"\nKUBELET_PORT=\"--kubelet-port=10250\"`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`// for the basic config, we can comment out the KUBE_ADMISSION_CONTROL`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{}}>{`__systemctl enable___\n\nFinally, we want to enable the following with the command:\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`systemctl enable etcd kube-apiserver kube-controller-manager kube-scheduler\nsystemctl start etcd kube-apiserver kube-controller-manager kube-scheduler\nsystemctl status etcd kube-apiserver kube-controller-manager kube-scheduler | grep\"(running)\" | wc -l`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{}}>{`### ---- Install and Configure the Minions\n\nAt this stage, we should be able to see the master controller from the minions.\n\n__Minion Kube Config__\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`KUBE_MASTER=\"--master=`}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"http://centos-master:8080\"}}>{`http://centos-master:8080`}</MDXTag>{`\"`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`// add the following\nKUBE_ETCD_SERVERS=\"--etcd-server=`}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"http://centos-master:2379\"}}>{`http://centos-master:2379`}</MDXTag>{`\"`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{}}>{`__Kublet Config__\n\nEdit the \\`/etc/kubernetes/kublet\\` file.\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`KUBELET_ADDRESS=\"--address=0.0.0.0\"`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`KUBELET_PORT=\"--port=102050\"`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`KUBELET_HOSTNAME=\"--hostname-override=centos-minion1\"`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`KUBELET_API_SERVER=\"--api-servers=`}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"http://centos-master:8080\"}}>{`http://centos-master:8080`}</MDXTag>{`\"`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`// comment out pod_infra_container`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{}}>{`Afterwards, ensure you run the following:\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`systemctl enable kube-proxy kubelet docker\nsystemctl start kube-proxy kubelet docker\nsystemctl status kube-proxy kubelet docker | grep \"(running)\" | wc-l`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{}}>{`### ---- Exploring the Environment\n\nWe will use \\`kubectl\\` from the command line to control the cluster manager.\n\nMain functions:\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`// list of registered nodes for the cluster\nkubectl get nodes`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`// to get help on it\nman kubectl-get`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`// how to get the ip addresses/info\nkubetrl describe nodes`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`// getting the json info\nkubectl get nodes -o jsonpath='{.items`}{`[*]`}{`.status.addresses`}{`[?(@.type==\"ExternalIP\")]`}{`.address}'`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{}}>{`***\n\n## Pods, Tags and Services\n\n### ---- Create and Deploy Pod Definitions\n\nLet's start running containers in pods in our cluster.\n\nFor configuration, you can use both \\`json\\` or \\`yaml\\` file format. From a definitions standpoint, it may be better for the current input configuration.\n\n\\`Desired State\\` for our system is a key concept. It's the only responsibility of Kubernetes to match the defined \\`desired state\\`.\n\nOn the master node, \\`cd Builds\\` and inside that directory \\`vim nginx.yaml\\`\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`apiVersion: v1\nkind: Pod\nmetadata:\nname: nginx\nspec:\ncontainers: - name: nginx\nimage: nginx:1.7.9 # this is not the latest - used for a reason\nports: - containerPort: 80`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{}}>{`If we now use \\`kubectl get pods\\`, we should get no pods that are running.\n\nThat will be because there are no containers running on any minions.\n\nRun \\`kubectl create -f ./nginx.yaml\\` and we'll get a notification.\n\n\\`kubectl get pods\\` should now return results and the minion should now have a container running!\n\n__Describing a pod__\n\n\\`kubectl describe pod nginx\\`\n\nThis will tell us a number of things including IDs assigned to the minion, labels if they are assigned, IP etc and info on the containers.\n\nThe events will also describe how the container has gone.\n\n__Accessing the pod from master___\n\nCan we ping that address? No. The reason is that we have no extenal route to that pod. What we can do is run a busy-box image. This will allow us to connect to or test our container.\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`// -t is not --tty for kubectl\nkubectl run busybox --image=busybox --restart=Never --tty -i --generator=run-pod/v1`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`// this will spin up the pod called busybox\n// we will then be in the command line for that pod\n// If we have this pod running within the minion\n// we will then have access to other pods on the\n// same environment\nwget -q0- `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"http://172.1.0.2\"}}>{`http://172.1.0.2`}</MDXTag></MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{}}>{`To clean up the system, we can use \\`kubectl delete pod podName\\`\n\nFrom the master, we can then see that the pod is no longer running.\n\nWe can also forward temporarily our ports to a remote copy. We can do this with port forward.\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`kubectl get pods\nkubectl create -f nginx.yaml\nkubectl get pods # will show the pods`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`// to forward ports\n// & means to run in the background\n// this will return a port above 34000 - otherwise we can specify\nkubectl port-forward nginx :80 &\n// from still in the master\nwget -q0- `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"http://localhost:34853\"}}>{`http://localhost:34853`}</MDXTag></MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{}}>{`### ---- Tags, Labels and Selectors\n\nCreate \\`nginx-pod-label.yaml\\`\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`apiVersion: v1\nkind: Pod\nmetadata:\nname: nginx\nlabels:\napp: nginx\nspec:\ncontainers: - name: nginx\nimage: nginx:1.7.9 # this is not the latest - used for a reason\nports: - containerPort: 80`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{}}>{``}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`kubectl create -f nginx-pod-label.yaml\nkubectl get pods # will be running\nkubectl get -l app=nginx`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{}}>{`If we copy that .yaml file and rename \\`nginx\\` to \\`nginx2\\`, we can get info just by searching for that name.\n\nIf we also do \\`kubectl decribe pod -l app=nginx2\\`, we'd just get the info for that name.\n\n### ---- Deployment State\n\nCreate \\`nginx-deployment-prod.yaml\\`\n\nThis will make a number of changes. This will go from a simple pod definition to a deployment production set.\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`apiVersion: extensions/v1beta1 # this should now be in v1.3\nkind: Deployment\nmetadata:\nname: nginx-deployment-prod\nspec:\nreplicas: 1\ntemplate: # this will be for the pod replicas\nmetadata:\nlabels:\napp: nginx-deployment-prod\nspec:\ncontainers: - name: nginx\nimage: nginx:1.7.9 # this is not the latest - used for a reason\nports: - containerPort: 80`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{}}>{``}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`kubectl create -f -nginx-deployent-prod.yaml\nkubectl get pods\n// this will now return the name + the id concatentated to the end!\nkubectl get deployments\n// this will now give us the nginx-deployment-prod with details`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`This seems like we're making it more complex than we need to be... but...`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Create `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`nginx-deployment-dev.yaml`}</MDXTag>{` and just change everything to dev.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Again, create the .yaml kubectl. It will now show two deployments.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`If we create `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`nginx-deployment-dev-update.yaml`}</MDXTag>{` and just change a few things. If we run `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`kubectl apply -f nginx-deployment-dev-update.yaml`}</MDXTag>{` and it will update by apply the contents of that to the name deployment cluster.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`If we run `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`kubectl describe deployments ...`}</MDXTag>{`, we can get the details with things like the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`StrategyType`}</MDXTag>{` etc.`}</MDXTag>\n<MDXTag name=\"h3\" components={components} props={{\"id\":\"-----multi-pod-container-replication-controller\"}}>{`---- Multi-Pod (Container) Replication Controller`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Until now, we have been creating one or more pods either directly or using a file. However, there has only been one container in each of the pods that we've been working with.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`We can use the replication controller to do more than one container in a pod. It will allow us to deploy 1 to n pods of a particular container.`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{}}>{`kubectl get pods # we will initially have nothing\n\nvim nginx-multi-label.yaml\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}><MDXTag name=\"strong\" components={components} parentName=\"p\">{`nginx-multi-label.yaml`}</MDXTag></MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{}}>{`apiVersion: v1\nkind: ReplicationController\nmetadata:\n    name: nginx-www\nspec:\n    replicas: 3\n    select:\n        app: nginx\n    template:\n        metadata:\n            name: nginx\n            labels:\n                app: nginx\n            spec:\n                containers:\n                    - name: nginx\n                        image: nginx\n                        ports:\n                        - containerPort: 80\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`Ensure that if you're going to do this, start the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`kubelet`}</MDXTag>{` and `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`kube-proxy`}</MDXTag>{` on the other nodes.`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{}}>{`kubectl get nodes\n# if everything is on, all three minions should report that they are ready\nkubectl create -f nginx-multi-label.yaml\n# replicationcontroller \"nginx-www\" created\nkubectl get pods\n# will show the pods\nkubectrl describe replicationcontroller\n# tells us 3 running and 3 pods\nkubectl describe pods\n# it will show all of our pods being happy!\nkubectl get services\n# gives us just the one service\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`If we delete a pod, we will still end up having a service! When we create a definition, that defines the expected state of the entire environment!`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`If there is an app error etc. the service will ensure that it gets back to the expected state.`}</MDXTag>\n<MDXTag name=\"h3\" components={components} props={{\"id\":\"-----create-and-deploy-service-definitions\"}}>{`---- Create and Deploy Service Definitions`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Starting to put things together.`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{}}>{`kubectl get replicationcontrollers\nkubectl get pods\nkubectl get nodes\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`Time to use the multicontainer configuration.`}</MDXTag>\n<MDXTag name=\"p\" components={components}><MDXTag name=\"strong\" components={components} parentName=\"p\">{`nginx-multi-label.yaml`}</MDXTag></MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{}}>{`apiVersion: v1\nkind: ReplicationController\nmetadata:\n    name: nginx-www\nspec:\n    replicas: 3\n    select:\n        app: nginx\n    template:\n        metadata:\n            name: nginx\n            labels:\n                app: nginx\n            spec:\n                containers:\n                    - name: nginx\n                        image: nginx\n                        ports:\n                        - containerPort: 80\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}><MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`kubectl create -f nginx-multi-label.yaml`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}><MDXTag name=\"strong\" components={components} parentName=\"p\">{`Defining an nginx service`}</MDXTag></MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{}}>{`apiVersion: v1\nkind: Service\nmetadata:\n    data: nginx-service\nspec:\n    ports:\n        port: 8080\n        targetPort: 80\n        protocol: TCP\n    selector:\n        app: nginx\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}><MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`kubectl create -f nginx-service.yaml`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`Now, if we run `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`kubectl get services`}</MDXTag>{`, we will now have two services.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`If we run `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`kubectl describe service nginx-service`}</MDXTag>{`, we can see info about and that it is a ClusterIP and that the endpoints are assigned to the minions with Kubernetes managing this.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`So how do we connect?`}</MDXTag>\n<MDXTag name=\"p\" components={components}><MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`kubectl run busybox --generator=run-pod/v1 --image=busybox --restart=Never --tty -i`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`Once it is running, we should be able to do `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`wget -q0- http://10.254.197.123:8080`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`Now this idea is referring to a cluster of this IP. So now we've tied everything together to have a clustered referred to with just one IP address. We no longer even have to know the other IPs.`}</MDXTag>\n<MDXTag name=\"hr\" components={components}></MDXTag>\n<MDXTag name=\"h2\" components={components} props={{\"id\":\"logs-scaling-and-recovery\"}}>{`Logs, Scaling and Recovery`}</MDXTag>\n<MDXTag name=\"h3\" components={components} props={{\"id\":\"-----creating-temporary-pods-at-the-command-line\"}}>{`---- Creating Temporary Pods at the Command Line`}</MDXTag>\n           </MDXTag>\n  }\n}\n  "]}]}