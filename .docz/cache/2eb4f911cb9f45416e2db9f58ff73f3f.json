{"remainingRequest":"/Users/dennis.okeeffe/Project-Imposter/developer-notes/node_modules/docz-core/node_modules/babel-loader/lib/index.js??ref--6-1!/Users/dennis.okeeffe/Project-Imposter/developer-notes/node_modules/@mdx-js/loader/index.js??ref--6-2!/Users/dennis.okeeffe/Project-Imposter/developer-notes/node_modules/source-map-loader/index.js!/Users/dennis.okeeffe/Project-Imposter/developer-notes/manual/React-Notes/TH-React-Basics.md","dependencies":[{"path":"/Users/dennis.okeeffe/Project-Imposter/developer-notes/manual/React-Notes/TH-React-Basics.md","mtime":1562563032084},{"path":"/Users/dennis.okeeffe/Project-Imposter/developer-notes/node_modules/cache-loader/dist/cjs.js","mtime":1581496618588},{"path":"/Users/dennis.okeeffe/Project-Imposter/developer-notes/node_modules/docz-core/node_modules/babel-loader/lib/index.js","mtime":1578565694890},{"path":"/Users/dennis.okeeffe/Project-Imposter/developer-notes/node_modules/@mdx-js/loader/index.js","mtime":1581496618277},{"path":"/Users/dennis.okeeffe/Project-Imposter/developer-notes/node_modules/source-map-loader/index.js","mtime":1580255490569}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyBmcm9tICIvVXNlcnMvZGVubmlzLm9rZWVmZmUvUHJvamVjdC1JbXBvc3Rlci9kZXZlbG9wZXItbm90ZXMvbm9kZV9tb2R1bGVzL2JhYmVsLXByZXNldC1yZWFjdC1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIjsKdmFyIF9qc3hGaWxlTmFtZSA9ICIvVXNlcnMvZGVubmlzLm9rZWVmZmUvUHJvamVjdC1JbXBvc3Rlci9kZXZlbG9wZXItbm90ZXMvbWFudWFsL1JlYWN0LU5vdGVzL1RILVJlYWN0LUJhc2ljcy5tZCI7CgooZnVuY3Rpb24gKCkgewogIHZhciBlbnRlck1vZHVsZSA9ICh0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwgOiByZXF1aXJlKCdyZWFjdC1ob3QtbG9hZGVyJykpLmVudGVyTW9kdWxlOwogIGVudGVyTW9kdWxlICYmIGVudGVyTW9kdWxlKG1vZHVsZSk7Cn0pKCk7Cgp2YXIgX19zaWduYXR1cmVfXyA9IHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbFsiZGVmYXVsdCJdLnNpZ25hdHVyZSA6IGZ1bmN0aW9uIChhKSB7CiAgcmV0dXJuIGE7Cn07CgovKiBAanN4IG1keCAqLwppbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnOwppbXBvcnQgeyBtZHggfSBmcm9tICdAbWR4LWpzL3JlYWN0JzsKLyogQGpzeCBtZHggKi8KCnZhciBtYWtlU2hvcnRjb2RlID0gZnVuY3Rpb24gbWFrZVNob3J0Y29kZShuYW1lKSB7CiAgcmV0dXJuIGZ1bmN0aW9uIE1EWERlZmF1bHRTaG9ydGNvZGUocHJvcHMpIHsKICAgIGNvbnNvbGUud2FybigiQ29tcG9uZW50ICIgKyBuYW1lICsgIiB3YXMgbm90IGltcG9ydGVkLCBleHBvcnRlZCwgb3IgcHJvdmlkZWQgYnkgTURYUHJvdmlkZXIgYXMgZ2xvYmFsIHNjb3BlIik7CiAgICByZXR1cm4gbWR4KCJkaXYiLCBPYmplY3QuYXNzaWduKHt9LCBwcm9wcywgewogICAgICBfX3NvdXJjZTogewogICAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgICAgbGluZU51bWJlcjogOQogICAgICB9LAogICAgICBfX3NlbGY6IHRoaXMKICAgIH0pKTsKICB9Owp9OwoKdmFyIGxheW91dFByb3BzID0ge307CnZhciBNRFhMYXlvdXQgPSAid3JhcHBlciI7CmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIE1EWENvbnRlbnQoX3JlZikgewogIHZhciBjb21wb25lbnRzID0gX3JlZi5jb21wb25lbnRzLAogICAgICBwcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcmVmLCBbImNvbXBvbmVudHMiXSk7CgogIHJldHVybiBtZHgoTURYTGF5b3V0LCBPYmplY3QuYXNzaWduKHt9LCBsYXlvdXRQcm9wcywgcHJvcHMsIHsKICAgIGNvbXBvbmVudHM6IGNvbXBvbmVudHMsCiAgICBtZHhUeXBlOiAiTURYTGF5b3V0IiwKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDIwCiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSksIG1keCgiaDEiLCBPYmplY3QuYXNzaWduKHsKICAgICJpZCI6ICJ0aC1yZWFjdC1iYXNpY3Mtbm90ZXMiCiAgfSwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMjEKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9KSwgIlRIIFJlYWN0IEJhc2ljcyBOb3RlcyIpLCBtZHgoImgyIiwgT2JqZWN0LmFzc2lnbih7CiAgICAiaWQiOiAidGhyZWFjdC0xLWZpcnN0LXN0ZXBzLWluLXJlYWN0IgogIH0sIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDI0CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSksICJUSFJFQUNULTE6IEZpcnN0IFN0ZXBzIGluIFJlYWN0IiksIG1keCgiaDQiLCBPYmplY3QuYXNzaWduKHsKICAgICJpZCI6ICJ0aHJlYWN0LTItd2h5LXJlYWN0IgogIH0sIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDI3CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSksICJUSFJFQUNULTI6IFdoeSBSZWFjdCIpLCBtZHgoInAiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAzMAogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJSZWFjdCBpcyBhIGxpYnJhcnkgZm9yIGNyZWF0aW5nIFVJcy4iKSwgbWR4KCJwIiwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMzEKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiVHdvIGh1Z2UgYmVuZWZpdHM6IiksIG1keCgib2wiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAzMgogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sIG1keCgibGkiLCB7CiAgICBwYXJlbnROYW1lOiAib2wiLAogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMzMKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiSXQncyBkZWNsYXJhdGl2ZSIpLCBtZHgoImxpIiwgewogICAgcGFyZW50TmFtZTogIm9sIiwKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDM0CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgIkl0J3MgY29tcG9uZW50IGJhc2VkIikpLCBtZHgoInAiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAzNgogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sIG1keCgic3Ryb25nIiwgewogICAgcGFyZW50TmFtZTogInAiLAogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMzYKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiQ29tcG9uZW50cyIpKSwgbWR4KCJwIiwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMzcKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiVUkgQ29tcG9zZWQgb2YgZGl2cywgc3BhbnMsIGlucHV0cyBhbmQgb3RoZXJzLiIpLCBtZHgoInAiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAzOAogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJSZWFjdCBhbGxvd3MgdXMgdG8gYnVpbGQgb3VyIG93biBjb21wb25lbnRzIGFuZCB1c2UgdGhlbSBhcyBidWlsdCBpbiBIVE1MIGVsZW1lbnRzLiIpLCBtZHgoInAiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAzOQogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJUZXN0ZWQgb25jZSwgcmV1c2VkIGV2ZXJ5d2hlcmUuIiksIG1keCgicCIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDQwCiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgbWR4KCJzdHJvbmciLCB7CiAgICBwYXJlbnROYW1lOiAicCIsCiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA0MAogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJEZWNsYXJhdGl2ZSIpKSwgbWR4KCJwIiwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogNDEKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiVGhpcyBtZWFucyBvdXIgcHJvZ3JhbSBkZXNjcmliZXMgd2hhdCB3ZSBhcmUgZG9pbmcuIiksIG1keCgicCIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDQyCiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgIkpTIGlzIG5vcm1hbGx5IGltcGVyYXRpdmUsIHdoZXJlYXMgc29tZXRoaW5nIGxpa2UgSFRNTCBpcyBkZWNsYXJhdGl2ZS4iKSwgbWR4KCJwIiwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogNDMKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiTm9ybWFsbHksIHdlIHdvdWxkIGhhdmUgYSBkYXRhIG1vZGVsIHdpdGggSlMgYW5kIHRoZW4gdGhlIHZpZXcgbWFkZSB1cCB3aXRoIEhUTUwuIFRoaXMgaXMgaGFyZCB0byBrZWVwIGluIHN5bmMuIiksIG1keCgicCIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDQ0CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgIkV4YW1wbGUsIGlmIHRoZSBzZWNvbmQgaXRlbSBpbiB0aGUgZGF0YSBtb2RlbCBpcyByZW1vdmVkLCB0aGVuIHdlIHdvdWxkIGFsc28gbmVlZCB0byByZW1vdmUgYSBzZWNvbmQgbGlzdCBpdGVtIGluIEhUTUwuIiksIG1keCgicCIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDQ1CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgIlJlYWN0IG1ha2VzIGFuIGVmZmljaWVudCBhbmQgZmFzdCB3YXkgdG8gXCJyZW1vdmUgYSBET00gYW5kIHJlbG9hZFwiLiBUaGlzIGlzIGRvbmUgYnkgdXNpbmcgYSAiLCBtZHgoImVtIiwgewogICAgcGFyZW50TmFtZTogInAiLAogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogNDUKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiVmlydHVhbCBET00iKSksIG1keCgiaDQiLCBPYmplY3QuYXNzaWduKHsKICAgICJpZCI6ICJ0aHJlYWN0LTMtc3RhdGUtYW5kLXRoZS12aXJ0dWFsLWRvbSIKICB9LCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA0NgogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0pLCAiVEhSRUFDVC0zOiBTdGF0ZSBhbmQgdGhlIFZpcnR1YWwgRE9NIiksIG1keCgicCIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDQ5CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgIldlIGRlc2NyaWJlIHRoZSBhcHBsaWNhdGlvbiBlbnRpcmVseSBpbiB0aGUgLmpzIGZpbGVzLiIpLCBtZHgoInAiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA1MAogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJUaGUgSlMgcmVwcmVzZW50YXRpb24gb2YgdGhlIERPTSBpcyByZWZlcnJlZCB0byBhcyB0aGUgVmlydHVhbCBET00uIFRoaXMgaXMgY2hlYXAgYW5kIGZhc3QgdG8gdXNlLiIpLCBtZHgoInAiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA1MQogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJJbnRlcmFjdGluZyB3aXRoIHRoZSBET00gaXMgYSBsb3Qgc2xvd2VyIHRoYW4gbWFuaXB1bGF0aW5nIEphdmFTY3JpcHQuIiksIG1keCgicCIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDUyCiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgIldoZW4gd2Ugd3JpdGUgb3VyIFJlYWN0IG1hcmt1cCBjb2RlLCBSZWFjdCB0YWtlcyBvbiB0aGUgcmVzcG9uc2liaWxpdHkgb2YgcmVuZGVyaW5nIHRoZSByZWFsIERPTSBlbGVtZW50IG9uIHRoZSBWaXJ0dWFsIERPTSB3ZSBkZWZpbmUuIiksIG1keCgicCIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDUzCiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgIkl0J3Mgc21hcnQgdG8gcmVtZW1iZXIgdGhlIHByZXZpb3VzIGFuZCBjdXJyZW50IERPTSBhbmQgbWFrZXMgdGhlIG1pbmltdW0gY2hhbmdlcyBuZWVkZWQuIiksIG1keCgiaDQiLCBPYmplY3QuYXNzaWduKHsKICAgICJpZCI6ICJ0aHJlYWN0LTMtdW5kZXJzdGFuZGluZy1qc3giCiAgfSwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogNTQKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9KSwgIlRIUkVBQ1QtMzogVW5kZXJzdGFuZGluZyBKU1giKSwgbWR4KCJwIiwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogNTcKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiRE9NIEVsZW1lbnRzIGhhdmU6IiksIG1keCgib2wiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA1OAogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sIG1keCgibGkiLCB7CiAgICBwYXJlbnROYW1lOiAib2wiLAogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogNTkKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiVGhlIG5hbWUgZWcuIGRpdiwgc3BhbiIpLCBtZHgoImxpIiwgewogICAgcGFyZW50TmFtZTogIm9sIiwKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDYwCiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgIkEgbGlzdCBvZiBhdHRyaWJ0dWVzIC0+IGtleSwgdmFsdWUgcGFpcnMgZWcgaHJlZj1cInZhbHVlXCIiKSwgbWR4KCJsaSIsIHsKICAgIHBhcmVudE5hbWU6ICJvbCIsCiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA2MQogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJJdCBtYXkgb3IgbWF5IG5vdCBoYXZlIGNoaWxkcmVuIikpLCBtZHgoInAiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA2MwogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJUbyBkZXNjcmliZSBhbiAiLCBtZHgoImlubGluZUNvZGUiLCB7CiAgICBwYXJlbnROYW1lOiAicCIsCiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA2MwogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICI8YT4iKSwgIiB0YWcsIHdlIHVzZSBhbGwgdGhyZWU6IiksIG1keCgicHJlIiwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogNjQKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCBtZHgoImNvZGUiLCBPYmplY3QuYXNzaWduKHsKICAgIHBhcmVudE5hbWU6ICJwcmUiCiAgfSwgewogICAgImNsYXNzTmFtZSI6ICJsYW5ndWFnZS1qYXZhc2NyaXB0IgogIH0sIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDY0CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSksICJSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAnYScsXG4gIHtcbiAgICBocmVmOiAnaHR0cHM6Ly9hYmMuY29tJ1xuICB9LFxuICAnYWJjJ1xuKTtcbiIpKSwgbWR4KCJwIiwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogNzQKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiSG93ZXZlciwgaXQgaXMgbm90IGNvbnZlbmllbnQgdG8gZG8gdGhpcyBjYWxsLiBUaGlzIGlzIHdoZXJlIEpTWCBjb21lcyBpbi4iKSwgbWR4KCJwIiwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogNzUKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiU28gdGhlIGFib3ZlIGlzIGVxdWl2YWxlbnQgdG8uLi4iKSwgbWR4KCJwcmUiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA3NgogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sIG1keCgiY29kZSIsIE9iamVjdC5hc3NpZ24oewogICAgcGFyZW50TmFtZTogInByZSIKICB9LCB7CiAgICAiY2xhc3NOYW1lIjogImxhbmd1YWdlLWphdmFzY3JpcHQiCiAgfSwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogNzYKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9KSwgImNvbnN0IG15TGluayA9IDxhIGhyZWY9XCJodHRwczovL2FiYy5jb21cIj5hYmM8L2E+O1xuIikpLCBtZHgoInAiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA4MAogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJUaGUgY29tcGlsZXIgdGhhdCB3ZSBjaGFuZ2UgSlNYIHRvIHdoYXQgd2UgbmVlZCBpcyBCYWJlbC4iKSwgbWR4KCJoNCIsIE9iamVjdC5hc3NpZ24oewogICAgImlkIjogInRocmVhY3QtNC1maXJzdC1hcHBsaWNhdGlvbiIKICB9LCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA4MQogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0pLCAiVEhSRUFDVC00OiBGaXJzdCBBcHBsaWNhdGlvbiIpLCBtZHgoInAiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA4NAogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJhcHAuY3NzXG5hcHAuanN4XG5pbmRleC5odG1sIiksIG1keCgicCIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDg3CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgbWR4KCJzdHJvbmciLCB7CiAgICBwYXJlbnROYW1lOiAicCIsCiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA4NwogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJpbmRleC5odG1sIikpLCBtZHgoInByZSIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDg4CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgbWR4KCJjb2RlIiwgT2JqZWN0LmFzc2lnbih7CiAgICBwYXJlbnROYW1lOiAicHJlIgogIH0sIHsKICAgICJjbGFzc05hbWUiOiAibGFuZ3VhZ2UtaHRtbCIKICB9LCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA4OAogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0pLCAiPCFET0NUWVBFIGh0bWw+XG48aHRtbD5cbiAgPGhlYWQ+XG4gICAgPG1ldGEgY2hhcnNldD1cInV0Zi04XCIgLz5cbiAgICA8dGl0bGU+U2NvcmVib2FyZDwvdGl0bGU+XG4gICAgPGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIGhyZWY9XCIuL2FwcC5jc3NcIiAvPlxuICA8L2hlYWQ+XG5cbiAgPGJvZHk+XG4gICAgPGRpdiBpZD1cImNvbnRhaW5lclwiPkxvYWRpbmcuLi48L2Rpdj5cbiAgICA8c2NyaXB0IHNyYz1cIi4vdmVuZG9yL3JlYWN0LmpzXCI+PC9zY3JpcHQ+XG4gICAgPHNjcmlwdCBzcmM9XCIuL3ZlbmRvci9yZWFjdC1kb20uanNcIj48L3NjcmlwdD5cbiAgICA8c2NyaXB0IHNyYz1cIi4vdmVuZG9yL2JhYmVsLWJyb3dzZXIubWluLmpzXCI+PC9zY3JpcHQ+XG4gICAgPHNjcmlwdCB0eXBlPVwidGV4dC9iYWJlbFwiIHNyYz1cIi4vYXBwLmpzeFwiPjwvc2NyaXB0PlxuICA8L2JvZHk+XG48L2h0bWw+XG4iKSksIG1keCgicCIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDEwNwogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sIG1keCgic3Ryb25nIiwgewogICAgcGFyZW50TmFtZTogInAiLAogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMTA3CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgImFwcC5qc3giKSksIG1keCgicHJlIiwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMTA4CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgbWR4KCJjb2RlIiwgT2JqZWN0LmFzc2lnbih7CiAgICBwYXJlbnROYW1lOiAicHJlIgogIH0sIHsKICAgICJjbGFzc05hbWUiOiAibGFuZ3VhZ2UtamF2YXNjcmlwdCIKICB9LCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAxMDgKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9KSwgImZ1bmN0aW9uIEFwcGxpY2F0aW9uKCkge1xuICByZXR1cm4gKFxuICAgIDxkaXY+XG4gICAgICA8aDE+SGVsbG8gZnJvbSBSZWFjdDwvaDE+XG4gICAgICA8cD5JIHdhcyByZW5kZXJlZCBmcm9tIHRoZSBBcHBsaWNhdGlvbiBjb21wb25lbnQ8L3A+XG4gICAgPC9kaXY+XG4gICk7XG59XG5cblJlYWN0RE9NLnJlbmRlcig8aDE+SGVsbG88L2gxPiwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRhaW5lcicpKTtcbiIpKSwgbWR4KCJwIiwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMTIxCiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgIlJlYWxseSwgd2Ugd2FudCB0byBjcmVhdGUgYSBjb21wb25lbnQgdG8gcmVuZGVyIGluc3RlYWQgb2YgaW5kaXZpZHVhbCBjb21wb25lbnRzLiIpLCBtZHgoInAiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAxMjIKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiQ29tcG9uZW50cyBuZWVkIHRvIHN0YXJ0IHdpdGggYSBjYXBpdGFsIGFzIGNvbnZlbnRpb24uIiksIG1keCgicCIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDEyMwogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJBIHJlYWN0IGNvbXBvbmVudCBtdXN0IG9ubHkgcmV0dXJuIG9uZSBET00gZWxlbWVudC4iKSwgbWR4KCJwIiwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMTI0CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgbWR4KCJzdHJvbmciLCB7CiAgICBwYXJlbnROYW1lOiAicCIsCiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAxMjQKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiYXBwLmpzeCIpKSwgbWR4KCJwcmUiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAxMjUKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCBtZHgoImNvZGUiLCBPYmplY3QuYXNzaWduKHsKICAgIHBhcmVudE5hbWU6ICJwcmUiCiAgfSwgewogICAgImNsYXNzTmFtZSI6ICJsYW5ndWFnZS1qYXZhc2NyaXB0IgogIH0sIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDEyNQogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0pLCAiZnVuY3Rpb24gQXBwbGljYXRpb24oKSB7XG4gIHJldHVybiAoXG4gICAgPGRpdj5cbiAgICAgIDxoMT5IZWxsbyBmcm9tIFJlYWN0PC9oMT5cbiAgICAgIDxwPkkgd2FzIHJlbmRlcmVkIGZyb20gdGhlIEFwcGxpY2F0aW9uIGNvbXBvbmVudDwvcD5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuUmVhY3RET00ucmVuZGVyKDxBcHBsaWNhdGlvbiAvPiwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRhaW5lcicpKTtcbiIpKSwgbWR4KCJoNCIsIE9iamVjdC5hc3NpZ24oewogICAgImlkIjogInRocmVhY3QtNS1yZWFjdC1kZXZlbG9wZXItdG9vbHMiCiAgfSwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMTM4CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSksICJUSFJFQUNULTU6IFJlYWN0IERldmVsb3BlciBUb29scyIpLCBtZHgoInAiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAxNDEKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiSXQgaXMgYSBsb3QgZWFzaWVyIHRvIGRlYnVnIHdpdGggdGhlIFJlYWN0IERldlRvb2xzIGV4dGVuc2lvbi4iKSwgbWR4KCJwIiwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMTQyCiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgIkRvd25sb2FkIFJlYWN0IERldmVsb3BlciBUb29scy4gQXZhaWxhYmxlIG9uIGJvdGggQ2hyb21lIGFuZCBGaXJlZm94LiIpLCBtZHgoInAiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAxNDMKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiVGhpcyByZXByZXNlbnRzIHRoZSB2aXJ0dWFsIERPTS4iKSwgbWR4KCJwIiwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMTQ0CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgIlJlYWN0IGFsc28gaGlnaGxpZ2h0cyB3aGF0IGlzIGJlaW5nIGluc3BlY3RlZCBpZiB5b3UgY2xpY2sgb24gdGhlIFJlYWN0IHRhYiBhZnRlciBoaWdobGlnaHRpbmcgdGhlIHNlY3Rpb24geW91IGFyZSBsb29raW5nIGZvci4iKSwgbWR4KCJoMiIsIE9iamVjdC5hc3NpZ24oewogICAgImlkIjogInRocmVhY3QtNi10aGlua2luZy1pbi1jb21wb25lbnRzIgogIH0sIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDE0NQogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0pLCAiVEhSRUFDVC02OiBUaGlua2luZyBpbiBDb21wb25lbnRzIiksIG1keCgiaDQiLCBPYmplY3QuYXNzaWduKHsKICAgICJpZCI6ICJ0aHJlYWN0LTctbW9ja2luZy11cC1hbi1hcHAiCiAgfSwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMTQ4CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSksICJUSFJFQUNULTc6IE1vY2tpbmcgdXAgYW4gQXBwIiksIG1keCgicCIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDE1MQogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJJdCdzIGJlc3QgdG8gbW9jayB1cCB0aGUgYXBwbGljYXRpb24gaW4gSlNYLiIpLCBtZHgoInAiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAxNTIKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiVGhhdCB3YXksIHdlIGNhbiBhcHBseSBzb21lIHN0eWxlcyBub3cuIiksIG1keCgidWwiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAxNTMKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCBtZHgoImxpIiwgewogICAgcGFyZW50TmFtZTogInVsIiwKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDE1NAogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJjbGFzc05hbWUgaW4gSlNYIGlzIHVzZWQgdG8gZGVmaW5lIGEgY2xhc3MiKSwgbWR4KCJsaSIsIHsKICAgIHBhcmVudE5hbWU6ICJ1bCIsCiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAxNTUKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiaW4gUmVhY3QgSlNYLCBpdCBpcyBjdXN0b21hcnkgdG8gdXNlIGRvdWJsZSBxdW90ZXMiKSwgbWR4KCJsaSIsIHsKICAgIHBhcmVudE5hbWU6ICJ1bCIsCiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAxNTYKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiaWYgeW91IG5lZWQgdG8gZXZhbHVhdGUgYSBudW1lcmFsLCB1c2Uge30gaW5zdGVhZCBvZiBcIlwiIiksIG1keCgibGkiLCB7CiAgICBwYXJlbnROYW1lOiAidWwiLAogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMTU3CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgImluIHRoZSBmb2xsb3dpbmcgZXhhbXBsZSwgd2UgY291bGQgY29weSBhbmQgcGFzdCB0aGUgXCJwbGF5ZXJcIiBkaXYgdG8gaGF2ZSBtdWx0aXBsZSBwbGF5ZXJzLCBob3dldmVyIGFzIHlvdSBjb3VsZCBpbWFnZSwgdGhpcyB3aWxsIGJlIGFudGktRFJZIHByYWN0aXNlLiBXZSB3aWxsIGV2ZW50dWFsbHkgY3JlYXRlIGFub3RoZXIgY29tcG9uZW50IGZvciB0aGlzISIpLCBtZHgoImxpIiwgewogICAgcGFyZW50TmFtZTogInVsIiwKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDE1OAogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJyaWdodCBub3csIHRoZSBmb2xsb3dpbmcgY29kZSBpcyBzdGF0aWMiKSksIG1keCgicHJlIiwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMTYwCiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgbWR4KCJjb2RlIiwgT2JqZWN0LmFzc2lnbih7CiAgICBwYXJlbnROYW1lOiAicHJlIgogIH0sIHsKICAgICJjbGFzc05hbWUiOiAibGFuZ3VhZ2UtamF2YXNjcmlwdCIKICB9LCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAxNjAKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9KSwgImZ1bmN0aW9uIEFwcGxpY2F0aW9uKCkge1xuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwic2NvcmVib2FyZFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJoZWFkZXJcIj5cbiAgICAgICAgPGgxPlNjb3JlYm9hcmQ8L2gxPlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGxheWVyc1wiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBsYXllclwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGxheWVyLW5hbWVcIj5EZW5uaXM8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBsYXllci1zY29yZVwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb3VudGVyXCI+XG4gICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiY291bnRlci1hY3Rpb24gZGVjcmVtZW50XCI+IC0gPC9idXR0b24+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY291bnRlci1zY29yZVwiPiAzMSA8L2Rpdj5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJjb3VudGVyLWFjdGlvbiBpbmNyZW1lbnRcIj4gKyA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufVxuIikpLCBtZHgoImg0IiwgT2JqZWN0LmFzc2lnbih7CiAgICAiaWQiOiAidGhyZWFjdC04LXByb3BlcnRpZXMiCiAgfSwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMTg1CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSksICJUSFJFQUNULTg6IFByb3BlcnRpZXMiKSwgbWR4KCJwIiwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMTg4CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgIlRoZSBhcHBsaWNhdGlvbiBzbyBmYXIgaXMgcHJldHR5IHVzZWxlc3MuIFdlIGNhbiB1c2UgcHJvcGVydGllcyB0byBjdXN0b21pc2Ugb3VyIGNvbXBvbmVudHMuIFdlIGNhbiB0aGVuIHVzZSB0aGUgYXR0cmlidXRlIHN5bnRheCB3aGljaCBpcyB1c2VkIHRvIGNyZWF0ZSB0aGUgdmlydHVhbCBET00uIiksIG1keCgidWwiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAxODkKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCBtZHgoImxpIiwgewogICAgcGFyZW50TmFtZTogInVsIiwKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDE5MAogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJ3ZSBjYW4gYWxsb3cgb3VyIGZ1bmN0aW9uIHRvIHRha2UgYW4gYXJndW1lbnQgd2hpY2ggd2lsbCBjb21lIGZyb20gb3VyIHJlYWN0RG9tLnJlbmRlciBmdW5jdGlvbi4iKSwgbWR4KCJsaSIsIHsKICAgIHBhcmVudE5hbWU6ICJ1bCIsCiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAxOTEKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAicHJvcHMgaXMgdGhlIGNvbnZlbnRpb24gZm9yIGFyZ3VtZW50IG5hbWVkIHVzZWQiKSwgbWR4KCJsaSIsIHsKICAgIHBhcmVudE5hbWU6ICJ1bCIsCiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAxOTIKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiYW55dGhpbmcgd2l0aCB7fSB3aWxsIGJlIGV2YWx1YXRlZCBhcyBwbGFpbiBvbGQgSmF2YVNjcmlwdCAtIGl0IE1VU1QgYmUgYW4gZXhwcmVzc2lvbiB0aGF0IGJyaW5ncyBiYWNrIGEgdmFsdWUgLSBhdCB0aGUgbW9tZW50LCB0aGlzIG1lYW5zIG5vIGNvbmRpdGlvbmFsIGxvZ2ljIChpZi9lbHNlKSwgd2UgY2FuIHNlZSBob3cgdG8gZG8gdGhpcyBsYXRlciEiKSksIG1keCgicHJlIiwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMTk0CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgbWR4KCJjb2RlIiwgT2JqZWN0LmFzc2lnbih7CiAgICBwYXJlbnROYW1lOiAicHJlIgogIH0sIHsKICAgICJjbGFzc05hbWUiOiAibGFuZ3VhZ2UtamF2YXNjcmlwdCIKICB9LCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAxOTQKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9KSwgImZ1bmN0aW9uIEFwcGxpY2F0aW9uKHByb3BzKSB7XG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJzY29yZWJvYXJkXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImhlYWRlclwiPlxuICAgICAgICA8aDE+e3Byb3BzLnRpdGxlfTwvaDE+XG4gICAgICA8L2Rpdj5cblxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJwbGF5ZXJzXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGxheWVyXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwbGF5ZXItbmFtZVwiPkRlbm5pczwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGxheWVyLXNjb3JlXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvdW50ZXJcIj5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJjb3VudGVyLWFjdGlvbiBkZWNyZW1lbnRcIj4gLSA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb3VudGVyLXNjb3JlXCI+IDMxIDwvZGl2PlxuICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImNvdW50ZXItYWN0aW9uIGluY3JlbWVudFwiPiArIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59XG5cblJlYWN0RE9NLnJlbmRlcihcbiAgPEFwcGxpY2F0aW9uIHRpdGxlPVwiTXkgU2NvcmVib2FyZFwiIC8+LFxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFpbmVyJylcbik7XG4iKSksIG1keCgiaDQiLCBPYmplY3QuYXNzaWduKHsKICAgICJpZCI6ICJ0aHJlYWN0LTktcHJvcHR5cGVzLWFuZC1kZWZhdWx0cHJvcHMiCiAgfSwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMjI0CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSksICJUSFJFQUNULTk6IFByb3BUeXBlcyBhbmQgRGVmYXVsdFByb3BzIiksIG1keCgicCIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDIyNwogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJQcm9wVHlwZXMgaXMgYW4gb2JqZWN0IHRoYXQgY29udGFpbnMgYWxsIHRoZSBrZXlzIG91ciBvYmplY3QgY2FuIHRha2UgYW5kIGEgc3BlY2lhbCB0eXBlIGRlZmluaXRpb24uIiksIG1keCgidWwiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAyMjgKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCBtZHgoImxpIiwgewogICAgcGFyZW50TmFtZTogInVsIiwKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDIyOQogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJpZiB5b3UgcGxhY2UgYSBudW1lcmFsIGluc3RlYWQgb2YgYSBzdHJpbmcsIGl0IHdpbGwgcmVuZGVyLCBidXQgaXQgd2lsbCBjYXVzZSBhIFJlYWN0IGVycm9yIGJlY2F1c2UgUHJvcFR5cGVzIFwidGl0bGVcIiBpcyBsb29raW5nIGZvciBhIHN0cmluZyIpLCBtZHgoImxpIiwgewogICAgcGFyZW50TmFtZTogInVsIiwKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDIzMAogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJ3ZSBjYW4gdXNlIC5pc1JlcXVpcmVkIHRvIG1ha2UgYSBQcm9wVHlwZSBwcm9wZXJ0eSByZXF1aXJlZCIpLCBtZHgoImxpIiwgewogICAgcGFyZW50TmFtZTogInVsIiwKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDIzMQogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJ3ZSBjYW4gc2V0IGRlZmF1bHQgdmFsdWVzIHdpdGggLmRlZmF1bHRQcm9wcyBpZiB3ZSB3YW50IiksIG1keCgibGkiLCB7CiAgICBwYXJlbnROYW1lOiAidWwiLAogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMjMyCiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgInlvdSBjYW4gZmluZCBhIGxpc3Qgb2YgcHJvcFR5cGVzIGluIHRoZSBkb2NzIC0gcHJvcFR5cGVzIGFyZW4ndCByZXF1aXJlZCwgYnV0IGNhbiBhZGQgbW9yZSBjbGFyaXR5IC0gYSBkZWZhdWx0UHJvcHMgdmFsdWUgaXMgZXNzZW50aWFsbHkgcmVkdW5kYW50IGlmIHByb3BUeXBlcyBoYXMgdGhhdCBzYW1lIHZhbHVlIGFzIHJlcXVpcmVkLCBidXQgaXQgaXMgbGVmdCBpbiB0aGlzIG5leHQgY29kZSBibG9jayBmb3IgY2xhcml0eSAod2lsbCBiZSByZW1vdmVkKSIpKSwgbWR4KCJwcmUiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAyMzQKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCBtZHgoImNvZGUiLCBPYmplY3QuYXNzaWduKHsKICAgIHBhcmVudE5hbWU6ICJwcmUiCiAgfSwgewogICAgImNsYXNzTmFtZSI6ICJsYW5ndWFnZS1qYXZhc2NyaXB0IgogIH0sIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDIzNAogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0pLCAiZnVuY3Rpb24gQXBwbGljYXRpb24ocHJvcHMpIHtcbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInNjb3JlYm9hcmRcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGVhZGVyXCI+XG4gICAgICAgIDxoMT57cHJvcHMudGl0bGV9PC9oMT5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInBsYXllcnNcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwbGF5ZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBsYXllci1uYW1lXCI+RGVubmlzPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwbGF5ZXItc2NvcmVcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY291bnRlclwiPlxuICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImNvdW50ZXItYWN0aW9uIGRlY3JlbWVudFwiPiAtIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvdW50ZXItc2NvcmVcIj4gMzEgPC9kaXY+XG4gICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiY291bnRlci1hY3Rpb24gaW5jcmVtZW50XCI+ICsgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuQXBwbGljYXRpb24ucHJvcFR5cGVzID0ge1xuICB0aXRsZTogUmVhY3QuUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkXG59O1xuXG5BcHBsaWNhdGlvbi5kZWZhdWx0UHJvcHMgPSB7XG4gIHRpdGxlOiAnU2NvcmVib2FyZCdcbn07XG5cblJlYWN0RE9NLnJlbmRlcihcbiAgPEFwcGxpY2F0aW9uIHRpdGxlPVwiTXkgU2NvcmVib2FyZFwiIC8+LFxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFpbmVyJylcbik7XG4iKSksIG1keCgiaDQiLCBPYmplY3QuYXNzaWduKHsKICAgICJpZCI6ICJ0aHJlYWN0LTEwLWRlY29tcG9zaW5nLW91ci1hcHBsaWNhdGlvbiIKICB9LCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAyNzIKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9KSwgIlRIUkVBQ1QtMTA6IERlY29tcG9zaW5nIG91ciBBcHBsaWNhdGlvbiIpLCBtZHgoInAiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAyNzUKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiQnJlYWtpbmcgZG93biBvdXIgQXBwbGljYXRpb24gaW50byBzbWFsbGVyIGNvbXBvbmVudHMuIiksIG1keCgicCIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDI3NgogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJUbyB0aGlzIGlzLCB3ZSB0aGluayBvZiBBcHBsaWNhdGlvbiBmcm9tIGEgaGlnaCBsZXZlbC4iKSwgbWR4KCJ1bCIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDI3NwogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sIG1keCgibGkiLCB7CiAgICBwYXJlbnROYW1lOiAidWwiLAogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMjc4CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgIkluIHRoaXMgZXhhbXBsZSwgd2UgY2FuIHNldCBcImlzUmVxdWlyZWRcIiB0byBIZWFkZXIucHJvcFR5cGVzIGJlY2F1c2UgdGhlIGRlZmF1bHQgd2lsbCBiZSBwYXNzZWQgZG93biBmcm9tIHRoZSBBcHBsaWNhdGlvbi5wcm9wVHlwZXMiKSwgbWR4KCJsaSIsIHsKICAgIHBhcmVudE5hbWU6ICJ1bCIsCiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAyNzkKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiVGhlIFBsYXllciBmdW5jdGlvbiBpcyB1c2luZyBKU1ggdG8gcmVwbGFjZSBteSBuYW1lIGFuZCBteSBzY29yZSB3aXRoIHByb3BzIHZhbHVlcyIpLCBtZHgoImxpIiwgewogICAgcGFyZW50TmFtZTogInVsIiwKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDI4MAogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sIG1keCgic3Ryb25nIiwgewogICAgcGFyZW50TmFtZTogImxpIiwKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDI4MAogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJOb3RlOiIpLCAiIGlmIHlvdSBsb29rIGludG8gdGhlIFJlYWN0IGNvbnNvbGUsIHlvdSBzaG91bGQgbm90ZSB0aGF0IHRoZXNlIGZ1bmN0aW9ucyB3ZSBkZWNsYXJlIGFuZCByZW5kZXIgaW4gdGhlIHZpcnR1YWwgRE9NIGFsc28gY29tZSB1cCBhcyBjb21wb25lbnRzLiBIb3cgaGFuZHkgZm9yIGRlYnVnZ2luZyEiKSwgbWR4KCJsaSIsIHsKICAgIHBhcmVudE5hbWU6ICJ1bCIsCiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAyODEKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCBtZHgoInN0cm9uZyIsIHsKICAgIHBhcmVudE5hbWU6ICJsaSIsCiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAyODEKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiTm90ZToiKSwgIiBpZiB5b3UgbG9vayBhdCB0aGUgQ291bnRlciBmdW5jdGlvbiwgaXQgaGFzIGJlZW4gZGVjb21wb3NlZCBmcm9tIEFwcGxpY2F0aW9uIC0+IFBsYXllciAtPiBDb3VudGVyLiBUaGUgcmVxdWlyZWQgcHJvcHMgaGF2ZSBiZWVuIHBhc3NlZCBkb3duLiBUaGlzIGlzIHZlcnkgY29tbW9uIHByYWN0aXNlIGluIFJlYWN0ISIpLCBtZHgoImxpIiwgewogICAgcGFyZW50TmFtZTogInVsIiwKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDI4MgogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJIb3cgdG8gYnJlYWsgaXQgZG93biBpcyB1cCB0byB5b3UuIFByb3MgYW5kIGNvbnMgZm9yIGhvdyBtb2R1bGFyIHlvdSBnby4iKSksIG1keCgicHJlIiwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMjg0CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgbWR4KCJjb2RlIiwgT2JqZWN0LmFzc2lnbih7CiAgICBwYXJlbnROYW1lOiAicHJlIgogIH0sIHsKICAgICJjbGFzc05hbWUiOiAibGFuZ3VhZ2UtamF2YXNjcmlwdCIKICB9LCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAyODQKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9KSwgImZ1bmN0aW9uIEhlYWRlcihwcm9wcykge1xuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiaGVhZGVyXCI+XG4gICAgICA8aDE+e3Byb3BzLnRpdGxlfTwvaDE+XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbkhlYWRlci5wcm9wVHlwZXMgPSB7XG4gIHRpdGxlOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWRcbn07XG5cbmZ1bmN0aW9uIENvdW50ZXIocHJvcHMpIHtcbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImNvdW50ZXJcIj5cbiAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiY291bnRlci1hY3Rpb24gZGVjcmVtZW50XCI+IC0gPC9idXR0b24+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvdW50ZXItc2NvcmVcIj4ge3Byb3BzLnNjb3JlfTwvZGl2PlxuICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJjb3VudGVyLWFjdGlvbiBpbmNyZW1lbnRcIj4gKyA8L2J1dHRvbj5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuQ291bnRlci5wcm9wVHlwZXMgPSB7XG4gIHNjb3JlOiBSZWFjdC5Qcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWRcbn07XG5cbmZ1bmN0aW9uIFBsYXllcihwcm9wcykge1xuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwicGxheWVyXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInBsYXllci1uYW1lXCI+e3Byb3BzLm5hbWV9PC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInBsYXllci1zY29yZVwiPlxuICAgICAgICA8Q291bnRlciBzY29yZT17cHJvcHMuc2NvcmV9IC8+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuUGxheWVyLnByb3BUeXBlcyA9IHtcbiAgbmFtZTogUmVhY3QuUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICBzY29yZTogUmVhY3QuUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkXG59O1xuXG5mdW5jdGlvbiBBcHBsaWNhdGlvbihwcm9wcykge1xuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwic2NvcmVib2FyZFwiPlxuICAgICAgPEhlYWRlciB0aXRsZT17cHJvcHMudGl0bGV9IC8+XG5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGxheWVyc1wiPlxuICAgICAgICA8UGxheWVyIG5hbWU9XCJEZW5uaXNcIiBzY29yZT17MzJ9IC8+XG4gICAgICAgIDxQbGF5ZXIgbmFtZT1cIkJlblwiIHNjb3JlPXszNH0gLz5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufVxuXG5BcHBsaWNhdGlvbi5wcm9wVHlwZXMgPSB7XG4gIHRpdGxlOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nXG59O1xuXG5BcHBsaWNhdGlvbi5kZWZhdWx0UHJvcHMgPSB7XG4gIHRpdGxlOiAnU2NvcmVib2FyZCdcbn07XG5cblJlYWN0RE9NLnJlbmRlcihcbiAgPEFwcGxpY2F0aW9uIHRpdGxlPVwiTXkgU2NvcmVib2FyZFwiIC8+LFxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFpbmVyJylcbik7XG4iKSksIG1keCgiaDQiLCBPYmplY3QuYXNzaWduKHsKICAgICJpZCI6ICJ0aHJlYWN0LTExLWxvb3BzLWFuZC1saXN0cy1pbi1qc3giCiAgfSwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMzU0CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSksICJUSFJFQUNULTExOiBMb29wcyBhbmQgTGlzdHMgaW4gSlNYIiksIG1keCgicCIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDM1NwogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJDdXJyZW50bHksIHdlIGhhdmUgdHdvIGhhcmQgY29kZWQgcGxheWVycywgYnV0IHdlIHdhbnQgdG8gYmUgYWJsZSB0byBsb29wIHRocm91Z2ggYW4gYXJyYXkgb2YgdGhpcy4iKSwgbWR4KCJ1bCIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDM1OAogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sIG1keCgibGkiLCB7CiAgICBwYXJlbnROYW1lOiAidWwiLAogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMzU5CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgIk5vdGljZSB0aGF0IEFwcGxpY2F0aW9uLnByb3BUeXBlcyBub3cgcmVxdWlyZXMgYW4gYXJyYXkgb2Ygb2JqZWN0cyBmb3IgdGhlIHRlcm0gcGxheWVycy4gV2UgdXNlIHNoYXBlIHRvIGRlZmluZSBleGFjdGx5IHRoZSBwcm9wZXJ0aWVzIG9mIHRoaXMgb2JqZWN0IHRoYXQgd2UgcmVxdWlyZS4iKSwgbWR4KCJsaSIsIHsKICAgIHBhcmVudE5hbWU6ICJ1bCIsCiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAzNjAKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiVGhlIEpTWCBtYXAgZnVuY3Rpb24gdXNlZCB0byBkeW5hbWljYWxseSBjcmVhdGUgcGxheWVycyB3aWxsIHJldHVybiBhbiBhcnJheSB3aGljaCBpbiB0dXJuIHdpbGwgYmUgcmVuZGVyZWQgYXMgYSBsaXN0IiksIG1keCgibGkiLCB7CiAgICBwYXJlbnROYW1lOiAidWwiLAogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMzYxCiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgIldlIHVzZSBhIFwia2V5XCIgZm9yIGVhY2ggY29tcG9uZW50IGluIHRoZSBsb29wIHRvIGxldCB0aGUgdmlydHVhbCBET00ga25vdyB3aGljaCBjb21wb25lbnRzIGFyZSBzaW1wbHkgYmVpbmcgcmVhcnJhbmdlZCBvciByZW9yZGVyZWQgc28gdGhhdCB3ZSBkbyBub3QgbmVlZCB0byByZS1yZW5kZXIgbW9yZSB0aGFuIHdlIGhhdmUgdG8hIChyZW1lbWJlciwgdGhlIGdvYWwgb2YgUmVhY3QgaXMgdG8gZWZmaWNpZW50bHkgcmVuZGVyIHRoZSBET00pIC0gVGhlIGtleSBtdXN0IGJlIHVuaXF1ZSBmb3IgZWFjaCBET00gbm9kZSAtIFRvIHNlZSBob3cgdGhlIGVycm9yIHdvdWxkIHdvcmssIHJ1biB0aGlzIGNvZGUgYnV0IHRha2Ugb3V0IHRoZSBcImtleVwiIGZyb20gdGhlIHJlbmRlckRPTSBmdW5jdGlvbi4iKSksIG1keCgicHJlIiwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMzYzCiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgbWR4KCJjb2RlIiwgT2JqZWN0LmFzc2lnbih7CiAgICBwYXJlbnROYW1lOiAicHJlIgogIH0sIHsKICAgICJjbGFzc05hbWUiOiAibGFuZ3VhZ2UtamF2YXNjcmlwdCIKICB9LCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAzNjMKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9KSwgImxldCBQTEFZRVJTID0gW1xuICAgIHtcbiAgICAgICAgbmFtZTogXCJEZW5uaXNcIixcbiAgICAgICAgc2NvcmU6IDMzLFxuICAgICAgICBpZDoxLFxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiBcIkJlblwiLFxuICAgICAgICBzY29yZTogMzQsXG4gICAgICAgIGlkOjIsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6IFwiQ2xhcmsgRnJvbSBJblZpc2lvblwiLFxuICAgICAgICBzY29yZTogMTIsXG4gICAgICAgIGlkOjMsXG4gICAgfVxuXTtcblxuZnVuY3Rpb24gSGVhZGVyKHByb3BzKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoZWFkZXJcIj5cbiAgICAgICAgICAgIDxoMT57cHJvcHMudGl0bGV9PC9oMT5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn1cblxuSGVhZGVyLnByb3BUeXBlcyA9IHtcbiAgICB0aXRsZTogUmVhY3QuUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxufTtcblxuZnVuY3Rpb24gQ291bnRlcihwcm9wcykge1xuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY291bnRlclwiPlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJjb3VudGVyLWFjdGlvbiBkZWNyZW1lbnRcIj4gLSA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY291bnRlci1zY29yZVwiPiB7cHJvcHMuc2NvcmUgfTwvZGl2PlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJjb3VudGVyLWFjdGlvbiBpbmNyZW1lbnRcIj4gKyA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn1cblxuQ291bnRlci5wcm9wVHlwZXMgPSB7XG4gICAgc2NvcmU6IFJlYWN0LlByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbn1cblxuZnVuY3Rpb24gUGxheWVyKHByb3BzKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwbGF5ZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGxheWVyLW5hbWVcIj5cbiAgICAgICAgICAgICAgICB7cHJvcHMubmFtZX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwbGF5ZXItc2NvcmVcIj5cbiAgICAgICAgICAgICAgICA8Q291bnRlciBzY29yZT17cHJvcHMuc2NvcmV9IC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn1cblxuUGxheWVyLnByb3BUeXBlcyA9IHtcbiAgICBuYW1lOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgc2NvcmU6IFJlYWN0LlByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbn1cblxuZnVuY3Rpb24gQXBwbGljYXRpb24ocHJvcHMpIHtcbiAgICByZXR1cm4oXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2NvcmVib2FyZFwiPlxuICAgICAgICAgICAgPEhlYWRlciB0aXRsZT17cHJvcHMudGl0bGV9Lz5cblxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwbGF5ZXJzXCI+XG4gICAgICAgICAgICAgICAge3Byb3BzLnBsYXllcnMubWFwKGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDxQbGF5ZXIgbmFtZT17cGxheWVyLm5hbWV9IHNjb3Jle3BsYXllci5zY29yZX0ga2V5PXtwbGF5ZXIuaWR9IC8+XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgKVxufVxuXG5BcHBsaWNhdGlvbi5wcm9wVHlwZXMgPSB7XG4gICAgdGl0bGU6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcsXG4gICAgcGxheWVyOiBSZWFjdC5Qcm9wVHlwZXMuYXJyYXlPZihSZWFjdC5Qcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgICBuYW1lOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgICAgIHNjb3JlOiBSZWFjdC5Qcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gICAgICAgIGlkOiBSZWFjdC5Qcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gICAgfSkpLmlzUmVxdWlyZWQsXG59O1xuXG5BcHBsaWNhdGlvbi5kZWZhdWx0UHJvcHMgPSB7XG4gICAgdGl0bGU6IFwiU2NvcmVib2FyZFwiLFxufTtcblxuUmVhY3RET00ucmVuZGVyKDxBcHBsaWNhdGlvbiBwbGF5ZXJzPXtQTEFZRVJTfS8+LCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFpbmVyJykpO1xuIikpLCBtZHgoImgyIiwgT2JqZWN0LmFzc2lnbih7CiAgICAiaWQiOiAidGhyZWFjdC0xMi1zdGF0ZWZ1bC1jb21wb25lbnRzIgogIH0sIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDQ1NgogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0pLCAiVEhSRUFDVC0xMjogU3RhdGVmdWwgQ29tcG9uZW50cyIpLCBtZHgoImg0IiwgT2JqZWN0LmFzc2lnbih7CiAgICAiaWQiOiAidGhyZWFjdC0xMy1jcmVhdGluZy1hLWNvbXBvbmVudC1jbGFzcyIKICB9LCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA0NTkKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9KSwgIlRIUkVBQ1QtMTM6IENyZWF0aW5nIGEgQ29tcG9uZW50IENsYXNzIiksIG1keCgicCIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDQ2MgogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJSaWdodCBub3csIG91ciBhcHBsaWNhdGlvbiBpcyBzdGlsbCBzdGF0aWMuIFdlIGNhbm5vdCB1cGRhdGUgYW55IGRhdGEgZGV0YWlscy4iKSwgbWR4KCJwIiwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogNDYzCiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgIldlIG5lZWQgdG8gYWRkIHNvbWUgU3RhdGUuIFNvIGZhciwgd2UgaGF2ZSBiZWVuIHdyaXRpbmcgU3RhdGVsZXNzIEZ1bmN0aW9uIENvbXBvbmVudHMgKFNGQykuIFRoaXMgZm9ybSBpc24ndCBkZXNpZ25lZCBmb3IgaGFuZGxpbmcgc3RhdGUuIiksIG1keCgicCIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDQ2NAogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJXZSBuZWVkIHRvIGJ1aWxkIGEgY29tcG9uZW50IGNsYXNzLCBidXQgdGhpcyBjb21lcyB3aXRoIGNvbXBsZXhpdHkuIE5vdyB3ZSB3aWxsIHJlZmFjdG9yIHRvIHJlZmxlY3QgdGhpcy4iKSwgbWR4KCJ1bCIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDQ2NQogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sIG1keCgibGkiLCB7CiAgICBwYXJlbnROYW1lOiAidWwiLAogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogNDY2CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgIm5vdGUsIHdoZW4gY3JlYXRlIGEgb2JqZWN0IGxpdGVyYWwgKG9yIGNsYXNzIGluIEVDTUEyMDE1KSwgeW91IGFsc28gbXVzdCBub3QgZm9yZ2V0IHRvIHVzZSB0aGUga2V5d29yZCBcInRoaXNcIiAtIGVnLiBSZWFjdC5jcmVhdGVDbGFzcyBpcyBwcmUgRUNNQTIwMTUiKSksIG1keCgicHJlIiwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogNDY4CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgbWR4KCJjb2RlIiwgT2JqZWN0LmFzc2lnbih7CiAgICBwYXJlbnROYW1lOiAicHJlIgogIH0sIHsKICAgICJjbGFzc05hbWUiOiAibGFuZ3VhZ2UtamF2YXNjcmlwdCIKICB9LCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA0NjgKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9KSwgImxldCBQTEFZRVJTID0gW1xuICAgIHtcbiAgICAgICAgbmFtZTogXCJEZW5uaXNcIixcbiAgICAgICAgc2NvcmU6IDMzLFxuICAgICAgICBpZDoxLFxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiBcIkJlblwiLFxuICAgICAgICBzY29yZTogMzQsXG4gICAgICAgIGlkOjIsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6IFwiQ2xhcmsgRnJvbSBJblZpc2lvblwiLFxuICAgICAgICBzY29yZTogMTIsXG4gICAgICAgIGlkOjMsXG4gICAgfVxuXTtcblxuZnVuY3Rpb24gSGVhZGVyKHByb3BzKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoZWFkZXJcIj5cbiAgICAgICAgICAgIDxoMT57cHJvcHMudGl0bGV9PC9oMT5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn1cblxuSGVhZGVyLnByb3BUeXBlcyA9IHtcbiAgICB0aXRsZTogUmVhY3QuUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxufTtcblxuLy8gZnVuY3Rpb25hbGx5IHRoZSBzYW1lLCB3ZSBhcmUgcHJlcGFyaW5nIHRvIGJlIGFibGUgdG8gYWRkIHN0YXRlIHRvIHRoZSBjb21wb25lbnRcblxudmFyIENvdW50ZXIgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gICAgcHJvcFR5cGVzOiB7XG4gICAgICAgIHNjb3JlOiBSZWFjdC5Qcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gICAgfSxcbiAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb3VudGVyXCI+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJjb3VudGVyLWFjdGlvbiBkZWNyZW1lbnRcIj4gLSA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvdW50ZXItc2NvcmVcIj4ge3RoaXMucHJvcHMuc2NvcmUgfTwvZGl2PlxuICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiY291bnRlci1hY3Rpb24gaW5jcmVtZW50XCI+ICsgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59KTtcblxuLy8gZnVuY3Rpb24gQ291bnRlcihwcm9wcykge30gLSB0aGlzIGNhbiBiZSByZW1vdmVkXG5cbi8vIENvdW50ZXIucHJvcFR5cGVzID0ge30gLSB0aGlzIGNhbiBiZSByZW1vdmVkXG5cbmZ1bmN0aW9uIFBsYXllcihwcm9wcykge1xuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGxheWVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBsYXllci1uYW1lXCI+XG4gICAgICAgICAgICAgICAge3Byb3BzLm5hbWV9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGxheWVyLXNjb3JlXCI+XG4gICAgICAgICAgICAgICAgPENvdW50ZXIgc2NvcmU9e3Byb3BzLnNjb3JlfSAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG59XG5cblBsYXllci5wcm9wVHlwZXMgPSB7XG4gICAgbmFtZTogUmVhY3QuUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgIHNjb3JlOiBSZWFjdC5Qcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG59XG5cbmZ1bmN0aW9uIEFwcGxpY2F0aW9uKHByb3BzKSB7XG4gICAgcmV0dXJuKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNjb3JlYm9hcmRcIj5cbiAgICAgICAgICAgIDxIZWFkZXIgdGl0bGU9e3Byb3BzLnRpdGxlfS8+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGxheWVyc1wiPlxuICAgICAgICAgICAgICAgIHtwcm9wcy5wbGF5ZXJzLm1hcChmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA8UGxheWVyIG5hbWU9e3BsYXllci5uYW1lfSBzY29yZXtwbGF5ZXIuc2NvcmV9IGtleT17cGxheWVyLmlkfSAvPlxuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgIClcbn1cblxuQXBwbGljYXRpb24ucHJvcFR5cGVzID0ge1xuICAgIHRpdGxlOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuICAgIHBsYXllcjogUmVhY3QuUHJvcFR5cGVzLmFycmF5T2YoUmVhY3QuUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgICAgbmFtZTogUmVhY3QuUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgICAgICBzY29yZTogUmVhY3QuUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuICAgICAgICBpZDogUmVhY3QuUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuICAgIH0pKS5pc1JlcXVpcmVkLFxufTtcblxuQXBwbGljYXRpb24uZGVmYXVsdFByb3BzID0ge1xuICAgIHRpdGxlOiBcIlNjb3JlYm9hcmRcIixcbn07XG5cblJlYWN0RE9NLnJlbmRlcig8QXBwbGljYXRpb24gcGxheWVycz17UExBWUVSU30vPiwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRhaW5lcicpKTtcbiIpKSwgbWR4KCJoNCIsIE9iamVjdC5hc3NpZ24oewogICAgImlkIjogInRocmVhY3QtMTQtdW5kZXJzdGFuZGluZy1zdGF0ZSIKICB9LCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA1NjgKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9KSwgIlRIUkVBQ1QtMTQ6IFVuZGVyc3RhbmRpbmcgU3RhdGUiKSwgbWR4KCJwIiwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogNTcxCiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgIk1hbmFnaW5nIGRhdGEgdGhhdCBjYW4gY2hhbmdlLiBSZWFjdCBoYXMgYSBtZWNoYW5pc20gdG8gZGVhbCB3aXRoIFN0YXRlLiBSZWFjdCBkb2Vzbid0IHByb3ZpZGUgZXZlcnl0aGluZywgYW5kIHlvdSdyZSBlbmNvdXJhZ2VkIHRvIHVzZSBvdGhlciBsaWJyYXJpZXMgdG8gZGVhbCB3aXRoIHRoaW5ncyBzdWNoIGFzIEFKQVggYW5kIFN0YXRlIE1hbmFnZW1lbnQuIiksIG1keCgicCIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDU3MgogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJBIHBvcHVsYXIgZGVzaWduIHBhdHRlcm4gdXNlZCBpcyBGbHV4ICh3aGF0IHdlIHdpbGwgdXNlKS4gSXQgaXMgYWxzbyByZWNvbW1lbmRlZCB0byB1c2UgUmVkdXggd2hpY2ggdGFrZXMgRmx1eCBhIGxpdHRsZSBiaXQgZnVydGhlciwgaG93ZXZlciBGbHV4IGFuZCBSZWR1eCBhcmUgdG9waWNzIGZvciBhbm90aGVyIHRpbWUuIiksIG1keCgicCIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDU3MwogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJBZnRlciB1bmRlcnN0YW5kaW5nIHN0YXRlLCBpdCBpcyByZWNvbW1lbmRlZCB0byB1c2UgdGhlc2Ugb3RoZXIgbGlicmFyaWVzIHRvIHNhdmUgdGltZSBhbmQgd29yayBtb3JlIGVmZmVjdGl2ZWx5LiIpLCBtZHgoInVsIiwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogNTc0CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgbWR4KCJsaSIsIHsKICAgIHBhcmVudE5hbWU6ICJ1bCIsCiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA1NzUKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiQWZ0ZXIgY2xpY2tpbmcgb24gYSBidXR0b24sIHRoZSBET00gd2lsbCBrbm93IHRvIGJlIHJlLXJlbmRlcmVkIHRvIHNob3cgdG8gY29ycmVjdCBTdGF0ZSIpLCBtZHgoImxpIiwgewogICAgcGFyZW50TmFtZTogInVsIiwKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDU3NgogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJXZSBuZWVkIHRvIHRoZSB0aGlzLnNldFN0YXRlKCkgZnVuY3Rpb24gdG8gbGV0IFJlYWN0IGtub3cgdG8gcmUtcmVuZGVyIGl0c2VsZiwgdGhpcyBpcyB3aHkgd2UgZG9uJ3QganVzdCB1cGRhdGUgdGhlIHNjb3JlISIpLCBtZHgoImxpIiwgewogICAgcGFyZW50TmFtZTogInVsIiwKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDU3NwogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJXZSB1c2UgdGhpcy5kZWNyZW1lbnRTY29yZSBpbiB0aGUgb25DbGljayBhdHRyaWJ1dGUsIGJ1dCBub3QgdGhpcy5kZWNyZW1lbnRTY29yZS5iaW5kKHRoaXMpLiBSZWFjdCBkb2VzIHRoaXMgYXV0b21hdGljYWxseSBmb3IgdXMgaW4gYSBoaWdoIHBlcmZvcm1hbmNlIHdheS4iKSwgbWR4KCJsaSIsIHsKICAgIHBhcmVudE5hbWU6ICJ1bCIsCiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA1NzgKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiV2UgaGF2ZSB1cGRhdGVkIHByb3BzIHRvIHNob3cgYW4gZXhhbXBsZSBpZiB3ZSB3YW50IHRvIHBhc3MgcHJvcHMgYW5kIHRoZW4gdXNlIHRoZW0gZm9yIGFuIGluaXRpYWwgc3RhdGUuIikpLCBtZHgoInByZSIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDU4MAogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sIG1keCgiY29kZSIsIE9iamVjdC5hc3NpZ24oewogICAgcGFyZW50TmFtZTogInByZSIKICB9LCB7CiAgICAiY2xhc3NOYW1lIjogImxhbmd1YWdlLWphdmFzY3JpcHQiCiAgfSwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogNTgwCiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSksICJsZXQgUExBWUVSUyA9IFtcbiAgICB7XG4gICAgICAgIG5hbWU6IFwiRGVubmlzXCIsXG4gICAgICAgIHNjb3JlOiAzMyxcbiAgICAgICAgaWQ6MSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogXCJCZW5cIixcbiAgICAgICAgc2NvcmU6IDM0LFxuICAgICAgICBpZDoyLFxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiBcIkNsYXJrIEZyb20gSW5WaXNpb25cIixcbiAgICAgICAgc2NvcmU6IDEyLFxuICAgICAgICBpZDozLFxuICAgIH1cbl07XG5cbmZ1bmN0aW9uIEhlYWRlcihwcm9wcykge1xuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGVhZGVyXCI+XG4gICAgICAgICAgICA8aDE+e3Byb3BzLnRpdGxlfTwvaDE+XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG59XG5cbkhlYWRlci5wcm9wVHlwZXMgPSB7XG4gICAgdGl0bGU6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbn07XG5cbi8vIGZ1bmN0aW9uYWxseSB0aGUgc2FtZSwgd2UgYXJlIHByZXBhcmluZyB0byBiZSBhYmxlIHRvIGFkZCBzdGF0ZSB0byB0aGUgY29tcG9uZW50XG5cbnZhciBDb3VudGVyID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICAgIHByb3BUeXBlczoge1xuICAgICAgICAvLyB0aGlzIGlzIG5vIGxvbmdlciBuZWVkZWRcbiAgICAgICAgLy8gc2NvcmU6IFJlYWN0LlByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgICAgICAgaW5pdGlhbFNjb3JlOiBSZWFjdC5Qcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWRcbiAgICB9LFxuICAgIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzY29yZTogdGhpcy5wcm9wcy5pbml0aWFsU2NvcmUsXG4gICAgICAgIH1cbiAgICB9LFxuICAgIGluY3JlbWVudFNjb3JlOiBmdW5jdGlvbihlKSB7XG4gICAgICAgIC8vIHVuY29tbWVudCBpZiB5b3Ugd2FudCB0byBjaGVjayBvdXQgdGhlIGV2ZW50IGluIHRoZSBjb25zb2xlXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiaW5jcmVtZW50IHNjb3JlXCIsIGUpO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHNjb3JlOiAodGhpcy5zdGF0ZS5zY29yZSArIDEpLFxuICAgICAgICB9KVxuICAgIH0sXG4gICAgZGVjcmVtZW50U2NvcmU6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBzY29yZTogKHRoaXMuc3RhdGUuc2NvcmUgLSAxKSxcbiAgICAgICAgfSlcbiAgICB9LFxuICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvdW50ZXJcIj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImNvdW50ZXItYWN0aW9uIGRlY3JlbWVudFwiIG9uQ2xpY2s9e3RoaXMuZGVjcmVtZW50U2NvcmV9PiAtIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY291bnRlci1zY29yZVwiPiB7dGhpcy5zdGF0ZS5zY29yZSB9PC9kaXY+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJjb3VudGVyLWFjdGlvbiBpbmNyZW1lbnRcIiBvbkNsaWNrPXt0aGlzLmluY3JlbWVudFNjb3JlfT4gKyA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn0pO1xuXG4vLyBmdW5jdGlvbiBDb3VudGVyKHByb3BzKSB7fSAtIHRoaXMgY2FuIGJlIHJlbW92ZWRcblxuLy8gQ291bnRlci5wcm9wVHlwZXMgPSB7fSAtIHRoaXMgY2FuIGJlIHJlbW92ZWRcblxuZnVuY3Rpb24gUGxheWVyKHByb3BzKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwbGF5ZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGxheWVyLW5hbWVcIj5cbiAgICAgICAgICAgICAgICB7cHJvcHMubmFtZX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwbGF5ZXItc2NvcmVcIj5cbiAgICAgICAgICAgICAgICA8Q291bnRlciBpbml0aWFsU2NvcmU9e3Byb3BzLnNjb3JlfS8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn1cblxuUGxheWVyLnByb3BUeXBlcyA9IHtcbiAgICBuYW1lOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgc2NvcmU6IFJlYWN0LlByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbn1cblxuZnVuY3Rpb24gQXBwbGljYXRpb24ocHJvcHMpIHtcbiAgICByZXR1cm4oXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2NvcmVib2FyZFwiPlxuICAgICAgICAgICAgPEhlYWRlciB0aXRsZT17cHJvcHMudGl0bGV9Lz5cblxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwbGF5ZXJzXCI+XG4gICAgICAgICAgICAgICAge3Byb3BzLnBsYXllcnMubWFwKGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDxQbGF5ZXIgbmFtZT17cGxheWVyLm5hbWV9IHNjb3Jle3BsYXllci5zY29yZX0ga2V5PXtwbGF5ZXIuaWR9IC8+XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgKVxufVxuXG5BcHBsaWNhdGlvbi5wcm9wVHlwZXMgPSB7XG4gICAgdGl0bGU6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcsXG4gICAgcGxheWVyOiBSZWFjdC5Qcm9wVHlwZXMuYXJyYXlPZihSZWFjdC5Qcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgICBuYW1lOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgICAgIHNjb3JlOiBSZWFjdC5Qcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gICAgICAgIGlkOiBSZWFjdC5Qcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gICAgfSkpLmlzUmVxdWlyZWQsXG59O1xuXG5BcHBsaWNhdGlvbi5kZWZhdWx0UHJvcHMgPSB7XG4gICAgdGl0bGU6IFwiU2NvcmVib2FyZFwiLFxufTtcblxuUmVhY3RET00ucmVuZGVyKDxBcHBsaWNhdGlvbiBwbGF5ZXJzPXtQTEFZRVJTfS8+LCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFpbmVyJykpO1xuIikpLCBtZHgoImgyIiwgT2JqZWN0LmFzc2lnbih7CiAgICAiaWQiOiAidGhyZWFjdC0xNS1kZXNpZ25pbmctZGF0YS1mbG93IgogIH0sIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDY5OQogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0pLCAiVEhSRUFDVC0xNTogRGVzaWduaW5nIERhdGEgRmxvdyIpLCBtZHgoImg0IiwgT2JqZWN0LmFzc2lnbih7CiAgICAiaWQiOiAidGhyZWFjdC0xNi11bmlkaXJlY3Rpb25hbC1kYXRhLWZsb3ciCiAgfSwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogNzAyCiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSksICJUSFJFQUNULTE2OiBVbmlkaXJlY3Rpb25hbCBEYXRhIEZsb3ciKSwgbWR4KCJwIiwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogNzA1CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgIkl0J3MgY3VtYmVyc29tZSB0byBtYWludGFpbiBTdGF0ZSB3aGVuIGFwcGxpY2F0aW9ucyBzY2FsZS4gV2Ugc2hvdWxkIHRoaW5rIG9mIFN0YXRlIGFzIHRoZSBmb2xsb3dpbmc6IiksIG1keCgib2wiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA3MDYKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCBtZHgoImxpIiwgewogICAgcGFyZW50TmFtZTogIm9sIiwKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDcwNwogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJBcHBsaWNhdGlvbiBTdGF0ZSIpLCBtZHgoImxpIiwgewogICAgcGFyZW50TmFtZTogIm9sIiwKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDcwOAogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJDb21wb25lbnQgU3RhdGUiKSksIG1keCgicCIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDcxMAogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJDb21wb25lbnQgc3RhdGUgaXMgbm9ybWFsbHkgbm90IHNoYXJlZCBvciB2aXNpYmxlIG91dHNpZGUgb2YgYSBjb21wb25lbnQuIiksIG1keCgicCIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDcxMQogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJBcHBsaWNhdGlvbiBzdGF0ZSBzaG91bGQgYmUgaGFuZGxlZCBhcyBoaWdoIHVwIGFzIHBvc3NpYmxlLiBXZSBjYW4gcGFzcyBhbGwgdGhlIGNoYW5nZXMgZG93biB1c2luZyBwcm9wZXJ0aWVzLiIpLCBtZHgoInAiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA3MTIKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiQmVjYXVzZSBvZiB0aGUgZGlyZWN0aW9uIG9mIGRhdGEgZmxvdywgcGFyZW50cyBkb24ndCBjYWxsIG1ldGhvZHMgdG8gY2hhbmdlIHRoZSB2YWx1ZXMgb2YgY2hpbGRyZW4uIEluc3RlYWQsIHRoZXkgcGFzcyBkb3duIG5ldyB2YWx1ZXMgdG8gZGVjbGFyZSBob3cgdGhlIGNoaWxkcmVuIHNob3VsZCBiZSByZS1yZW5kZXJlZC4gKEJhY2sgdG8gdGhlIHdob2xlIERlY2xhcmF0aXZlIHByb2dyYW1taW5nISkiKSwgbWR4KCJwIiwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogNzEzCiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgIlRoaXMgUGFyZW50IHBhc3NpbmcgZG93biB0byBDaGlsZCBpcyB3aGF0IHdlIGNhbGwgVW5pZGlyZWN0aW9uYWwgRGF0YSBGbG93LiBJZiBpdCBjaGFuZ2VzIGF0IHRoZSB0b3AsIGl0IHdpbGwgY2FzY2FkZSBkb3duIHRoZSB2aXJ0dWFsIERPTS4iKSwgbWR4KCJwIiwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogNzE0CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgIlNpbmNlIGNoaWxkcmVuIGNhbm5vdCB0YWxrIHRvIHBhcmVudHMsIHdlIGNhbiBpbXBsZW1lbnQgY2FsbGJhY2sgZnVuY3Rpb25zIHRvIHVwZGF0ZSBkYXRhLiBXaGVuIGEgY2hpbGQgd2FudHMgdG8gaW5kaWNhdGUgYSBTdGF0ZSBzaG91bGQgY2hhbmdlLCB0aGV5IHdpbGwgdXNlIHRoZSBjYWxsYmFjay4iKSwgbWR4KCJwIiwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogNzE1CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgIkN1cnJlbnRseSwgd2UgaGF2ZSBTdGF0ZSBpbiBhIG51bWJlciBvZiBwbGFjZXMuIFdlIHdpbGwgY2hhbmdlIHRoaXMgdG8gYmVjb21lIG1vcmUgdW5pZGlyZWN0aW9uYWwuIiksIG1keCgiaDQiLCBPYmplY3QuYXNzaWduKHsKICAgICJpZCI6ICJ0aHJlYWN0LTE3LXJlc3RydWN0dXJpbmctc3RhdGUiCiAgfSwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogNzE2CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSksICJUSFJFQUNULTE3OiBSZXN0cnVjdHVyaW5nIFN0YXRlIiksIG1keCgicCIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDcxOQogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJBdCB0aGUgbW9tZW50LCB3ZSBoYXZlIG9uZSBTdGF0ZS4gT3VyIGNvdW50ZXIgY29tcG9uZW50LiBIb3dldmVyLCBhcyB1c2VmdWwgYXMgaXQgaGFzIGJlZW4gdG8gc2hvdyBob3cgU3RhdGVzIHdvcmsgYnkgdXNpbmcgY291bnRlciwgdGhlIFN0YXRlIG9mIHRoZSBjb3VudGVyIGlzIHJlYWxseSBhIHN0YXRlIG9mIGEgUGxheWVyIFNjb3JlLiIpLCBtZHgoInAiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA3MjAKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiV2UncmUgZ29pbmcgdG8gcmVsb2NhdGUgdGhlIHN0YXRlIHVwIHRvIHRoZSBBcHBsaWNhdGlvbi4iKSwgbWR4KCJ1bCIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDcyMQogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sIG1keCgibGkiLCB7CiAgICBwYXJlbnROYW1lOiAidWwiLAogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogNzIyCiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgImltcGxlbWVudCBiYWNrIHRoZSBDb3VudGVyIGZ1bmN0aW9uIiksIG1keCgibGkiLCB7CiAgICBwYXJlbnROYW1lOiAidWwiLAogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogNzIzCiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgIm9uQ2xpY2sgaGFuZGxlcnMgcmVtb3ZlZCIpLCBtZHgoImxpIiwgewogICAgcGFyZW50TmFtZTogInVsIiwKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDcyNAogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJBcHBsaWNhdGlvbiBpcyBnb2luZyB0byBiZWNvbWUgdGhlIHN0YXRlZnVsIGNvbXBvbmVudCIpKSwgbWR4KCJwcmUiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA3MjYKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCBtZHgoImNvZGUiLCBPYmplY3QuYXNzaWduKHsKICAgIHBhcmVudE5hbWU6ICJwcmUiCiAgfSwgewogICAgImNsYXNzTmFtZSI6ICJsYW5ndWFnZS1qYXZhc2NyaXB0IgogIH0sIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDcyNgogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0pLCAibGV0IFBMQVlFUlMgPSBbXG4gICAge1xuICAgICAgICBuYW1lOiBcIkRlbm5pc1wiLFxuICAgICAgICBzY29yZTogMzMsXG4gICAgICAgIGlkOjEsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6IFwiQmVuXCIsXG4gICAgICAgIHNjb3JlOiAzNCxcbiAgICAgICAgaWQ6MixcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogXCJDbGFyayBGcm9tIEluVmlzaW9uXCIsXG4gICAgICAgIHNjb3JlOiAxMixcbiAgICAgICAgaWQ6MyxcbiAgICB9XG5dO1xuXG5mdW5jdGlvbiBIZWFkZXIocHJvcHMpIHtcbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhlYWRlclwiPlxuICAgICAgICAgICAgPGgxPntwcm9wcy50aXRsZX08L2gxPlxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufVxuXG5IZWFkZXIucHJvcFR5cGVzID0ge1xuICAgIHRpdGxlOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG59O1xuXG5mdW5jdGlvbiBDb3VudGVyKHByb3BzKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb3VudGVyXCI+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImNvdW50ZXItYWN0aW9uIGRlY3JlbWVudFwiPiAtIDwvYnV0dG9uPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb3VudGVyLXNjb3JlXCI+IHtwcm9wcy5zY29yZSB9PC9kaXY+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImNvdW50ZXItYWN0aW9uIGluY3JlbWVudFwiPiArIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufVxuXG5Db3VudGVyLnByb3BUeXBlcyA9IHtcbiAgICBzY29yZTogUmVhY3QuUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxufVxuXG5mdW5jdGlvbiBQbGF5ZXIocHJvcHMpIHtcbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBsYXllclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwbGF5ZXItbmFtZVwiPlxuICAgICAgICAgICAgICAgIHtwcm9wcy5uYW1lfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBsYXllci1zY29yZVwiPlxuICAgICAgICAgICAgICAgIDxDb3VudGVyIHNjb3JlPXtwcm9wcy5zY29yZX0vPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG59XG5cblBsYXllci5wcm9wVHlwZXMgPSB7XG4gICAgbmFtZTogUmVhY3QuUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgIHNjb3JlOiBSZWFjdC5Qcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG59XG5cbi8vIGZ1bmN0aW9uIEFwcGxpY2F0aW9uKHByb3BzKSB7fSAtIG5vdyB0aGlzIGlzIHJlbW92ZWRcbi8vIHByb3BzIG1vdmVkIGludG8gdGhlIGNsYXNzXG5cbnZhciBBcHBsaWNhdGlvbiA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgICBwcm9wVHlwZXM6IHtcbiAgICAgICAgdGl0bGU6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgIGluaXRpYWxQbGF5ZXJzOiBSZWFjdC5Qcm9wVHlwZXMuYXJyYXlPZihSZWFjdC5Qcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgICAgICAgbmFtZTogUmVhY3QuUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgICAgICAgICAgc2NvcmU6IFJlYWN0LlByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgICAgICAgICAgIGlkOiBSZWFjdC5Qcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gICAgICAgIH0pKS5pc1JlcXVpcmVkLFxuICAgIH0sXG5cbiAgICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGl0bGU6IFwiU2NvcmVib2FyZFwiLFxuICAgICAgICB9XG4gICAgfSxcbiAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcGxheWVyczogdGhpcy5wcm9wcy5pbml0aWFsUGxheWVycyxcbiAgICAgICAgfTtcbiAgICB9LFxuXG4gICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzY29yZWJvYXJkXCI+XG4gICAgICAgICAgICAgICAgPEhlYWRlciB0aXRsZT17dGhpcy5wcm9wcy50aXRsZX0vPlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwbGF5ZXJzXCI+XG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLnBsYXllcnMubWFwKGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiA8UGxheWVyIG5hbWU9e3BsYXllci5uYW1lfSBzY29yZXtwbGF5ZXIuc2NvcmV9IGtleT17cGxheWVyLmlkfSAvPlxuICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn0pO1xuXG4vLyB0aGlzIGlzIGFsc28gcmVtb3ZlZFxuLy8gQXBwbGljYXRpb24uZGVmYXVsdFByb3BzID0ge1xuLy8gIHRpdGxlOiBcIlNjb3JlYm9hcmRcIixcbi8vIH07XG5cblJlYWN0RE9NLnJlbmRlcig8QXBwbGljYXRpb24gaW50aWFsUGxheWVycz17UExBWUVSU30vPiwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRhaW5lcicpKTtcbiIpKSwgbWR4KCJoNCIsIE9iamVjdC5hc3NpZ24oewogICAgImlkIjogInRocmVhY3QtMTgtY29tbXVuaWNhdGluZy1ldmVudHMiCiAgfSwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogODM2CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSksICJUSFJFQUNULTE4OiBDb21tdW5pY2F0aW5nIEV2ZW50cyIpLCBtZHgoInAiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA4MzkKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiV2Ugbm93IG5lZWQgdG8gaW1wbGVtZW50IHRoZXNlIGNhbGxiYWNrIGZ1bmN0aW9ucyBzbyB0aGF0IHdlIGNhbiBjaGFuZ2Ugb3VyIGNvdW50ZXIuIiksIG1keCgidWwiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA4NDAKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCBtZHgoImxpIiwgewogICAgcGFyZW50TmFtZTogInVsIiwKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDg0MQogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJyZWltcGxlbWVudCB0aGUgb25DbGljayBmdW5jdGlvbiIpLCBtZHgoImxpIiwgewogICAgcGFyZW50TmFtZTogInVsIiwKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDg0MgogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJ3ZSBhZGQgb25DaGFuZ2UgZnVuY3Rpb25zIHRvIHBhc3MgZGF0YSB1cCB0aGUgdHJlZSIpLCBtZHgoImxpIiwgewogICAgcGFyZW50TmFtZTogInVsIiwKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDg0MwogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJhdCB0aGUgQXBwbGljYXRpb24gbGV2ZWwgd2hlcmUgcGxheWVyIGlzIGNhbGxlZCwgd2UgY2FuIGNhbGwgdGhlIGZ1bmN0aW9uIGJ1dCB3ZSBkbyBuZWVkIHRvIC5iaW5kKHRoaXMpIGZvciB0aGUgcGFydGljdWxhciBpbnN0YW5jZSBzaW5jZSBpdCBpcyBjYWxsZWQgb24gYW4gYXJyYXkiKSwgbWR4KCJsaSIsIHsKICAgIHBhcmVudE5hbWU6ICJ1bCIsCiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA4NDQKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAidG8ga25vdyB3aGljaCBwbGF5ZXIgc2NvcmUgdG8gdXBkYXRlLCB3ZSB1c2UgdGhlIG1hcCBmdW5jdGlvbidzIHNlY29uZCBwYXJhbWV0ZXIgd2hpY2ggd2lsbCBwYXNzIGFuIGluZGV4LiBUaGlzIHdlIGNhbiBjb250aW51ZSBwYXNzaW5nIHRvIGxldCB0aGUgZnVuY3Rpb24ga25vdyB3aGljaCBzY29yZSB0byBjaGFuZ2UuIC0gQUdBSU4sIE1BS0UgU1VSRSBZT1UgQklORCBTSU5DRSBXRSBQQVNTIEFOIEFOT04gRlVOQyIpLCBtZHgoImxpIiwgewogICAgcGFyZW50TmFtZTogInVsIiwKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDg0NQogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJZb3UgY2FuIHZlcmlmeSB0aGF0IHRoZSBzY29yZSBpcyBiZWluZyB0cmFja2VkIGJ5IHRoZSBBcHBsaWNhdGlvbiBhbmQgbm90IHRoZSBDb3VudGVyIGJ5IGluc3BlY3RpbmcgdGhpcyBpbiB0aGUgY29uc29sZSBhbmQgY2hlY2tpbmcgb3V0IHRoZSB2YWx1ZXMgb2YgdGhlIEFwcGxpY2F0aW9uLiIpKSwgbWR4KCJwcmUiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA4NDcKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCBtZHgoImNvZGUiLCBPYmplY3QuYXNzaWduKHsKICAgIHBhcmVudE5hbWU6ICJwcmUiCiAgfSwgewogICAgImNsYXNzTmFtZSI6ICJsYW5ndWFnZS1qYXZhc2NyaXB0IgogIH0sIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDg0NwogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0pLCAibGV0IFBMQVlFUlMgPSBbXG4gICAge1xuICAgICAgICBuYW1lOiBcIkRlbm5pc1wiLFxuICAgICAgICBzY29yZTogMzMsXG4gICAgICAgIGlkOjEsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6IFwiQmVuXCIsXG4gICAgICAgIHNjb3JlOiAzNCxcbiAgICAgICAgaWQ6MixcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogXCJDbGFyayBGcm9tIEluVmlzaW9uXCIsXG4gICAgICAgIHNjb3JlOiAxMixcbiAgICAgICAgaWQ6MyxcbiAgICB9XG5dO1xuXG5mdW5jdGlvbiBIZWFkZXIocHJvcHMpIHtcbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhlYWRlclwiPlxuICAgICAgICAgICAgPGgxPntwcm9wcy50aXRsZX08L2gxPlxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufVxuXG5IZWFkZXIucHJvcFR5cGVzID0ge1xuICAgIHRpdGxlOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG59O1xuXG5mdW5jdGlvbiBDb3VudGVyKHByb3BzKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb3VudGVyXCI+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImNvdW50ZXItYWN0aW9uIGRlY3JlbWVudFwiIG9uQ2xpY2s9e2Z1bmN0aW9uKCkge3Byb3BzLm9uQ2hhbmdlKC0xKX19PiAtIDwvYnV0dG9uPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb3VudGVyLXNjb3JlXCI+IHtwcm9wcy5zY29yZSB9PC9kaXY+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImNvdW50ZXItYWN0aW9uIGluY3JlbWVudFwiIG9uQ2xpY2s9e2Z1bmN0aW9uKCkge3Byb3BzLm9uQ2hhbmdlKDEpfX0+ICsgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG59XG5cbkNvdW50ZXIucHJvcFR5cGVzID0ge1xuICAgIHNjb3JlOiBSZWFjdC5Qcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gICAgb25DaGFuZ2U6IFJlYWN0LlByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG59XG5cbmZ1bmN0aW9uIFBsYXllcihwcm9wcykge1xuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGxheWVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBsYXllci1uYW1lXCI+XG4gICAgICAgICAgICAgICAge3Byb3BzLm5hbWV9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGxheWVyLXNjb3JlXCI+XG4gICAgICAgICAgICAgICAgPENvdW50ZXIgc2NvcmU9e3Byb3BzLnNjb3JlfSBvbkNoYW5nZT17cHJvcHMub25TY29yZUNoYW5nZX0vPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG59XG5cblBsYXllci5wcm9wVHlwZXMgPSB7XG4gICAgbmFtZTogUmVhY3QuUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgIHNjb3JlOiBSZWFjdC5Qcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gICAgb25TY29yZUNoYW5nZTogUmVhY3QuUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbn1cblxudmFyIEFwcGxpY2F0aW9uID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICAgIHByb3BUeXBlczoge1xuICAgICAgICB0aXRsZTogUmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgICAgaW5pdGlhbFBsYXllcnM6IFJlYWN0LlByb3BUeXBlcy5hcnJheU9mKFJlYWN0LlByb3BUeXBlcy5zaGFwZSh7XG4gICAgICAgICAgICBuYW1lOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgICAgICAgICBzY29yZTogUmVhY3QuUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuICAgICAgICAgICAgaWQ6IFJlYWN0LlByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgICAgICAgfSkpLmlzUmVxdWlyZWQsXG4gICAgfSxcblxuICAgIGdldERlZmF1bHRQcm9wczogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0aXRsZTogXCJTY29yZWJvYXJkXCIsXG4gICAgICAgIH1cbiAgICB9LFxuICAgIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwbGF5ZXJzOiB0aGlzLnByb3BzLmluaXRpYWxQbGF5ZXJzLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgb25TY29yZUNoYW5nZTogZnVuY3Rpb24oaW5kZXgsIGRlbHRhKSB7XG4gICAgICAgIC8vIHVuY29tbWVudCB0aGlzIHRvIGRvdWJsZSBjaGVjayB2YWx1ZSBjaGFuZ2Ugb24gdGhlIGFwcGxpY2F0aW9uXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdvblNjb3JlQ2hhbmdlJywgaW5kZXgsIGRlbHRhKTtcbiAgICAgICAgdGhpcy5zdGF0ZS5wbGF5ZXJzW2luZGV4XS5zY29yZSArPSBkZWx0YTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh0aGlzLnN0YXRlKTtcbiAgICB9LFxuXG4gICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzY29yZWJvYXJkXCI+XG4gICAgICAgICAgICAgICAgPEhlYWRlciB0aXRsZT17dGhpcy5wcm9wcy50aXRsZX0vPlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwbGF5ZXJzXCI+XG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLnBsYXllcnMubWFwKGZ1bmN0aW9uIChwbGF5ZXIsIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxQbGF5ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblNjb3JlQ2hhbmdlPXtmdW5jdGlvbihkZWx0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU2NvcmVDaGFuZ2UoaW5kZXgsZGVsdGEpfS5iaW5kKHRoaXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e3BsYXllci5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3Jle3BsYXllci5zY29yZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e3BsYXllci5pZH0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59KTtcblxuUmVhY3RET00ucmVuZGVyKDxBcHBsaWNhdGlvbiBpbnRpYWxQbGF5ZXJzPXtQTEFZRVJTfS8+LCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFpbmVyJykpO1xuIikpLCBtZHgoImg0IiwgT2JqZWN0LmFzc2lnbih7CiAgICAiaWQiOiAidGhyZWFjdC0xOS1idWlsZGluZy10aGUtc3RhdGlzdGljcy1jb21wb25lbnQiCiAgfSwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogOTY1CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSksICJUSFJFQUNULTE5OiBCdWlsZGluZyB0aGUgU3RhdGlzdGljcyBDb21wb25lbnQiKSwgbWR4KCJwIiwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogOTY4CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgIlRoZSBwcm9ibGVtIHdpdGgga2VlcGluZyB0aGUgc2NvcmUgbG9jYWxseSBpcyB0aGF0IGlmIHdhbnRlZCB0byBkbyBzb21ldGhpbmcgKGVnIHNob3cgdG8gdG90YWwgc2NvcmUpIHdlIHdvdWxkbid0IGhhdmUgaGFkIGFjY2VzcyB0byB0aGF0LiIpLCBtZHgoInAiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA5NjkKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiTGV0J3Mgc2hvdyB0aGF0IGJ5IGNyZWF0aW5nIHNvbWUgc3RhdHMuIiksIG1keCgidWwiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA5NzAKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCBtZHgoImxpIiwgewogICAgcGFyZW50TmFtZTogInVsIiwKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDk3MQogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJXaGVuIGNyZWF0aW5nIHRhYmxlIGVsZW1lbnRzLCBtYWtlIHN1cmUgeW91IGFkZCBpbiB0aGUgdGJvZHkgdGFnIHRvbyEgT3RoZXJ3aXNlLCB0aGlzIHdpbGwgY2F1c2UgaXNzdWVzIGJldHdlZW4gdGhlIERPTSBhbmQgVmlydHVhbCBET00uIikpLCBtZHgoInByZSIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDk3MwogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sIG1keCgiY29kZSIsIE9iamVjdC5hc3NpZ24oewogICAgcGFyZW50TmFtZTogInByZSIKICB9LCB7CiAgICAiY2xhc3NOYW1lIjogImxhbmd1YWdlLWphdmFzY3JpcHQiCiAgfSwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogOTczCiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSksICJsZXQgUExBWUVSUyA9IFtcbiAgICB7XG4gICAgICAgIG5hbWU6IFwiRGVubmlzXCIsXG4gICAgICAgIHNjb3JlOiAzMyxcbiAgICAgICAgaWQ6MSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogXCJCZW5cIixcbiAgICAgICAgc2NvcmU6IDM0LFxuICAgICAgICBpZDoyLFxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiBcIkNsYXJrIEZyb20gSW5WaXNpb25cIixcbiAgICAgICAgc2NvcmU6IDEyLFxuICAgICAgICBpZDozLFxuICAgIH1cbl07XG5cbmZ1bmN0aW9uIFN0YXRzKHByb3BzKSB7XG4gICAgLy8geW91IGRvbid0IGhhdmUgdG8gc3RvcmUgaXQsIGJ1dCBpdCdzIGhhbmR5IGZvciBvcmdhbmlzYXRpb25cbiAgICB2YXIgdG90YWxQbGF5ZXJzID0gcHJvcHMucGxheWVycy5sZW5ndGg7XG4gICAgdmFyIHRvdGFsUG9pbnRzID0gcHJvcHMucGxheWVycy5yZWR1Y2UoZnVuY3Rpb24odG90YWwsIHBsYXllcil7XG4gICAgICAgIHJldHVybiB0b3RhbCArIHBsYXllci5zY29yZTtcbiAgICB9LCAwKVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInN0YXRzXCI+XG4gICAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICA8dGQ+UGxheWVyczo8L3RkPlxuICAgICAgICAgICAgICAgICAgICA8dGQ+e3RvdGFsUGxheWVyc308L3RkPlxuICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICA8dGQ+VG90YWwgUG9pbnRzOjwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDx0ZD57dG90YWxQb2ludHN9PC90ZD5cbiAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgPC90YWJsZT5cbiAgICApO1xufVxuXG5TdGF0cy5wcm9wVHlwZXMgPSB7XG4gICAgcGxheWVyczogUmVhY3QuUHJvcFR5cGVzLmFycmF5LmlzUmVxdWlyZWQsXG59O1xuXG5mdW5jdGlvbiBIZWFkZXIocHJvcHMpIHtcbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhlYWRlclwiPlxuICAgICAgICAgICAgPFN0YXRzIC8+XG4gICAgICAgICAgICA8aDE+e3Byb3BzLnRpdGxlfTwvaDE+XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG59XG5cbkhlYWRlci5wcm9wVHlwZXMgPSB7XG4gICAgdGl0bGU6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbn07XG5cbmZ1bmN0aW9uIENvdW50ZXIocHJvcHMpIHtcbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvdW50ZXJcIj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiY291bnRlci1hY3Rpb24gZGVjcmVtZW50XCIgb25DbGljaz17ZnVuY3Rpb24oKSB7cHJvcHMub25DaGFuZ2UoLTEpfX0+IC0gPC9idXR0b24+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvdW50ZXItc2NvcmVcIj4ge3Byb3BzLnNjb3JlIH08L2Rpdj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiY291bnRlci1hY3Rpb24gaW5jcmVtZW50XCIgb25DbGljaz17ZnVuY3Rpb24oKSB7cHJvcHMub25DaGFuZ2UoMSl9fT4gKyA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn1cblxuQ291bnRlci5wcm9wVHlwZXMgPSB7XG4gICAgc2NvcmU6IFJlYWN0LlByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgICBvbkNoYW5nZTogUmVhY3QuUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbn1cblxuZnVuY3Rpb24gUGxheWVyKHByb3BzKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwbGF5ZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGxheWVyLW5hbWVcIj5cbiAgICAgICAgICAgICAgICB7cHJvcHMubmFtZX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwbGF5ZXItc2NvcmVcIj5cbiAgICAgICAgICAgICAgICA8Q291bnRlciBzY29yZT17cHJvcHMuc2NvcmV9IG9uQ2hhbmdlPXtwcm9wcy5vblNjb3JlQ2hhbmdlfS8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn1cblxuUGxheWVyLnByb3BUeXBlcyA9IHtcbiAgICBuYW1lOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgc2NvcmU6IFJlYWN0LlByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgICBvblNjb3JlQ2hhbmdlOiBSZWFjdC5Qcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxufVxuXG52YXIgQXBwbGljYXRpb24gPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gICAgcHJvcFR5cGVzOiB7XG4gICAgICAgIHRpdGxlOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICBpbml0aWFsUGxheWVyczogUmVhY3QuUHJvcFR5cGVzLmFycmF5T2YoUmVhY3QuUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgICAgICAgIG5hbWU6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICAgICAgICAgIHNjb3JlOiBSZWFjdC5Qcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gICAgICAgICAgICBpZDogUmVhY3QuUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuICAgICAgICB9KSkuaXNSZXF1aXJlZCxcbiAgICB9LFxuXG4gICAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRpdGxlOiBcIlNjb3JlYm9hcmRcIixcbiAgICAgICAgfVxuICAgIH0sXG4gICAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBsYXllcnM6IHRoaXMucHJvcHMuaW5pdGlhbFBsYXllcnMsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICBvblNjb3JlQ2hhbmdlOiBmdW5jdGlvbihpbmRleCwgZGVsdGEpIHtcbiAgICAgICAgLy8gdW5jb21tZW50IHRoaXMgdG8gZG91YmxlIGNoZWNrIHZhbHVlIGNoYW5nZSBvbiB0aGUgYXBwbGljYXRpb25cbiAgICAgICAgLy8gY29uc29sZS5sb2coJ29uU2NvcmVDaGFuZ2UnLCBpbmRleCwgZGVsdGEpO1xuICAgICAgICB0aGlzLnN0YXRlLnBsYXllcnNbaW5kZXhdLnNjb3JlICs9IGRlbHRhO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHRoaXMuc3RhdGUpO1xuICAgIH0sXG5cbiAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4oXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNjb3JlYm9hcmRcIj5cbiAgICAgICAgICAgICAgICA8SGVhZGVyIHRpdGxlPXt0aGlzLnByb3BzLnRpdGxlfSBwbGF5ZXJzPXt0aGlzLnN0YXRlLnBsYXllcnN9IC8+XG5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBsYXllcnNcIj5cbiAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUucGxheWVycy5tYXAoZnVuY3Rpb24gKHBsYXllciwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFBsYXllclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uU2NvcmVDaGFuZ2U9e2Z1bmN0aW9uKGRlbHRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25TY29yZUNoYW5nZShpbmRleCxkZWx0YSl9LmJpbmQodGhpcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT17cGxheWVyLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcmV7cGxheWVyLnNjb3JlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17cGxheWVyLmlkfSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn0pO1xuXG5SZWFjdERPTS5yZW5kZXIoPEFwcGxpY2F0aW9uIGludGlhbFBsYXllcnM9e1BMQVlFUlN9Lz4sIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250YWluZXInKSk7XG4iKSksIG1keCgiaDQiLCBPYmplY3QuYXNzaWduKHsKICAgICJpZCI6ICJ0aHJlYWN0LTIwLWFkZGluZy1wbGF5ZXJzLXRvLXRoZS1zY29yZWJvYXJkIgogIH0sIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDExMTkKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9KSwgIlRIUkVBQ1QtMjA6IEFkZGluZyBQbGF5ZXJzIHRvIHRoZSBTY29yZWJvYXJkIiksIG1keCgicCIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDExMjIKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiSW4gUmVhY3QsIFN0YXRlcyBhcmUgb3VyIHJlc3BvbnNpYmlsaXR5LiBXaGF0IGhhcHBlbnMgaWYgd2UgbmVlZCB0byBhZGQgcGxheWVycz8iKSwgbWR4KCJ1bCIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDExMjMKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCBtZHgoImxpIiwgewogICAgcGFyZW50TmFtZTogInVsIiwKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDExMjQKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiZm9ybSB2YWx1ZXMgbmVlZCB0byBiZSBoYW5kbGVkIGRpZmZlcmVudGx5IGR1ZSB0byB0aGUgdW5pZGlyZWN0aW9uYWwgZmxvdyBhbmQgcmUtcmVuZGVyaW5nLiAtIHRvIHVwZGF0ZSBTdGF0ZSwgd2UgbmVlZCBhbiBvbkNoYW5nZSBoYW5kbGVyIikpLCBtZHgoInByZSIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDExMjYKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCBtZHgoImNvZGUiLCBPYmplY3QuYXNzaWduKHsKICAgIHBhcmVudE5hbWU6ICJwcmUiCiAgfSwgewogICAgImNsYXNzTmFtZSI6ICJsYW5ndWFnZS1qYXZhc2NyaXB0IgogIH0sIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDExMjYKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9KSwgImxldCBQTEFZRVJTID0gW1xuICAgIHtcbiAgICAgICAgbmFtZTogXCJEZW5uaXNcIixcbiAgICAgICAgc2NvcmU6IDMzLFxuICAgICAgICBpZDoxLFxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiBcIkJlblwiLFxuICAgICAgICBzY29yZTogMzQsXG4gICAgICAgIGlkOjIsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6IFwiQ2xhcmsgRnJvbSBJblZpc2lvblwiLFxuICAgICAgICBzY29yZTogMTIsXG4gICAgICAgIGlkOjMsXG4gICAgfVxuXTtcblxudmFyIG5leHRJZCA9IDQ7XG5cbnZhciBBZGRQbGF5ZXJGb3JtID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICAgIHByb3BUeXBlczoge1xuICAgICAgICBvbkFkZDogUmVhY3QuUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICB9LFxuICAgIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiBcIlwiXG4gICAgICAgIH07XG4gICAgfSxcbiAgICBvbk5hbWVDaGFuZ2U6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgLy8gdW5jb21tZW50IHRvIHNlZSB0aGUgY2hhbmdlcyBvbiB0YXJnZXQgdmFsdWVcbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJvbk5hbWVDaGFuZ2VcIiwgZS50YXJnZXQudmFsdWUpO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtuYW1lOiBlLnRhcmdldC52YWx1ZX0pO1xuICAgIH0sXG4gICAgb25TdWJtaXQ6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIHRoaXMucHJvcHMub25BZGQodGhpcy5zdGF0ZS5uYW1lKTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7bmFtZTogXCJcIn0pO1xuICAgIH0sXG4gICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWRkLXBsYXllci1mb3JtXCI+XG4gICAgICAgICAgICAgICAgPGZvcm0gb25TdWJtaXQ9e3RoaXMub25TdWJtaXR9PlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiB2YWx1ZT17dGhpcy5zdGF0ZS5uYW1lfSBvbkNoYW5nZT17dGhpcy5vbk5hbWVDaGFuZ2V9IC8+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwic3VibWl0XCIgdmFsdWU9XCJBZGQgUGxheWVyXCIgLz5cbiAgICAgICAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59KTtcblxuZnVuY3Rpb24gU3RhdHMocHJvcHMpIHtcbiAgICAvLyB5b3UgZG9uJ3QgaGF2ZSB0byBzdG9yZSBpdCwgYnV0IGl0J3MgaGFuZHkgZm9yIG9yZ2FuaXNhdGlvblxuICAgIHZhciB0b3RhbFBsYXllcnMgPSBwcm9wcy5wbGF5ZXJzLmxlbmd0aDtcbiAgICB2YXIgdG90YWxQb2ludHMgPSBwcm9wcy5wbGF5ZXJzLnJlZHVjZShmdW5jdGlvbih0b3RhbCwgcGxheWVyKXtcbiAgICAgICAgcmV0dXJuIHRvdGFsICsgcGxheWVyLnNjb3JlO1xuICAgIH0sIDApXG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8dGFibGUgY2xhc3NOYW1lPVwic3RhdHNcIj5cbiAgICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgIDx0ZD5QbGF5ZXJzOjwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDx0ZD57dG90YWxQbGF5ZXJzfTwvdGQ+XG4gICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgIDx0ZD5Ub3RhbCBQb2ludHM6PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPHRkPnt0b3RhbFBvaW50c308L3RkPlxuICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICA8L3RhYmxlPlxuICAgICk7XG59XG5cblN0YXRzLnByb3BUeXBlcyA9IHtcbiAgICBwbGF5ZXJzOiBSZWFjdC5Qcm9wVHlwZXMuYXJyYXkuaXNSZXF1aXJlZCxcbn07XG5cbmZ1bmN0aW9uIEhlYWRlcihwcm9wcykge1xuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGVhZGVyXCI+XG4gICAgICAgICAgICA8U3RhdHMgLz5cbiAgICAgICAgICAgIDxoMT57cHJvcHMudGl0bGV9PC9oMT5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn1cblxuSGVhZGVyLnByb3BUeXBlcyA9IHtcbiAgICB0aXRsZTogUmVhY3QuUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxufTtcblxuZnVuY3Rpb24gQ291bnRlcihwcm9wcykge1xuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY291bnRlclwiPlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJjb3VudGVyLWFjdGlvbiBkZWNyZW1lbnRcIiBvbkNsaWNrPXtmdW5jdGlvbigpIHtwcm9wcy5vbkNoYW5nZSgtMSl9fT4gLSA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY291bnRlci1zY29yZVwiPiB7cHJvcHMuc2NvcmUgfTwvZGl2PlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJjb3VudGVyLWFjdGlvbiBpbmNyZW1lbnRcIiBvbkNsaWNrPXtmdW5jdGlvbigpIHtwcm9wcy5vbkNoYW5nZSgxKX19PiArIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufVxuXG5Db3VudGVyLnByb3BUeXBlcyA9IHtcbiAgICBzY29yZTogUmVhY3QuUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuICAgIG9uQ2hhbmdlOiBSZWFjdC5Qcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxufVxuXG5mdW5jdGlvbiBQbGF5ZXIocHJvcHMpIHtcbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBsYXllclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwbGF5ZXItbmFtZVwiPlxuICAgICAgICAgICAgICAgIDxhIGNsYXNzTmFtZT1cInJlbW92ZS1wbGF5ZXJcIiBvbkNsaWNrPXtwcm9wcy5vblJlbW92ZX0+eDwvYT5cbiAgICAgICAgICAgICAgICB7cHJvcHMubmFtZX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwbGF5ZXItc2NvcmVcIj5cbiAgICAgICAgICAgICAgICA8Q291bnRlciBzY29yZT17cHJvcHMuc2NvcmV9IG9uQ2hhbmdlPXtwcm9wcy5vblNjb3JlQ2hhbmdlfS8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn1cblxuUGxheWVyLnByb3BUeXBlcyA9IHtcbiAgICBuYW1lOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgc2NvcmU6IFJlYWN0LlByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgICBvblNjb3JlQ2hhbmdlOiBSZWFjdC5Qcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgIG9uUmVtb3ZlOiBSZWFjdC5Qcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxufVxuXG52YXIgQXBwbGljYXRpb24gPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gICAgcHJvcFR5cGVzOiB7XG4gICAgICAgIHRpdGxlOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICBpbml0aWFsUGxheWVyczogUmVhY3QuUHJvcFR5cGVzLmFycmF5T2YoUmVhY3QuUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgICAgICAgIG5hbWU6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICAgICAgICAgIHNjb3JlOiBSZWFjdC5Qcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gICAgICAgICAgICBpZDogUmVhY3QuUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuICAgICAgICB9KSkuaXNSZXF1aXJlZCxcbiAgICB9LFxuXG4gICAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRpdGxlOiBcIlNjb3JlYm9hcmRcIixcbiAgICAgICAgfVxuICAgIH0sXG4gICAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBsYXllcnM6IHRoaXMucHJvcHMuaW5pdGlhbFBsYXllcnMsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICBvblNjb3JlQ2hhbmdlOiBmdW5jdGlvbihpbmRleCwgZGVsdGEpIHtcbiAgICAgICAgLy8gdW5jb21tZW50IHRoaXMgdG8gZG91YmxlIGNoZWNrIHZhbHVlIGNoYW5nZSBvbiB0aGUgYXBwbGljYXRpb25cbiAgICAgICAgLy8gY29uc29sZS5sb2coJ29uU2NvcmVDaGFuZ2UnLCBpbmRleCwgZGVsdGEpO1xuICAgICAgICB0aGlzLnN0YXRlLnBsYXllcnNbaW5kZXhdLnNjb3JlICs9IGRlbHRhO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHRoaXMuc3RhdGUpO1xuICAgIH0sXG4gICAgb25QbGF5ZXJSZW1vdmU6IGZ1bmN0aW9uKGluZGV4KSB7XG4gICAgICAgIC8vIHVuY29tbWVudCB0byBzZWUgdGhlIHBsYXllciBpbmRleFxuICAgICAgICAvLyBjb25zb2xlLmxvZygncmVtb3ZlJywgaW5kZXgpO1xuICAgICAgICB0aGlzLnN0YXRlLnBsYXllcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgc2V0U3RhdGUodGhpcy5zdGF0ZSk7XG4gICAgfSxcbiAgICBvblBsYXllckFkZDogZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIHVuY29tbWVudCB0byBzZWUgbmV3IHBsYXllciBuYW1lXG4gICAgICAgIC8vY29uc29sZS5sb2coJ1BsYXllciBhZGRlZDonLCBuYW1lKTtcbiAgICAgICAgdGhpcy5zdGF0ZS5wbGF5ZXJzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgIHNjb3JlOiAwLFxuICAgICAgICAgICAgaWQ6IG5leHRJZCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLypcbiAgICAgICAgICAgIE5PVEU6IGluIHNvbWV0aGluZyBsaWtlIFJlZHV4LCB3ZSBkb24ndCB1cGRhdGUgdGhlIHN0YXRlIGl0c2VsZiwgd2UgYWN0dWFsbHkgY3JlYXRlIGEgYnJhbmQgbmV3IHN0YXRlIG9iamVjdFxuICAgICAgICAqL1xuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUodGhpcy5zdGF0ZSk7XG4gICAgICAgIG5leHRJZCArPSAxO1xuICAgIH07XG4gICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzY29yZWJvYXJkXCI+XG4gICAgICAgICAgICAgICAgPEhlYWRlciB0aXRsZT17dGhpcy5wcm9wcy50aXRsZX0gcGxheWVycz17dGhpcy5zdGF0ZS5wbGF5ZXJzfSAvPlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwbGF5ZXJzXCI+XG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLnBsYXllcnMubWFwKGZ1bmN0aW9uIChwbGF5ZXIsIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxQbGF5ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblNjb3JlQ2hhbmdlPXtmdW5jdGlvbihkZWx0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU2NvcmVDaGFuZ2UoaW5kZXgsZGVsdGEpfS5iaW5kKHRoaXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVtb3ZlPXtmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vblJlbW92ZVBsYXllcihpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtwbGF5ZXIubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29yZXtwbGF5ZXIuc2NvcmV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtwbGF5ZXIuaWR9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcykpfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxBZGRQbGF5ZXJGb3JtIG9uQWRkPXt0aGlzLm9uUGxheWVyQWRkfSAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufSk7XG5cblJlYWN0RE9NLnJlbmRlcig8QXBwbGljYXRpb24gaW50aWFsUGxheWVycz17UExBWUVSU30vPiwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRhaW5lcicpKTtcbiIpKSwgbWR4KCJoMiIsIE9iamVjdC5hc3NpZ24oewogICAgImlkIjogInRocmVhY3QtMjEtY29tcG9uZW50LWxpZmVjeWxlIgogIH0sIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDEzMzQKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9KSwgIlRIUkVBQ1QtMjE6IENvbXBvbmVudCBMaWZlY3lsZSIpLCBtZHgoImg0IiwgT2JqZWN0LmFzc2lnbih7CiAgICAiaWQiOiAidGhyZWFjdC0yMi1kZXNpZ25pbmctYS1zdG9wd2F0Y2giCiAgfSwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMTMzNwogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0pLCAiVEhSRUFDVC0yMjogRGVzaWduaW5nIGEgU3RvcHdhdGNoIiksIG1keCgicCIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDEzNDAKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiTGV0J3MgYnVpbGQgYSBtb3JlIGFkdmFuY2VkIGNvbXBvbmVudC4gQSBzdG9wd2F0Y2guIiksIG1keCgicCIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDEzNDEKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiV2Ugd2lsbCBuZWVkIGEgdGltZXIgaW4gc2Vjb25kcy4gV2Ugd2lsbCBoYXZlIGEgYnV0dG9uIHRvIHN0b3AgYW5kIHN0YXJ0IHRoZSB0aW1lci4iKSwgbWR4KCJ1bCIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDEzNDIKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCBtZHgoImxpIiwgewogICAgcGFyZW50TmFtZTogInVsIiwKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDEzNDMKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiVGhlIGNsb2NrIHdpbGwgY29udGludWUgdGlja2luZywgc28gdGhpcyBwcmVzZW50cyB0aGUgdW5pcXVlIGNoYWxsZW5nZSBvZiBjb250aW51YWxseSBjaGFuZ2luZyBTdGF0ZS4iKSksIG1keCgicHJlIiwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMTM0NQogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sIG1keCgiY29kZSIsIE9iamVjdC5hc3NpZ24oewogICAgcGFyZW50TmFtZTogInByZSIKICB9LCB7CiAgICAiY2xhc3NOYW1lIjogImxhbmd1YWdlLWphdmFzY3JpcHQiCiAgfSwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMTM0NQogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0pLCAibGV0IFBMQVlFUlMgPSBbXG4gICAge1xuICAgICAgICBuYW1lOiBcIkRlbm5pc1wiLFxuICAgICAgICBzY29yZTogMzMsXG4gICAgICAgIGlkOjEsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6IFwiQmVuXCIsXG4gICAgICAgIHNjb3JlOiAzNCxcbiAgICAgICAgaWQ6MixcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogXCJDbGFyayBGcm9tIEluVmlzaW9uXCIsXG4gICAgICAgIHNjb3JlOiAxMixcbiAgICAgICAgaWQ6MyxcbiAgICB9XG5dO1xuXG52YXIgbmV4dElkID0gNDtcblxudmFyIFN0b3BXYXRjaCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdG9wd2F0Y2hcIj5cbiAgICAgICAgICAgICAgICA8aDI+U3RvcHdhdGNoPC9oMj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInN0b3B3YXRjaC10aW1lXCI+MDwvZGl2PlxuICAgICAgICAgICAgICAgIDxidXR0b24+U3RhcnQ8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uPlJlc2V0PC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59KTtcblxudmFyIEFkZFBsYXllckZvcm0gPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gICAgcHJvcFR5cGVzOiB7XG4gICAgICAgIG9uQWRkOiBSZWFjdC5Qcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgIH0sXG4gICAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6IFwiXCJcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIG9uTmFtZUNoYW5nZTogZnVuY3Rpb24oZSkge1xuICAgICAgICAvLyB1bmNvbW1lbnQgdG8gc2VlIHRoZSBjaGFuZ2VzIG9uIHRhcmdldCB2YWx1ZVxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcIm9uTmFtZUNoYW5nZVwiLCBlLnRhcmdldC52YWx1ZSk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe25hbWU6IGUudGFyZ2V0LnZhbHVlfSk7XG4gICAgfSxcbiAgICBvblN1Ym1pdDogZnVuY3Rpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgdGhpcy5wcm9wcy5vbkFkZCh0aGlzLnN0YXRlLm5hbWUpO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtuYW1lOiBcIlwifSk7XG4gICAgfSxcbiAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhZGQtcGxheWVyLWZvcm1cIj5cbiAgICAgICAgICAgICAgICA8Zm9ybSBvblN1Ym1pdD17dGhpcy5vblN1Ym1pdH0+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIHZhbHVlPXt0aGlzLnN0YXRlLm5hbWV9IG9uQ2hhbmdlPXt0aGlzLm9uTmFtZUNoYW5nZX0gLz5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJzdWJtaXRcIiB2YWx1ZT1cIkFkZCBQbGF5ZXJcIiAvPlxuICAgICAgICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn0pO1xuXG5mdW5jdGlvbiBTdGF0cyhwcm9wcykge1xuICAgIC8vIHlvdSBkb24ndCBoYXZlIHRvIHN0b3JlIGl0LCBidXQgaXQncyBoYW5keSBmb3Igb3JnYW5pc2F0aW9uXG4gICAgdmFyIHRvdGFsUGxheWVycyA9IHByb3BzLnBsYXllcnMubGVuZ3RoO1xuICAgIHZhciB0b3RhbFBvaW50cyA9IHByb3BzLnBsYXllcnMucmVkdWNlKGZ1bmN0aW9uKHRvdGFsLCBwbGF5ZXIpe1xuICAgICAgICByZXR1cm4gdG90YWwgKyBwbGF5ZXIuc2NvcmU7XG4gICAgfSwgMClcblxuICAgIHJldHVybiAoXG4gICAgICAgIDx0YWJsZSBjbGFzc05hbWU9XCJzdGF0c1wiPlxuICAgICAgICAgICAgPHRib2R5PlxuICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgPHRkPlBsYXllcnM6PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPHRkPnt0b3RhbFBsYXllcnN9PC90ZD5cbiAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgPHRkPlRvdGFsIFBvaW50czo8L3RkPlxuICAgICAgICAgICAgICAgICAgICA8dGQ+e3RvdGFsUG9pbnRzfTwvdGQ+XG4gICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgIDwvdGFibGU+XG4gICAgKTtcbn1cblxuU3RhdHMucHJvcFR5cGVzID0ge1xuICAgIHBsYXllcnM6IFJlYWN0LlByb3BUeXBlcy5hcnJheS5pc1JlcXVpcmVkLFxufTtcblxuZnVuY3Rpb24gSGVhZGVyKHByb3BzKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoZWFkZXJcIj5cbiAgICAgICAgICAgIDxTdGF0cyAvPlxuICAgICAgICAgICAgPGgxPntwcm9wcy50aXRsZX08L2gxPlxuICAgICAgICAgICAgPFN0b3B3YXRjaCAvPlxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufVxuXG5IZWFkZXIucHJvcFR5cGVzID0ge1xuICAgIHRpdGxlOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG59O1xuXG5mdW5jdGlvbiBDb3VudGVyKHByb3BzKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb3VudGVyXCI+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImNvdW50ZXItYWN0aW9uIGRlY3JlbWVudFwiIG9uQ2xpY2s9e2Z1bmN0aW9uKCkge3Byb3BzLm9uQ2hhbmdlKC0xKX19PiAtIDwvYnV0dG9uPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb3VudGVyLXNjb3JlXCI+IHtwcm9wcy5zY29yZSB9PC9kaXY+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImNvdW50ZXItYWN0aW9uIGluY3JlbWVudFwiIG9uQ2xpY2s9e2Z1bmN0aW9uKCkge3Byb3BzLm9uQ2hhbmdlKDEpfX0+ICsgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG59XG5cbkNvdW50ZXIucHJvcFR5cGVzID0ge1xuICAgIHNjb3JlOiBSZWFjdC5Qcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gICAgb25DaGFuZ2U6IFJlYWN0LlByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG59XG5cbmZ1bmN0aW9uIFBsYXllcihwcm9wcykge1xuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGxheWVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBsYXllci1uYW1lXCI+XG4gICAgICAgICAgICAgICAgPGEgY2xhc3NOYW1lPVwicmVtb3ZlLXBsYXllclwiIG9uQ2xpY2s9e3Byb3BzLm9uUmVtb3ZlfT54PC9hPlxuICAgICAgICAgICAgICAgIHtwcm9wcy5uYW1lfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBsYXllci1zY29yZVwiPlxuICAgICAgICAgICAgICAgIDxDb3VudGVyIHNjb3JlPXtwcm9wcy5zY29yZX0gb25DaGFuZ2U9e3Byb3BzLm9uU2NvcmVDaGFuZ2V9Lz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufVxuXG5QbGF5ZXIucHJvcFR5cGVzID0ge1xuICAgIG5hbWU6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICBzY29yZTogUmVhY3QuUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuICAgIG9uU2NvcmVDaGFuZ2U6IFJlYWN0LlByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgb25SZW1vdmU6IFJlYWN0LlByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG59XG5cbnZhciBBcHBsaWNhdGlvbiA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgICBwcm9wVHlwZXM6IHtcbiAgICAgICAgdGl0bGU6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgIGluaXRpYWxQbGF5ZXJzOiBSZWFjdC5Qcm9wVHlwZXMuYXJyYXlPZihSZWFjdC5Qcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgICAgICAgbmFtZTogUmVhY3QuUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgICAgICAgICAgc2NvcmU6IFJlYWN0LlByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgICAgICAgICAgIGlkOiBSZWFjdC5Qcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gICAgICAgIH0pKS5pc1JlcXVpcmVkLFxuICAgIH0sXG5cbiAgICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGl0bGU6IFwiU2NvcmVib2FyZFwiLFxuICAgICAgICB9XG4gICAgfSxcbiAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcGxheWVyczogdGhpcy5wcm9wcy5pbml0aWFsUGxheWVycyxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIG9uU2NvcmVDaGFuZ2U6IGZ1bmN0aW9uKGluZGV4LCBkZWx0YSkge1xuICAgICAgICAvLyB1bmNvbW1lbnQgdGhpcyB0byBkb3VibGUgY2hlY2sgdmFsdWUgY2hhbmdlIG9uIHRoZSBhcHBsaWNhdGlvblxuICAgICAgICAvLyBjb25zb2xlLmxvZygnb25TY29yZUNoYW5nZScsIGluZGV4LCBkZWx0YSk7XG4gICAgICAgIHRoaXMuc3RhdGUucGxheWVyc1tpbmRleF0uc2NvcmUgKz0gZGVsdGE7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUodGhpcy5zdGF0ZSk7XG4gICAgfSxcbiAgICBvblBsYXllclJlbW92ZTogZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgICAgLy8gdW5jb21tZW50IHRvIHNlZSB0aGUgcGxheWVyIGluZGV4XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdyZW1vdmUnLCBpbmRleCk7XG4gICAgICAgIHRoaXMuc3RhdGUucGxheWVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICBzZXRTdGF0ZSh0aGlzLnN0YXRlKTtcbiAgICB9LFxuICAgIG9uUGxheWVyQWRkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gdW5jb21tZW50IHRvIHNlZSBuZXcgcGxheWVyIG5hbWVcbiAgICAgICAgLy9jb25zb2xlLmxvZygnUGxheWVyIGFkZGVkOicsIG5hbWUpO1xuICAgICAgICB0aGlzLnN0YXRlLnBsYXllcnMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgc2NvcmU6IDAsXG4gICAgICAgICAgICBpZDogbmV4dElkLFxuICAgICAgICB9KTtcblxuICAgICAgICAvKlxuICAgICAgICAgICAgTk9URTogaW4gc29tZXRoaW5nIGxpa2UgUmVkdXgsIHdlIGRvbid0IHVwZGF0ZSB0aGUgc3RhdGUgaXRzZWxmLCB3ZSBhY3R1YWxseSBjcmVhdGUgYSBicmFuZCBuZXcgc3RhdGUgb2JqZWN0XG4gICAgICAgICovXG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh0aGlzLnN0YXRlKTtcbiAgICAgICAgbmV4dElkICs9IDE7XG4gICAgfTtcbiAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4oXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNjb3JlYm9hcmRcIj5cbiAgICAgICAgICAgICAgICA8SGVhZGVyIHRpdGxlPXt0aGlzLnByb3BzLnRpdGxlfSBwbGF5ZXJzPXt0aGlzLnN0YXRlLnBsYXllcnN9IC8+XG5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBsYXllcnNcIj5cbiAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUucGxheWVycy5tYXAoZnVuY3Rpb24gKHBsYXllciwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFBsYXllclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uU2NvcmVDaGFuZ2U9e2Z1bmN0aW9uKGRlbHRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25TY29yZUNoYW5nZShpbmRleCxkZWx0YSl9LmJpbmQodGhpcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25SZW1vdmU9e2Z1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uUmVtb3ZlUGxheWVyKGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e3BsYXllci5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3Jle3BsYXllci5zY29yZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e3BsYXllci5pZH0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPEFkZFBsYXllckZvcm0gb25BZGQ9e3RoaXMub25QbGF5ZXJBZGR9IC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59KTtcblxuUmVhY3RET00ucmVuZGVyKDxBcHBsaWNhdGlvbiBpbnRpYWxQbGF5ZXJzPXtQTEFZRVJTfS8+LCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFpbmVyJykpO1xuIikpLCBtZHgoImg0IiwgT2JqZWN0LmFzc2lnbih7CiAgICAiaWQiOiAidGhyZWFjdC0yMy1zdG9wd2F0Y2gtc3RhdGUiCiAgfSwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMTU2NwogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0pLCAiVEhSRUFDVC0yMzogU3RvcHdhdGNoIFN0YXRlIiksIG1keCgicCIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDE1NzAKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiU3RvcHdhdGNoIHdpbGwgZWl0aGVyIGJlIHJ1bm5pbmcsIG9yIGl0IHdvbid0IGJlLiIpLCBtZHgoInVsIiwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMTU3MQogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sIG1keCgibGkiLCB7CiAgICBwYXJlbnROYW1lOiAidWwiLAogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMTU3MgogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJJbXBsZW1lbnQgdGhlIGdldEluaXRpYWxTdGF0ZSBtZXRob2QgZm9yIFN0b3B3YXRjaCIpLCBtZHgoImxpIiwgewogICAgcGFyZW50TmFtZTogInVsIiwKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDE1NzMKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiT25lIHdheSB0byBpbXBsZW1lbnQgdGhlIGJ1dHRvbiBuYW1lIGRlcGVuZGluZyBvbiB0aGUgc3RhdGUgaXMgdG8gaGF2ZSBjb250cm9sIGxvZ2ljIGFuZCBhIHZhciB0aGF0IGVxdWFscyAiLCBtZHgoImJ1dHRvbiIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDE1NzMKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiW3N0YXRlXSIpKSwgbWR4KCJsaSIsIHsKICAgIHBhcmVudE5hbWU6ICJ1bCIsCiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAxNTc0CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgIlRoZSBvdGhlciB3YXkgaXMgdG8gdXNlIGEgdGVybmFyeSBvcGVyYXRvci4gV2UgY2FuIHVzZSB0aGlzIGluIGEgSlNYIGV4cHJlc3Npb24hIikpLCBtZHgoInByZSIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDE1NzYKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCBtZHgoImNvZGUiLCBPYmplY3QuYXNzaWduKHsKICAgIHBhcmVudE5hbWU6ICJwcmUiCiAgfSwgewogICAgImNsYXNzTmFtZSI6ICJsYW5ndWFnZS1qYXZhc2NyaXB0IgogIH0sIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDE1NzYKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9KSwgImxldCBQTEFZRVJTID0gW1xuICAgIHtcbiAgICAgICAgbmFtZTogXCJEZW5uaXNcIixcbiAgICAgICAgc2NvcmU6IDMzLFxuICAgICAgICBpZDoxLFxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiBcIkJlblwiLFxuICAgICAgICBzY29yZTogMzQsXG4gICAgICAgIGlkOjIsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6IFwiQ2xhcmsgRnJvbSBJblZpc2lvblwiLFxuICAgICAgICBzY29yZTogMTIsXG4gICAgICAgIGlkOjMsXG4gICAgfVxuXTtcblxudmFyIG5leHRJZCA9IDQ7XG5cbnZhciBTdG9wV2F0Y2ggPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gICAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBydW5uaW5nOiBmYWxzZSxcblxuICAgICAgICB9O1xuICAgIH0sXG4gICAgb25TdG9wOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHJ1bm5pbmc6IGZhbHNlIH0pO1xuICAgIH0sXG4gICAgb25TdGFydDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBydW5uaW5nOiB0cnVlIH0pO1xuICAgIH0sXG4gICAgb25SZXNldDogZnVuY3Rpb24oKSB7XG5cbiAgICB9LFxuICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInN0b3B3YXRjaFwiPlxuICAgICAgICAgICAgICAgIDxoMj5TdG9wd2F0Y2g8L2gyPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3RvcHdhdGNoLXRpbWVcIj4wPC9kaXY+XG4gICAgICAgICAgICAgICAgeyB0aGlzLnN0YXRlLnJ1bm5pbmcgP1xuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e3RoaXMub25TdG9wfT5TdG9wPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDpcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXt0aGlzLm9uU3RhcnR9PlN0YXJ0PC9idXR0b24+O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e3RoaXMub25SZXNldH0+UmVzZXQ8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn0pO1xuXG52YXIgQWRkUGxheWVyRm9ybSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgICBwcm9wVHlwZXM6IHtcbiAgICAgICAgb25BZGQ6IFJlYWN0LlByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgfSxcbiAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZTogXCJcIlxuICAgICAgICB9O1xuICAgIH0sXG4gICAgb25OYW1lQ2hhbmdlOiBmdW5jdGlvbihlKSB7XG4gICAgICAgIC8vIHVuY29tbWVudCB0byBzZWUgdGhlIGNoYW5nZXMgb24gdGFyZ2V0IHZhbHVlXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwib25OYW1lQ2hhbmdlXCIsIGUudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7bmFtZTogZS50YXJnZXQudmFsdWV9KTtcbiAgICB9LFxuICAgIG9uU3VibWl0OiBmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICB0aGlzLnByb3BzLm9uQWRkKHRoaXMuc3RhdGUubmFtZSk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe25hbWU6IFwiXCJ9KTtcbiAgICB9LFxuICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFkZC1wbGF5ZXItZm9ybVwiPlxuICAgICAgICAgICAgICAgIDxmb3JtIG9uU3VibWl0PXt0aGlzLm9uU3VibWl0fT5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgdmFsdWU9e3RoaXMuc3RhdGUubmFtZX0gb25DaGFuZ2U9e3RoaXMub25OYW1lQ2hhbmdlfSAvPlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInN1Ym1pdFwiIHZhbHVlPVwiQWRkIFBsYXllclwiIC8+XG4gICAgICAgICAgICAgICAgPC9mb3JtPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufSk7XG5cbmZ1bmN0aW9uIFN0YXRzKHByb3BzKSB7XG4gICAgLy8geW91IGRvbid0IGhhdmUgdG8gc3RvcmUgaXQsIGJ1dCBpdCdzIGhhbmR5IGZvciBvcmdhbmlzYXRpb25cbiAgICB2YXIgdG90YWxQbGF5ZXJzID0gcHJvcHMucGxheWVycy5sZW5ndGg7XG4gICAgdmFyIHRvdGFsUG9pbnRzID0gcHJvcHMucGxheWVycy5yZWR1Y2UoZnVuY3Rpb24odG90YWwsIHBsYXllcil7XG4gICAgICAgIHJldHVybiB0b3RhbCArIHBsYXllci5zY29yZTtcbiAgICB9LCAwKVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInN0YXRzXCI+XG4gICAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICA8dGQ+UGxheWVyczo8L3RkPlxuICAgICAgICAgICAgICAgICAgICA8dGQ+e3RvdGFsUGxheWVyc308L3RkPlxuICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICA8dGQ+VG90YWwgUG9pbnRzOjwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDx0ZD57dG90YWxQb2ludHN9PC90ZD5cbiAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgPC90YWJsZT5cbiAgICApO1xufVxuXG5TdGF0cy5wcm9wVHlwZXMgPSB7XG4gICAgcGxheWVyczogUmVhY3QuUHJvcFR5cGVzLmFycmF5LmlzUmVxdWlyZWQsXG59O1xuXG5mdW5jdGlvbiBIZWFkZXIocHJvcHMpIHtcbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhlYWRlclwiPlxuICAgICAgICAgICAgPFN0YXRzIC8+XG4gICAgICAgICAgICA8aDE+e3Byb3BzLnRpdGxlfTwvaDE+XG4gICAgICAgICAgICA8U3RvcHdhdGNoIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG59XG5cbkhlYWRlci5wcm9wVHlwZXMgPSB7XG4gICAgdGl0bGU6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbn07XG5cbmZ1bmN0aW9uIENvdW50ZXIocHJvcHMpIHtcbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvdW50ZXJcIj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiY291bnRlci1hY3Rpb24gZGVjcmVtZW50XCIgb25DbGljaz17ZnVuY3Rpb24oKSB7cHJvcHMub25DaGFuZ2UoLTEpfX0+IC0gPC9idXR0b24+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvdW50ZXItc2NvcmVcIj4ge3Byb3BzLnNjb3JlIH08L2Rpdj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiY291bnRlci1hY3Rpb24gaW5jcmVtZW50XCIgb25DbGljaz17ZnVuY3Rpb24oKSB7cHJvcHMub25DaGFuZ2UoMSl9fT4gKyA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn1cblxuQ291bnRlci5wcm9wVHlwZXMgPSB7XG4gICAgc2NvcmU6IFJlYWN0LlByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgICBvbkNoYW5nZTogUmVhY3QuUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbn1cblxuZnVuY3Rpb24gUGxheWVyKHByb3BzKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwbGF5ZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGxheWVyLW5hbWVcIj5cbiAgICAgICAgICAgICAgICA8YSBjbGFzc05hbWU9XCJyZW1vdmUtcGxheWVyXCIgb25DbGljaz17cHJvcHMub25SZW1vdmV9Png8L2E+XG4gICAgICAgICAgICAgICAge3Byb3BzLm5hbWV9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGxheWVyLXNjb3JlXCI+XG4gICAgICAgICAgICAgICAgPENvdW50ZXIgc2NvcmU9e3Byb3BzLnNjb3JlfSBvbkNoYW5nZT17cHJvcHMub25TY29yZUNoYW5nZX0vPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG59XG5cblBsYXllci5wcm9wVHlwZXMgPSB7XG4gICAgbmFtZTogUmVhY3QuUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgIHNjb3JlOiBSZWFjdC5Qcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gICAgb25TY29yZUNoYW5nZTogUmVhY3QuUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICBvblJlbW92ZTogUmVhY3QuUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbn1cblxudmFyIEFwcGxpY2F0aW9uID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICAgIHByb3BUeXBlczoge1xuICAgICAgICB0aXRsZTogUmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgICAgaW5pdGlhbFBsYXllcnM6IFJlYWN0LlByb3BUeXBlcy5hcnJheU9mKFJlYWN0LlByb3BUeXBlcy5zaGFwZSh7XG4gICAgICAgICAgICBuYW1lOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgICAgICAgICBzY29yZTogUmVhY3QuUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuICAgICAgICAgICAgaWQ6IFJlYWN0LlByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgICAgICAgfSkpLmlzUmVxdWlyZWQsXG4gICAgfSxcblxuICAgIGdldERlZmF1bHRQcm9wczogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0aXRsZTogXCJTY29yZWJvYXJkXCIsXG4gICAgICAgIH1cbiAgICB9LFxuICAgIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwbGF5ZXJzOiB0aGlzLnByb3BzLmluaXRpYWxQbGF5ZXJzLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgb25TY29yZUNoYW5nZTogZnVuY3Rpb24oaW5kZXgsIGRlbHRhKSB7XG4gICAgICAgIC8vIHVuY29tbWVudCB0aGlzIHRvIGRvdWJsZSBjaGVjayB2YWx1ZSBjaGFuZ2Ugb24gdGhlIGFwcGxpY2F0aW9uXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdvblNjb3JlQ2hhbmdlJywgaW5kZXgsIGRlbHRhKTtcbiAgICAgICAgdGhpcy5zdGF0ZS5wbGF5ZXJzW2luZGV4XS5zY29yZSArPSBkZWx0YTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh0aGlzLnN0YXRlKTtcbiAgICB9LFxuICAgIG9uUGxheWVyUmVtb3ZlOiBmdW5jdGlvbihpbmRleCkge1xuICAgICAgICAvLyB1bmNvbW1lbnQgdG8gc2VlIHRoZSBwbGF5ZXIgaW5kZXhcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3JlbW92ZScsIGluZGV4KTtcbiAgICAgICAgdGhpcy5zdGF0ZS5wbGF5ZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIHNldFN0YXRlKHRoaXMuc3RhdGUpO1xuICAgIH0sXG4gICAgb25QbGF5ZXJBZGQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyB1bmNvbW1lbnQgdG8gc2VlIG5ldyBwbGF5ZXIgbmFtZVxuICAgICAgICAvL2NvbnNvbGUubG9nKCdQbGF5ZXIgYWRkZWQ6JywgbmFtZSk7XG4gICAgICAgIHRoaXMuc3RhdGUucGxheWVycy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICBzY29yZTogMCxcbiAgICAgICAgICAgIGlkOiBuZXh0SWQsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8qXG4gICAgICAgICAgICBOT1RFOiBpbiBzb21ldGhpbmcgbGlrZSBSZWR1eCwgd2UgZG9uJ3QgdXBkYXRlIHRoZSBzdGF0ZSBpdHNlbGYsIHdlIGFjdHVhbGx5IGNyZWF0ZSBhIGJyYW5kIG5ldyBzdGF0ZSBvYmplY3RcbiAgICAgICAgKi9cblxuICAgICAgICB0aGlzLnNldFN0YXRlKHRoaXMuc3RhdGUpO1xuICAgICAgICBuZXh0SWQgKz0gMTtcbiAgICB9O1xuICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybihcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2NvcmVib2FyZFwiPlxuICAgICAgICAgICAgICAgIDxIZWFkZXIgdGl0bGU9e3RoaXMucHJvcHMudGl0bGV9IHBsYXllcnM9e3RoaXMuc3RhdGUucGxheWVyc30gLz5cblxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGxheWVyc1wiPlxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5wbGF5ZXJzLm1hcChmdW5jdGlvbiAocGxheWVyLCBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UGxheWVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TY29yZUNoYW5nZT17ZnVuY3Rpb24oZGVsdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vblNjb3JlQ2hhbmdlKGluZGV4LGRlbHRhKX0uYmluZCh0aGlzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblJlbW92ZT17ZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25SZW1vdmVQbGF5ZXIoaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT17cGxheWVyLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcmV7cGxheWVyLnNjb3JlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17cGxheWVyLmlkfSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8QWRkUGxheWVyRm9ybSBvbkFkZD17dGhpcy5vblBsYXllckFkZH0gLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn0pO1xuXG5SZWFjdERPTS5yZW5kZXIoPEFwcGxpY2F0aW9uIGludGlhbFBsYXllcnM9e1BMQVlFUlN9Lz4sIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250YWluZXInKSk7XG4iKSksIG1keCgiaDQiLCBPYmplY3QuYXNzaWduKHsKICAgICJpZCI6ICJ0aHJlYWN0LTI0LW1ha2luZy10aGUtc3RvcHdhdGNoLXRpY2siCiAgfSwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMTgxNwogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0pLCAiVEhSRUFDVC0yNDogTWFraW5nIHRoZSBTdG9wd2F0Y2ggVGljayIpLCBtZHgoInVsIiwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMTgyMAogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sIG1keCgibGkiLCB7CiAgICBwYXJlbnROYW1lOiAidWwiLAogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMTgyMQogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJDcmVhdGUgdGhlIG9uVGljayBmdW5jdGlvbi4gLSBXZSBkb24ndCB3YW50IHRoaXMgZnVuY3Rpb24gaW4gUmVuZGVyLiAtIFRoZXJlIGFyZSBzZXZlcmFsIGxpZmVjeWNsZSBtZXRob2RzIGluIFJlYWN0LCB3ZSdsbCB1c2UgY29tcG9uZW50RGlkTW91bnQuIiksIG1keCgibGkiLCB7CiAgICBwYXJlbnROYW1lOiAidWwiLAogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMTgyMgogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJCZSBjYXJlZnVsIHdpdGggY29tcG9uZW50RGlkTW91bnQuIFRoZSBtZW1vcnkgYXR0YWNobWVudCB3aXRoICd0aGlzJyBjcmVhdGVzIGEgc3Ryb25nIGN5Y2xlLiBXZSBuZWVkIHRvIGFsc28gdXNlIGNvbXBvbmVudFdpbGxVbm1vdW50LiIpKSwgbWR4KCJwcmUiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAxODI0CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgbWR4KCJjb2RlIiwgT2JqZWN0LmFzc2lnbih7CiAgICBwYXJlbnROYW1lOiAicHJlIgogIH0sIHsKICAgICJjbGFzc05hbWUiOiAibGFuZ3VhZ2UtamF2YXNjcmlwdCIKICB9LCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAxODI0CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSksICJsZXQgUExBWUVSUyA9IFtcbiAgICB7XG4gICAgICAgIG5hbWU6IFwiRGVubmlzXCIsXG4gICAgICAgIHNjb3JlOiAzMyxcbiAgICAgICAgaWQ6MSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogXCJCZW5cIixcbiAgICAgICAgc2NvcmU6IDM0LFxuICAgICAgICBpZDoyLFxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiBcIkNsYXJrIEZyb20gSW5WaXNpb25cIixcbiAgICAgICAgc2NvcmU6IDEyLFxuICAgICAgICBpZDozLFxuICAgIH1cbl07XG5cbnZhciBuZXh0SWQgPSA0O1xuXG52YXIgU3RvcFdhdGNoID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICAgIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcnVubmluZzogZmFsc2UsXG4gICAgICAgICAgICBlbGFwc2VkVGltZTogMCxcbiAgICAgICAgICAgIHByZXZpb3VzVGltZTogMCxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5pbnRlcnZhbCA9IHNldEludGVydmFsKHRoaXMub25UaWNrLCAxMDApO1xuICAgIH0sXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBjbGVhckludGVydmFsKHRoaXMuc2V0SW50ZXJ2YWwpO1xuICAgIH0sXG4gICAgb25UaWNrOiBmdW5jdGlvbigpIHtcbiAgICAgICAgLy91bmNvbW1lbnQgdG8gY29uZmlybSB0aGUgdGljayBpbiB0aGUgY29uc29sZS5cbiAgICAgICAgLy9jb25zb2xlLmxvZygnb25UaWNrJyk7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnJ1bm5pbmcpIHtcbiAgICAgICAgICAgIHZhciBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgcHJldmlvdXNUaW1lOiBub3csXG4gICAgICAgICAgICAgICAgZWxhcHNlZFRpbWU6IHRoaXMuc3RhdGUuZWxhcHNlZFRpbWUgKyAobm93IC0gdGhpcy5zdGF0ZS5wcmV2aW91c1RpbWUpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIG9uU3RvcDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBydW5uaW5nOiBmYWxzZSB9KTtcbiAgICB9LFxuICAgIG9uU3RhcnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHJ1bm5pbmc6IHRydWUsXG4gICAgICAgICAgICBwcmV2aW91c1RpbWU6IERhdGUubm93KCksXG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgb25SZXNldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgZWxhcHNlZFRpbWU6IDAsXG4gICAgICAgICAgICBwcmV2aW91c1RpbWU6IERhdGUubm93KCksXG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHNlY29uZHMgPSBNYXRoLmZsb29yKHRoaXMuc3RhdGUuZWxhcHNlZFRpbWUgLyAxMDAwKTtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3RvcHdhdGNoXCI+XG4gICAgICAgICAgICAgICAgPGgyPlN0b3B3YXRjaDwvaDI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdG9wd2F0Y2gtdGltZVwiPntzZWNvbmRzfTwvZGl2PlxuICAgICAgICAgICAgICAgIHsgdGhpcy5zdGF0ZS5ydW5uaW5nID9cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXt0aGlzLm9uU3RvcH0+U3RvcDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA6XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17dGhpcy5vblN0YXJ0fT5TdGFydDwvYnV0dG9uPjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXt0aGlzLm9uUmVzZXR9PlJlc2V0PC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59KTtcblxudmFyIEFkZFBsYXllckZvcm0gPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gICAgcHJvcFR5cGVzOiB7XG4gICAgICAgIG9uQWRkOiBSZWFjdC5Qcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgIH0sXG4gICAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6IFwiXCJcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIG9uTmFtZUNoYW5nZTogZnVuY3Rpb24oZSkge1xuICAgICAgICAvLyB1bmNvbW1lbnQgdG8gc2VlIHRoZSBjaGFuZ2VzIG9uIHRhcmdldCB2YWx1ZVxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcIm9uTmFtZUNoYW5nZVwiLCBlLnRhcmdldC52YWx1ZSk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe25hbWU6IGUudGFyZ2V0LnZhbHVlfSk7XG4gICAgfSxcbiAgICBvblN1Ym1pdDogZnVuY3Rpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgdGhpcy5wcm9wcy5vbkFkZCh0aGlzLnN0YXRlLm5hbWUpO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtuYW1lOiBcIlwifSk7XG4gICAgfSxcbiAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhZGQtcGxheWVyLWZvcm1cIj5cbiAgICAgICAgICAgICAgICA8Zm9ybSBvblN1Ym1pdD17dGhpcy5vblN1Ym1pdH0+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIHZhbHVlPXt0aGlzLnN0YXRlLm5hbWV9IG9uQ2hhbmdlPXt0aGlzLm9uTmFtZUNoYW5nZX0gLz5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJzdWJtaXRcIiB2YWx1ZT1cIkFkZCBQbGF5ZXJcIiAvPlxuICAgICAgICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn0pO1xuXG5mdW5jdGlvbiBTdGF0cyhwcm9wcykge1xuICAgIC8vIHlvdSBkb24ndCBoYXZlIHRvIHN0b3JlIGl0LCBidXQgaXQncyBoYW5keSBmb3Igb3JnYW5pc2F0aW9uXG4gICAgdmFyIHRvdGFsUGxheWVycyA9IHByb3BzLnBsYXllcnMubGVuZ3RoO1xuICAgIHZhciB0b3RhbFBvaW50cyA9IHByb3BzLnBsYXllcnMucmVkdWNlKGZ1bmN0aW9uKHRvdGFsLCBwbGF5ZXIpe1xuICAgICAgICByZXR1cm4gdG90YWwgKyBwbGF5ZXIuc2NvcmU7XG4gICAgfSwgMClcblxuICAgIHJldHVybiAoXG4gICAgICAgIDx0YWJsZSBjbGFzc05hbWU9XCJzdGF0c1wiPlxuICAgICAgICAgICAgPHRib2R5PlxuICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgPHRkPlBsYXllcnM6PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPHRkPnt0b3RhbFBsYXllcnN9PC90ZD5cbiAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgPHRkPlRvdGFsIFBvaW50czo8L3RkPlxuICAgICAgICAgICAgICAgICAgICA8dGQ+e3RvdGFsUG9pbnRzfTwvdGQ+XG4gICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgIDwvdGFibGU+XG4gICAgKTtcbn1cblxuU3RhdHMucHJvcFR5cGVzID0ge1xuICAgIHBsYXllcnM6IFJlYWN0LlByb3BUeXBlcy5hcnJheS5pc1JlcXVpcmVkLFxufTtcblxuZnVuY3Rpb24gSGVhZGVyKHByb3BzKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoZWFkZXJcIj5cbiAgICAgICAgICAgIDxTdGF0cyAvPlxuICAgICAgICAgICAgPGgxPntwcm9wcy50aXRsZX08L2gxPlxuICAgICAgICAgICAgPFN0b3B3YXRjaCAvPlxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufVxuXG5IZWFkZXIucHJvcFR5cGVzID0ge1xuICAgIHRpdGxlOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG59O1xuXG5mdW5jdGlvbiBDb3VudGVyKHByb3BzKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb3VudGVyXCI+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImNvdW50ZXItYWN0aW9uIGRlY3JlbWVudFwiIG9uQ2xpY2s9e2Z1bmN0aW9uKCkge3Byb3BzLm9uQ2hhbmdlKC0xKX19PiAtIDwvYnV0dG9uPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb3VudGVyLXNjb3JlXCI+IHtwcm9wcy5zY29yZSB9PC9kaXY+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImNvdW50ZXItYWN0aW9uIGluY3JlbWVudFwiIG9uQ2xpY2s9e2Z1bmN0aW9uKCkge3Byb3BzLm9uQ2hhbmdlKDEpfX0+ICsgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG59XG5cbkNvdW50ZXIucHJvcFR5cGVzID0ge1xuICAgIHNjb3JlOiBSZWFjdC5Qcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gICAgb25DaGFuZ2U6IFJlYWN0LlByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG59XG5cbmZ1bmN0aW9uIFBsYXllcihwcm9wcykge1xuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGxheWVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBsYXllci1uYW1lXCI+XG4gICAgICAgICAgICAgICAgPGEgY2xhc3NOYW1lPVwicmVtb3ZlLXBsYXllclwiIG9uQ2xpY2s9e3Byb3BzLm9uUmVtb3ZlfT54PC9hPlxuICAgICAgICAgICAgICAgIHtwcm9wcy5uYW1lfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBsYXllci1zY29yZVwiPlxuICAgICAgICAgICAgICAgIDxDb3VudGVyIHNjb3JlPXtwcm9wcy5zY29yZX0gb25DaGFuZ2U9e3Byb3BzLm9uU2NvcmVDaGFuZ2V9Lz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufVxuXG5QbGF5ZXIucHJvcFR5cGVzID0ge1xuICAgIG5hbWU6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICBzY29yZTogUmVhY3QuUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuICAgIG9uU2NvcmVDaGFuZ2U6IFJlYWN0LlByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgb25SZW1vdmU6IFJlYWN0LlByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG59XG5cbnZhciBBcHBsaWNhdGlvbiA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgICBwcm9wVHlwZXM6IHtcbiAgICAgICAgdGl0bGU6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgIGluaXRpYWxQbGF5ZXJzOiBSZWFjdC5Qcm9wVHlwZXMuYXJyYXlPZihSZWFjdC5Qcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgICAgICAgbmFtZTogUmVhY3QuUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgICAgICAgICAgc2NvcmU6IFJlYWN0LlByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgICAgICAgICAgIGlkOiBSZWFjdC5Qcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gICAgICAgIH0pKS5pc1JlcXVpcmVkLFxuICAgIH0sXG5cbiAgICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGl0bGU6IFwiU2NvcmVib2FyZFwiLFxuICAgICAgICB9XG4gICAgfSxcbiAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcGxheWVyczogdGhpcy5wcm9wcy5pbml0aWFsUGxheWVycyxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIG9uU2NvcmVDaGFuZ2U6IGZ1bmN0aW9uKGluZGV4LCBkZWx0YSkge1xuICAgICAgICAvLyB1bmNvbW1lbnQgdGhpcyB0byBkb3VibGUgY2hlY2sgdmFsdWUgY2hhbmdlIG9uIHRoZSBhcHBsaWNhdGlvblxuICAgICAgICAvLyBjb25zb2xlLmxvZygnb25TY29yZUNoYW5nZScsIGluZGV4LCBkZWx0YSk7XG4gICAgICAgIHRoaXMuc3RhdGUucGxheWVyc1tpbmRleF0uc2NvcmUgKz0gZGVsdGE7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUodGhpcy5zdGF0ZSk7XG4gICAgfSxcbiAgICBvblBsYXllclJlbW92ZTogZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgICAgLy8gdW5jb21tZW50IHRvIHNlZSB0aGUgcGxheWVyIGluZGV4XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdyZW1vdmUnLCBpbmRleCk7XG4gICAgICAgIHRoaXMuc3RhdGUucGxheWVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICBzZXRTdGF0ZSh0aGlzLnN0YXRlKTtcbiAgICB9LFxuICAgIG9uUGxheWVyQWRkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gdW5jb21tZW50IHRvIHNlZSBuZXcgcGxheWVyIG5hbWVcbiAgICAgICAgLy9jb25zb2xlLmxvZygnUGxheWVyIGFkZGVkOicsIG5hbWUpO1xuICAgICAgICB0aGlzLnN0YXRlLnBsYXllcnMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgc2NvcmU6IDAsXG4gICAgICAgICAgICBpZDogbmV4dElkLFxuICAgICAgICB9KTtcblxuICAgICAgICAvKlxuICAgICAgICAgICAgTk9URTogaW4gc29tZXRoaW5nIGxpa2UgUmVkdXgsIHdlIGRvbid0IHVwZGF0ZSB0aGUgc3RhdGUgaXRzZWxmLCB3ZSBhY3R1YWxseSBjcmVhdGUgYSBicmFuZCBuZXcgc3RhdGUgb2JqZWN0XG4gICAgICAgICovXG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh0aGlzLnN0YXRlKTtcbiAgICAgICAgbmV4dElkICs9IDE7XG4gICAgfTtcbiAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4oXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNjb3JlYm9hcmRcIj5cbiAgICAgICAgICAgICAgICA8SGVhZGVyIHRpdGxlPXt0aGlzLnByb3BzLnRpdGxlfSBwbGF5ZXJzPXt0aGlzLnN0YXRlLnBsYXllcnN9IC8+XG5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBsYXllcnNcIj5cbiAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUucGxheWVycy5tYXAoZnVuY3Rpb24gKHBsYXllciwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFBsYXllclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uU2NvcmVDaGFuZ2U9e2Z1bmN0aW9uKGRlbHRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25TY29yZUNoYW5nZShpbmRleCxkZWx0YSl9LmJpbmQodGhpcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25SZW1vdmU9e2Z1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uUmVtb3ZlUGxheWVyKGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e3BsYXllci5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3Jle3BsYXllci5zY29yZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e3BsYXllci5pZH0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPEFkZFBsYXllckZvcm0gb25BZGQ9e3RoaXMub25QbGF5ZXJBZGR9IC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59KTtcblxuUmVhY3RET00ucmVuZGVyKDxBcHBsaWNhdGlvbiBpbnRpYWxQbGF5ZXJzPXtQTEFZRVJTfS8+LCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFpbmVyJykpO1xuIikpLCBtZHgoImg0IiwgT2JqZWN0LmFzc2lnbih7CiAgICAiaWQiOiAidGhyZWFjdC0yNS1yZXZpZXctYW5kLW5leHQtc3RlcHMiCiAgfSwgewogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMjA5MAogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0pLCAiVEhSRUFDVC0yNTogUmV2aWV3IGFuZCBOZXh0IFN0ZXBzIiksIG1keCgicCIsIHsKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDIwOTMKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiV2hhdCBkaWQgd2UgbGVhcm4/IiksIG1keCgidWwiLCB7CiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAyMDk0CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgbWR4KCJsaSIsIHsKICAgIHBhcmVudE5hbWU6ICJ1bCIsCiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAyMDk1CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgIk1hbmFnaW5nIFN0YXRlLCBhIGtleSBjb21wb25lbnQgb2YgZGVzaWduIHdlIGZvY3VzZWQgb24uIiksIG1keCgibGkiLCB7CiAgICBwYXJlbnROYW1lOiAidWwiLAogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMjA5NgogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJXZSB1c2VkIGludGVybWVkaWF0ZSBjb21wb25lbnRzIHRvIHVzZSBjYWxsYmFja3MgdG8gc2VuZCB1cHdhcmRzLiIpLCBtZHgoImxpIiwgewogICAgcGFyZW50TmFtZTogInVsIiwKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDIwOTcKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCAiUmVkdXggY2FuIGdpdmUgdXMgdXNlZnVsIHV0aWxpdGllcyBmb3IgbWFuYWdpbmcgc3RhdGUuIiksIG1keCgibGkiLCB7CiAgICBwYXJlbnROYW1lOiAidWwiLAogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMjA5OAogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJCYWJlbC5qcyBoYXMgYmVlbiB1c2VkIHRvIHByZWNvbXBpbGUgb3VyIEpTWC4iKSwgbWR4KCJsaSIsIHsKICAgIHBhcmVudE5hbWU6ICJ1bCIsCiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAyMDk5CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgIlJlYWN0IGZvciBtb2JpbGUgZG9lc24ndCByZW5kZXIgdG8gdGhlIERPTSwgYnV0IHRoZSBuYXRpdmUgY29tcG9uZW50cyBmb3IgdGhlIHBsYXRmb3JtLiIpKSk7Cn0KCmlmICh0eXBlb2YgTURYQ29udGVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgTURYQ29udGVudCAmJiBNRFhDb250ZW50ID09PSBPYmplY3QoTURYQ29udGVudCkgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZShNRFhDb250ZW50KSkgewogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNRFhDb250ZW50LCAnX19maWxlbWV0YScsIHsKICAgIGVudW1lcmFibGU6IHRydWUsCiAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICB2YWx1ZTogewogICAgICBuYW1lOiAiTURYQ29udGVudCIsCiAgICAgIGZpbGVuYW1lOiAibWFudWFsL1JlYWN0LU5vdGVzL1RILVJlYWN0LUJhc2ljcy5tZCIKICAgIH0KICB9KTsKfQoKTURYQ29udGVudC5pc01EWENvbXBvbmVudCA9IHRydWU7CjsKCihmdW5jdGlvbiAoKSB7CiAgdmFyIHJlYWN0SG90TG9hZGVyID0gKHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbCA6IHJlcXVpcmUoJ3JlYWN0LWhvdC1sb2FkZXInKSkuZGVmYXVsdDsKCiAgaWYgKCFyZWFjdEhvdExvYWRlcikgewogICAgcmV0dXJuOwogIH0KCiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIobWFrZVNob3J0Y29kZSwgIm1ha2VTaG9ydGNvZGUiLCAiL1VzZXJzL2Rlbm5pcy5va2VlZmZlL1Byb2plY3QtSW1wb3N0ZXIvZGV2ZWxvcGVyLW5vdGVzL21hbnVhbC9SZWFjdC1Ob3Rlcy9USC1SZWFjdC1CYXNpY3MubWQiKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihsYXlvdXRQcm9wcywgImxheW91dFByb3BzIiwgIi9Vc2Vycy9kZW5uaXMub2tlZWZmZS9Qcm9qZWN0LUltcG9zdGVyL2RldmVsb3Blci1ub3Rlcy9tYW51YWwvUmVhY3QtTm90ZXMvVEgtUmVhY3QtQmFzaWNzLm1kIik7CiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoTURYTGF5b3V0LCAiTURYTGF5b3V0IiwgIi9Vc2Vycy9kZW5uaXMub2tlZWZmZS9Qcm9qZWN0LUltcG9zdGVyL2RldmVsb3Blci1ub3Rlcy9tYW51YWwvUmVhY3QtTm90ZXMvVEgtUmVhY3QtQmFzaWNzLm1kIik7CiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoTURYQ29udGVudCwgIk1EWENvbnRlbnQiLCAiL1VzZXJzL2Rlbm5pcy5va2VlZmZlL1Byb2plY3QtSW1wb3N0ZXIvZGV2ZWxvcGVyLW5vdGVzL21hbnVhbC9SZWFjdC1Ob3Rlcy9USC1SZWFjdC1CYXNpY3MubWQiKTsKfSkoKTsKCjsKCihmdW5jdGlvbiAoKSB7CiAgdmFyIGxlYXZlTW9kdWxlID0gKHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbCA6IHJlcXVpcmUoJ3JlYWN0LWhvdC1sb2FkZXInKSkubGVhdmVNb2R1bGU7CiAgbGVhdmVNb2R1bGUgJiYgbGVhdmVNb2R1bGUobW9kdWxlKTsKfSkoKTs="},{"version":3,"sources":["/Users/dennis.okeeffe/Project-Imposter/developer-notes/manual/React-Notes/TH-React-Basics.md"],"names":["React","mdx","makeShortcode","name","MDXDefaultShortcode","props","console","warn","layoutProps","MDXLayout","MDXContent","components","isMDXComponent"],"mappings":"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","sourcesContent":["/* @jsx mdx */\n  import React from 'react'\n  import { mdx } from '@mdx-js/react'\n  /* @jsx mdx */\n\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <h1 {...{\n      \"id\": \"th-react-basics-notes\"\n    }}>{`TH React Basics Notes`}</h1>\n    <h2 {...{\n      \"id\": \"threact-1-first-steps-in-react\"\n    }}>{`THREACT-1: First Steps in React`}</h2>\n    <h4 {...{\n      \"id\": \"threact-2-why-react\"\n    }}>{`THREACT-2: Why React`}</h4>\n    <p>{`React is a library for creating UIs.`}</p>\n    <p>{`Two huge benefits:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`It's declarative`}</li>\n      <li parentName=\"ol\">{`It's component based`}</li>\n    </ol>\n    <p><strong parentName=\"p\">{`Components`}</strong></p>\n    <p>{`UI Composed of divs, spans, inputs and others.`}</p>\n    <p>{`React allows us to build our own components and use them as built in HTML elements.`}</p>\n    <p>{`Tested once, reused everywhere.`}</p>\n    <p><strong parentName=\"p\">{`Declarative`}</strong></p>\n    <p>{`This means our program describes what we are doing.`}</p>\n    <p>{`JS is normally imperative, whereas something like HTML is declarative.`}</p>\n    <p>{`Normally, we would have a data model with JS and then the view made up with HTML. This is hard to keep in sync.`}</p>\n    <p>{`Example, if the second item in the data model is removed, then we would also need to remove a second list item in HTML.`}</p>\n    <p>{`React makes an efficient and fast way to \"remove a DOM and reload\". This is done by using a `}<em parentName=\"p\">{`Virtual DOM`}</em></p>\n    <h4 {...{\n      \"id\": \"threact-3-state-and-the-virtual-dom\"\n    }}>{`THREACT-3: State and the Virtual DOM`}</h4>\n    <p>{`We describe the application entirely in the .js files.`}</p>\n    <p>{`The JS representation of the DOM is referred to as the Virtual DOM. This is cheap and fast to use.`}</p>\n    <p>{`Interacting with the DOM is a lot slower than manipulating JavaScript.`}</p>\n    <p>{`When we write our React markup code, React takes on the responsibility of rendering the real DOM element on the Virtual DOM we define.`}</p>\n    <p>{`It's smart to remember the previous and current DOM and makes the minimum changes needed.`}</p>\n    <h4 {...{\n      \"id\": \"threact-3-understanding-jsx\"\n    }}>{`THREACT-3: Understanding JSX`}</h4>\n    <p>{`DOM Elements have:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`The name eg. div, span`}</li>\n      <li parentName=\"ol\">{`A list of attribtues -> key, value pairs eg href=\"value\"`}</li>\n      <li parentName=\"ol\">{`It may or may not have children`}</li>\n    </ol>\n    <p>{`To describe an `}<inlineCode parentName=\"p\">{`<a>`}</inlineCode>{` tag, we use all three:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`React.createElement(\n  'a',\n  {\n    href: 'https://abc.com'\n  },\n  'abc'\n);\n`}</code></pre>\n    <p>{`However, it is not convenient to do this call. This is where JSX comes in.`}</p>\n    <p>{`So the above is equivalent to...`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`const myLink = <a href=\"https://abc.com\">abc</a>;\n`}</code></pre>\n    <p>{`The compiler that we change JSX to what we need is Babel.`}</p>\n    <h4 {...{\n      \"id\": \"threact-4-first-application\"\n    }}>{`THREACT-4: First Application`}</h4>\n    <p>{`app.css\napp.jsx\nindex.html`}</p>\n    <p><strong parentName=\"p\">{`index.html`}</strong></p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-html\"\n      }}>{`<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"utf-8\" />\n    <title>Scoreboard</title>\n    <link rel=\"stylesheet\" href=\"./app.css\" />\n  </head>\n\n  <body>\n    <div id=\"container\">Loading...</div>\n    <script src=\"./vendor/react.js\"></script>\n    <script src=\"./vendor/react-dom.js\"></script>\n    <script src=\"./vendor/babel-browser.min.js\"></script>\n    <script type=\"text/babel\" src=\"./app.jsx\"></script>\n  </body>\n</html>\n`}</code></pre>\n    <p><strong parentName=\"p\">{`app.jsx`}</strong></p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`function Application() {\n  return (\n    <div>\n      <h1>Hello from React</h1>\n      <p>I was rendered from the Application component</p>\n    </div>\n  );\n}\n\nReactDOM.render(<h1>Hello</h1>, document.getElementById('container'));\n`}</code></pre>\n    <p>{`Really, we want to create a component to render instead of individual components.`}</p>\n    <p>{`Components need to start with a capital as convention.`}</p>\n    <p>{`A react component must only return one DOM element.`}</p>\n    <p><strong parentName=\"p\">{`app.jsx`}</strong></p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`function Application() {\n  return (\n    <div>\n      <h1>Hello from React</h1>\n      <p>I was rendered from the Application component</p>\n    </div>\n  );\n}\n\nReactDOM.render(<Application />, document.getElementById('container'));\n`}</code></pre>\n    <h4 {...{\n      \"id\": \"threact-5-react-developer-tools\"\n    }}>{`THREACT-5: React Developer Tools`}</h4>\n    <p>{`It is a lot easier to debug with the React DevTools extension.`}</p>\n    <p>{`Download React Developer Tools. Available on both Chrome and Firefox.`}</p>\n    <p>{`This represents the virtual DOM.`}</p>\n    <p>{`React also highlights what is being inspected if you click on the React tab after highlighting the section you are looking for.`}</p>\n    <h2 {...{\n      \"id\": \"threact-6-thinking-in-components\"\n    }}>{`THREACT-6: Thinking in Components`}</h2>\n    <h4 {...{\n      \"id\": \"threact-7-mocking-up-an-app\"\n    }}>{`THREACT-7: Mocking up an App`}</h4>\n    <p>{`It's best to mock up the application in JSX.`}</p>\n    <p>{`That way, we can apply some styles now.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`className in JSX is used to define a class`}</li>\n      <li parentName=\"ul\">{`in React JSX, it is customary to use double quotes`}</li>\n      <li parentName=\"ul\">{`if you need to evaluate a numeral, use {} instead of \"\"`}</li>\n      <li parentName=\"ul\">{`in the following example, we could copy and past the \"player\" div to have multiple players, however as you could image, this will be anti-DRY practise. We will eventually create another component for this!`}</li>\n      <li parentName=\"ul\">{`right now, the following code is static`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`function Application() {\n  return (\n    <div className=\"scoreboard\">\n      <div className=\"header\">\n        <h1>Scoreboard</h1>\n      </div>\n\n      <div className=\"players\">\n        <div className=\"player\">\n          <div className=\"player-name\">Dennis</div>\n          <div className=\"player-score\">\n            <div className=\"counter\">\n              <button className=\"counter-action decrement\"> - </button>\n              <div className=\"counter-score\"> 31 </div>\n              <button className=\"counter-action increment\"> + </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n`}</code></pre>\n    <h4 {...{\n      \"id\": \"threact-8-properties\"\n    }}>{`THREACT-8: Properties`}</h4>\n    <p>{`The application so far is pretty useless. We can use properties to customise our components. We can then use the attribute syntax which is used to create the virtual DOM.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`we can allow our function to take an argument which will come from our reactDom.render function.`}</li>\n      <li parentName=\"ul\">{`props is the convention for argument named used`}</li>\n      <li parentName=\"ul\">{`anything with {} will be evaluated as plain old JavaScript - it MUST be an expression that brings back a value - at the moment, this means no conditional logic (if/else), we can see how to do this later!`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`function Application(props) {\n  return (\n    <div className=\"scoreboard\">\n      <div className=\"header\">\n        <h1>{props.title}</h1>\n      </div>\n\n      <div className=\"players\">\n        <div className=\"player\">\n          <div className=\"player-name\">Dennis</div>\n          <div className=\"player-score\">\n            <div className=\"counter\">\n              <button className=\"counter-action decrement\"> - </button>\n              <div className=\"counter-score\"> 31 </div>\n              <button className=\"counter-action increment\"> + </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nReactDOM.render(\n  <Application title=\"My Scoreboard\" />,\n  document.getElementById('container')\n);\n`}</code></pre>\n    <h4 {...{\n      \"id\": \"threact-9-proptypes-and-defaultprops\"\n    }}>{`THREACT-9: PropTypes and DefaultProps`}</h4>\n    <p>{`PropTypes is an object that contains all the keys our object can take and a special type definition.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`if you place a numeral instead of a string, it will render, but it will cause a React error because PropTypes \"title\" is looking for a string`}</li>\n      <li parentName=\"ul\">{`we can use .isRequired to make a PropType property required`}</li>\n      <li parentName=\"ul\">{`we can set default values with .defaultProps if we want`}</li>\n      <li parentName=\"ul\">{`you can find a list of propTypes in the docs - propTypes aren't required, but can add more clarity - a defaultProps value is essentially redundant if propTypes has that same value as required, but it is left in this next code block for clarity (will be removed)`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`function Application(props) {\n  return (\n    <div className=\"scoreboard\">\n      <div className=\"header\">\n        <h1>{props.title}</h1>\n      </div>\n\n      <div className=\"players\">\n        <div className=\"player\">\n          <div className=\"player-name\">Dennis</div>\n          <div className=\"player-score\">\n            <div className=\"counter\">\n              <button className=\"counter-action decrement\"> - </button>\n              <div className=\"counter-score\"> 31 </div>\n              <button className=\"counter-action increment\"> + </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nApplication.propTypes = {\n  title: React.PropTypes.string.isRequired\n};\n\nApplication.defaultProps = {\n  title: 'Scoreboard'\n};\n\nReactDOM.render(\n  <Application title=\"My Scoreboard\" />,\n  document.getElementById('container')\n);\n`}</code></pre>\n    <h4 {...{\n      \"id\": \"threact-10-decomposing-our-application\"\n    }}>{`THREACT-10: Decomposing our Application`}</h4>\n    <p>{`Breaking down our Application into smaller components.`}</p>\n    <p>{`To this is, we think of Application from a high level.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`In this example, we can set \"isRequired\" to Header.propTypes because the default will be passed down from the Application.propTypes`}</li>\n      <li parentName=\"ul\">{`The Player function is using JSX to replace my name and my score with props values`}</li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`Note:`}</strong>{` if you look into the React console, you should note that these functions we declare and render in the virtual DOM also come up as components. How handy for debugging!`}</li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`Note:`}</strong>{` if you look at the Counter function, it has been decomposed from Application -> Player -> Counter. The required props have been passed down. This is very common practise in React!`}</li>\n      <li parentName=\"ul\">{`How to break it down is up to you. Pros and cons for how modular you go.`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`function Header(props) {\n  return (\n    <div className=\"header\">\n      <h1>{props.title}</h1>\n    </div>\n  );\n}\n\nHeader.propTypes = {\n  title: React.PropTypes.string.isRequired\n};\n\nfunction Counter(props) {\n  return (\n    <div className=\"counter\">\n      <button className=\"counter-action decrement\"> - </button>\n      <div className=\"counter-score\"> {props.score}</div>\n      <button className=\"counter-action increment\"> + </button>\n    </div>\n  );\n}\n\nCounter.propTypes = {\n  score: React.PropTypes.number.isRequired\n};\n\nfunction Player(props) {\n  return (\n    <div className=\"player\">\n      <div className=\"player-name\">{props.name}</div>\n      <div className=\"player-score\">\n        <Counter score={props.score} />\n      </div>\n    </div>\n  );\n}\n\nPlayer.propTypes = {\n  name: React.PropTypes.string.isRequired,\n  score: React.PropTypes.number.isRequired\n};\n\nfunction Application(props) {\n  return (\n    <div className=\"scoreboard\">\n      <Header title={props.title} />\n\n      <div className=\"players\">\n        <Player name=\"Dennis\" score={32} />\n        <Player name=\"Ben\" score={34} />\n      </div>\n    </div>\n  );\n}\n\nApplication.propTypes = {\n  title: React.PropTypes.string\n};\n\nApplication.defaultProps = {\n  title: 'Scoreboard'\n};\n\nReactDOM.render(\n  <Application title=\"My Scoreboard\" />,\n  document.getElementById('container')\n);\n`}</code></pre>\n    <h4 {...{\n      \"id\": \"threact-11-loops-and-lists-in-jsx\"\n    }}>{`THREACT-11: Loops and Lists in JSX`}</h4>\n    <p>{`Currently, we have two hard coded players, but we want to be able to loop through an array of this.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Notice that Application.propTypes now requires an array of objects for the term players. We use shape to define exactly the properties of this object that we require.`}</li>\n      <li parentName=\"ul\">{`The JSX map function used to dynamically create players will return an array which in turn will be rendered as a list`}</li>\n      <li parentName=\"ul\">{`We use a \"key\" for each component in the loop to let the virtual DOM know which components are simply being rearranged or reordered so that we do not need to re-render more than we have to! (remember, the goal of React is to efficiently render the DOM) - The key must be unique for each DOM node - To see how the error would work, run this code but take out the \"key\" from the renderDOM function.`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`let PLAYERS = [\n    {\n        name: \"Dennis\",\n        score: 33,\n        id:1,\n    },\n    {\n        name: \"Ben\",\n        score: 34,\n        id:2,\n    },\n    {\n        name: \"Clark From InVision\",\n        score: 12,\n        id:3,\n    }\n];\n\nfunction Header(props) {\n    return (\n        <div className=\"header\">\n            <h1>{props.title}</h1>\n        </div>\n    );\n}\n\nHeader.propTypes = {\n    title: React.PropTypes.string.isRequired,\n};\n\nfunction Counter(props) {\n    return (\n        <div className=\"counter\">\n            <button className=\"counter-action decrement\"> - </button>\n            <div className=\"counter-score\"> {props.score }</div>\n            <button className=\"counter-action increment\"> + </button>\n        </div>\n    );\n}\n\nCounter.propTypes = {\n    score: React.PropTypes.number.isRequired,\n}\n\nfunction Player(props) {\n    return (\n        <div className=\"player\">\n            <div className=\"player-name\">\n                {props.name}\n            </div>\n            <div className=\"player-score\">\n                <Counter score={props.score} />\n            </div>\n        </div>\n    );\n}\n\nPlayer.propTypes = {\n    name: React.PropTypes.string.isRequired,\n    score: React.PropTypes.number.isRequired,\n}\n\nfunction Application(props) {\n    return(\n        <div className=\"scoreboard\">\n            <Header title={props.title}/>\n\n            <div className=\"players\">\n                {props.players.map(function (player) {\n                    return <Player name={player.name} score{player.score} key={player.id} />\n                })}\n            </div>\n        </div>\n    )\n}\n\nApplication.propTypes = {\n    title: React.PropTypes.string,\n    player: React.PropTypes.arrayOf(React.PropTypes.shape({\n        name: React.PropTypes.string.isRequired,\n        score: React.PropTypes.number.isRequired,\n        id: React.PropTypes.number.isRequired,\n    })).isRequired,\n};\n\nApplication.defaultProps = {\n    title: \"Scoreboard\",\n};\n\nReactDOM.render(<Application players={PLAYERS}/>, document.getElementById('container'));\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"threact-12-stateful-components\"\n    }}>{`THREACT-12: Stateful Components`}</h2>\n    <h4 {...{\n      \"id\": \"threact-13-creating-a-component-class\"\n    }}>{`THREACT-13: Creating a Component Class`}</h4>\n    <p>{`Right now, our application is still static. We cannot update any data details.`}</p>\n    <p>{`We need to add some State. So far, we have been writing Stateless Function Components (SFC). This form isn't designed for handling state.`}</p>\n    <p>{`We need to build a component class, but this comes with complexity. Now we will refactor to reflect this.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`note, when create a object literal (or class in ECMA2015), you also must not forget to use the keyword \"this\" - eg. React.createClass is pre ECMA2015`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`let PLAYERS = [\n    {\n        name: \"Dennis\",\n        score: 33,\n        id:1,\n    },\n    {\n        name: \"Ben\",\n        score: 34,\n        id:2,\n    },\n    {\n        name: \"Clark From InVision\",\n        score: 12,\n        id:3,\n    }\n];\n\nfunction Header(props) {\n    return (\n        <div className=\"header\">\n            <h1>{props.title}</h1>\n        </div>\n    );\n}\n\nHeader.propTypes = {\n    title: React.PropTypes.string.isRequired,\n};\n\n// functionally the same, we are preparing to be able to add state to the component\n\nvar Counter = React.createClass({\n    propTypes: {\n        score: React.PropTypes.number.isRequired,\n    },\n    render: function() {\n        return (\n            <div className=\"counter\">\n                <button className=\"counter-action decrement\"> - </button>\n                <div className=\"counter-score\"> {this.props.score }</div>\n                <button className=\"counter-action increment\"> + </button>\n            </div>\n        );\n    }\n});\n\n// function Counter(props) {} - this can be removed\n\n// Counter.propTypes = {} - this can be removed\n\nfunction Player(props) {\n    return (\n        <div className=\"player\">\n            <div className=\"player-name\">\n                {props.name}\n            </div>\n            <div className=\"player-score\">\n                <Counter score={props.score} />\n            </div>\n        </div>\n    );\n}\n\nPlayer.propTypes = {\n    name: React.PropTypes.string.isRequired,\n    score: React.PropTypes.number.isRequired,\n}\n\nfunction Application(props) {\n    return(\n        <div className=\"scoreboard\">\n            <Header title={props.title}/>\n\n            <div className=\"players\">\n                {props.players.map(function (player) {\n                    return <Player name={player.name} score{player.score} key={player.id} />\n                })}\n            </div>\n        </div>\n    )\n}\n\nApplication.propTypes = {\n    title: React.PropTypes.string,\n    player: React.PropTypes.arrayOf(React.PropTypes.shape({\n        name: React.PropTypes.string.isRequired,\n        score: React.PropTypes.number.isRequired,\n        id: React.PropTypes.number.isRequired,\n    })).isRequired,\n};\n\nApplication.defaultProps = {\n    title: \"Scoreboard\",\n};\n\nReactDOM.render(<Application players={PLAYERS}/>, document.getElementById('container'));\n`}</code></pre>\n    <h4 {...{\n      \"id\": \"threact-14-understanding-state\"\n    }}>{`THREACT-14: Understanding State`}</h4>\n    <p>{`Managing data that can change. React has a mechanism to deal with State. React doesn't provide everything, and you're encouraged to use other libraries to deal with things such as AJAX and State Management.`}</p>\n    <p>{`A popular design pattern used is Flux (what we will use). It is also recommended to use Redux which takes Flux a little bit further, however Flux and Redux are topics for another time.`}</p>\n    <p>{`After understanding state, it is recommended to use these other libraries to save time and work more effectively.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`After clicking on a button, the DOM will know to be re-rendered to show to correct State`}</li>\n      <li parentName=\"ul\">{`We need to the this.setState() function to let React know to re-render itself, this is why we don't just update the score!`}</li>\n      <li parentName=\"ul\">{`We use this.decrementScore in the onClick attribute, but not this.decrementScore.bind(this). React does this automatically for us in a high performance way.`}</li>\n      <li parentName=\"ul\">{`We have updated props to show an example if we want to pass props and then use them for an initial state.`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`let PLAYERS = [\n    {\n        name: \"Dennis\",\n        score: 33,\n        id:1,\n    },\n    {\n        name: \"Ben\",\n        score: 34,\n        id:2,\n    },\n    {\n        name: \"Clark From InVision\",\n        score: 12,\n        id:3,\n    }\n];\n\nfunction Header(props) {\n    return (\n        <div className=\"header\">\n            <h1>{props.title}</h1>\n        </div>\n    );\n}\n\nHeader.propTypes = {\n    title: React.PropTypes.string.isRequired,\n};\n\n// functionally the same, we are preparing to be able to add state to the component\n\nvar Counter = React.createClass({\n    propTypes: {\n        // this is no longer needed\n        // score: React.PropTypes.number.isRequired,\n        initialScore: React.PropTypes.number.isRequired\n    },\n    getInitialState: function() {\n        return {\n            score: this.props.initialScore,\n        }\n    },\n    incrementScore: function(e) {\n        // uncomment if you want to check out the event in the console\n        // console.log(\"increment score\", e);\n        this.setState({\n            score: (this.state.score + 1),\n        })\n    },\n    decrementScore: function(e) {\n        this.setState({\n            score: (this.state.score - 1),\n        })\n    },\n    render: function() {\n        return (\n            <div className=\"counter\">\n                <button className=\"counter-action decrement\" onClick={this.decrementScore}> - </button>\n                <div className=\"counter-score\"> {this.state.score }</div>\n                <button className=\"counter-action increment\" onClick={this.incrementScore}> + </button>\n            </div>\n        );\n    }\n});\n\n// function Counter(props) {} - this can be removed\n\n// Counter.propTypes = {} - this can be removed\n\nfunction Player(props) {\n    return (\n        <div className=\"player\">\n            <div className=\"player-name\">\n                {props.name}\n            </div>\n            <div className=\"player-score\">\n                <Counter initialScore={props.score}/>\n            </div>\n        </div>\n    );\n}\n\nPlayer.propTypes = {\n    name: React.PropTypes.string.isRequired,\n    score: React.PropTypes.number.isRequired,\n}\n\nfunction Application(props) {\n    return(\n        <div className=\"scoreboard\">\n            <Header title={props.title}/>\n\n            <div className=\"players\">\n                {props.players.map(function (player) {\n                    return <Player name={player.name} score{player.score} key={player.id} />\n                })}\n            </div>\n        </div>\n    )\n}\n\nApplication.propTypes = {\n    title: React.PropTypes.string,\n    player: React.PropTypes.arrayOf(React.PropTypes.shape({\n        name: React.PropTypes.string.isRequired,\n        score: React.PropTypes.number.isRequired,\n        id: React.PropTypes.number.isRequired,\n    })).isRequired,\n};\n\nApplication.defaultProps = {\n    title: \"Scoreboard\",\n};\n\nReactDOM.render(<Application players={PLAYERS}/>, document.getElementById('container'));\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"threact-15-designing-data-flow\"\n    }}>{`THREACT-15: Designing Data Flow`}</h2>\n    <h4 {...{\n      \"id\": \"threact-16-unidirectional-data-flow\"\n    }}>{`THREACT-16: Unidirectional Data Flow`}</h4>\n    <p>{`It's cumbersome to maintain State when applications scale. We should think of State as the following:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Application State`}</li>\n      <li parentName=\"ol\">{`Component State`}</li>\n    </ol>\n    <p>{`Component state is normally not shared or visible outside of a component.`}</p>\n    <p>{`Application state should be handled as high up as possible. We can pass all the changes down using properties.`}</p>\n    <p>{`Because of the direction of data flow, parents don't call methods to change the values of children. Instead, they pass down new values to declare how the children should be re-rendered. (Back to the whole Declarative programming!)`}</p>\n    <p>{`This Parent passing down to Child is what we call Unidirectional Data Flow. If it changes at the top, it will cascade down the virtual DOM.`}</p>\n    <p>{`Since children cannot talk to parents, we can implement callback functions to update data. When a child wants to indicate a State should change, they will use the callback.`}</p>\n    <p>{`Currently, we have State in a number of places. We will change this to become more unidirectional.`}</p>\n    <h4 {...{\n      \"id\": \"threact-17-restructuring-state\"\n    }}>{`THREACT-17: Restructuring State`}</h4>\n    <p>{`At the moment, we have one State. Our counter component. However, as useful as it has been to show how States work by using counter, the State of the counter is really a state of a Player Score.`}</p>\n    <p>{`We're going to relocate the state up to the Application.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`implement back the Counter function`}</li>\n      <li parentName=\"ul\">{`onClick handlers removed`}</li>\n      <li parentName=\"ul\">{`Application is going to become the stateful component`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`let PLAYERS = [\n    {\n        name: \"Dennis\",\n        score: 33,\n        id:1,\n    },\n    {\n        name: \"Ben\",\n        score: 34,\n        id:2,\n    },\n    {\n        name: \"Clark From InVision\",\n        score: 12,\n        id:3,\n    }\n];\n\nfunction Header(props) {\n    return (\n        <div className=\"header\">\n            <h1>{props.title}</h1>\n        </div>\n    );\n}\n\nHeader.propTypes = {\n    title: React.PropTypes.string.isRequired,\n};\n\nfunction Counter(props) {\n    return (\n        <div className=\"counter\">\n            <button className=\"counter-action decrement\"> - </button>\n            <div className=\"counter-score\"> {props.score }</div>\n            <button className=\"counter-action increment\"> + </button>\n        </div>\n    );\n}\n\nCounter.propTypes = {\n    score: React.PropTypes.number.isRequired,\n}\n\nfunction Player(props) {\n    return (\n        <div className=\"player\">\n            <div className=\"player-name\">\n                {props.name}\n            </div>\n            <div className=\"player-score\">\n                <Counter score={props.score}/>\n            </div>\n        </div>\n    );\n}\n\nPlayer.propTypes = {\n    name: React.PropTypes.string.isRequired,\n    score: React.PropTypes.number.isRequired,\n}\n\n// function Application(props) {} - now this is removed\n// props moved into the class\n\nvar Application = React.createClass({\n    propTypes: {\n        title: React.PropTypes.string,\n        initialPlayers: React.PropTypes.arrayOf(React.PropTypes.shape({\n            name: React.PropTypes.string.isRequired,\n            score: React.PropTypes.number.isRequired,\n            id: React.PropTypes.number.isRequired,\n        })).isRequired,\n    },\n\n    getDefaultProps: function() {\n        return {\n            title: \"Scoreboard\",\n        }\n    },\n    getInitialState: function() {\n        return {\n            players: this.props.initialPlayers,\n        };\n    },\n\n    render: function() {\n        return(\n            <div className=\"scoreboard\">\n                <Header title={this.props.title}/>\n\n                <div className=\"players\">\n                    {this.state.players.map(function (player) {\n                        return <Player name={player.name} score{player.score} key={player.id} />\n                    })}\n                </div>\n            </div>\n        );\n    }\n});\n\n// this is also removed\n// Application.defaultProps = {\n//  title: \"Scoreboard\",\n// };\n\nReactDOM.render(<Application intialPlayers={PLAYERS}/>, document.getElementById('container'));\n`}</code></pre>\n    <h4 {...{\n      \"id\": \"threact-18-communicating-events\"\n    }}>{`THREACT-18: Communicating Events`}</h4>\n    <p>{`We now need to implement these callback functions so that we can change our counter.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`reimplement the onClick function`}</li>\n      <li parentName=\"ul\">{`we add onChange functions to pass data up the tree`}</li>\n      <li parentName=\"ul\">{`at the Application level where player is called, we can call the function but we do need to .bind(this) for the particular instance since it is called on an array`}</li>\n      <li parentName=\"ul\">{`to know which player score to update, we use the map function's second parameter which will pass an index. This we can continue passing to let the function know which score to change. - AGAIN, MAKE SURE YOU BIND SINCE WE PASS AN ANON FUNC`}</li>\n      <li parentName=\"ul\">{`You can verify that the score is being tracked by the Application and not the Counter by inspecting this in the console and checking out the values of the Application.`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`let PLAYERS = [\n    {\n        name: \"Dennis\",\n        score: 33,\n        id:1,\n    },\n    {\n        name: \"Ben\",\n        score: 34,\n        id:2,\n    },\n    {\n        name: \"Clark From InVision\",\n        score: 12,\n        id:3,\n    }\n];\n\nfunction Header(props) {\n    return (\n        <div className=\"header\">\n            <h1>{props.title}</h1>\n        </div>\n    );\n}\n\nHeader.propTypes = {\n    title: React.PropTypes.string.isRequired,\n};\n\nfunction Counter(props) {\n    return (\n        <div className=\"counter\">\n            <button className=\"counter-action decrement\" onClick={function() {props.onChange(-1)}}> - </button>\n            <div className=\"counter-score\"> {props.score }</div>\n            <button className=\"counter-action increment\" onClick={function() {props.onChange(1)}}> + </button>\n        </div>\n    );\n}\n\nCounter.propTypes = {\n    score: React.PropTypes.number.isRequired,\n    onChange: React.PropTypes.func.isRequired,\n}\n\nfunction Player(props) {\n    return (\n        <div className=\"player\">\n            <div className=\"player-name\">\n                {props.name}\n            </div>\n            <div className=\"player-score\">\n                <Counter score={props.score} onChange={props.onScoreChange}/>\n            </div>\n        </div>\n    );\n}\n\nPlayer.propTypes = {\n    name: React.PropTypes.string.isRequired,\n    score: React.PropTypes.number.isRequired,\n    onScoreChange: React.PropTypes.func.isRequired,\n}\n\nvar Application = React.createClass({\n    propTypes: {\n        title: React.PropTypes.string,\n        initialPlayers: React.PropTypes.arrayOf(React.PropTypes.shape({\n            name: React.PropTypes.string.isRequired,\n            score: React.PropTypes.number.isRequired,\n            id: React.PropTypes.number.isRequired,\n        })).isRequired,\n    },\n\n    getDefaultProps: function() {\n        return {\n            title: \"Scoreboard\",\n        }\n    },\n    getInitialState: function() {\n        return {\n            players: this.props.initialPlayers,\n        };\n    },\n    onScoreChange: function(index, delta) {\n        // uncomment this to double check value change on the application\n        // console.log('onScoreChange', index, delta);\n        this.state.players[index].score += delta;\n        this.setState(this.state);\n    },\n\n    render: function() {\n        return(\n            <div className=\"scoreboard\">\n                <Header title={this.props.title}/>\n\n                <div className=\"players\">\n                    {this.state.players.map(function (player, index) {\n                        return (\n                            <Player\n                            onScoreChange={function(delta) {\n                                this.onScoreChange(index,delta)}.bind(this)\n                            }\n                            name={player.name}\n                            score{player.score}\n                            key={player.id} />\n                        );\n                    }.bind(this))}\n                </div>\n            </div>\n        );\n    }\n});\n\nReactDOM.render(<Application intialPlayers={PLAYERS}/>, document.getElementById('container'));\n`}</code></pre>\n    <h4 {...{\n      \"id\": \"threact-19-building-the-statistics-component\"\n    }}>{`THREACT-19: Building the Statistics Component`}</h4>\n    <p>{`The problem with keeping the score locally is that if wanted to do something (eg show to total score) we wouldn't have had access to that.`}</p>\n    <p>{`Let's show that by creating some stats.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`When creating table elements, make sure you add in the tbody tag too! Otherwise, this will cause issues between the DOM and Virtual DOM.`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`let PLAYERS = [\n    {\n        name: \"Dennis\",\n        score: 33,\n        id:1,\n    },\n    {\n        name: \"Ben\",\n        score: 34,\n        id:2,\n    },\n    {\n        name: \"Clark From InVision\",\n        score: 12,\n        id:3,\n    }\n];\n\nfunction Stats(props) {\n    // you don't have to store it, but it's handy for organisation\n    var totalPlayers = props.players.length;\n    var totalPoints = props.players.reduce(function(total, player){\n        return total + player.score;\n    }, 0)\n\n    return (\n        <table className=\"stats\">\n            <tbody>\n                <tr>\n                    <td>Players:</td>\n                    <td>{totalPlayers}</td>\n                </tr>\n                <tr>\n                    <td>Total Points:</td>\n                    <td>{totalPoints}</td>\n                </tr>\n            </tbody>\n        </table>\n    );\n}\n\nStats.propTypes = {\n    players: React.PropTypes.array.isRequired,\n};\n\nfunction Header(props) {\n    return (\n        <div className=\"header\">\n            <Stats />\n            <h1>{props.title}</h1>\n        </div>\n    );\n}\n\nHeader.propTypes = {\n    title: React.PropTypes.string.isRequired,\n};\n\nfunction Counter(props) {\n    return (\n        <div className=\"counter\">\n            <button className=\"counter-action decrement\" onClick={function() {props.onChange(-1)}}> - </button>\n            <div className=\"counter-score\"> {props.score }</div>\n            <button className=\"counter-action increment\" onClick={function() {props.onChange(1)}}> + </button>\n        </div>\n    );\n}\n\nCounter.propTypes = {\n    score: React.PropTypes.number.isRequired,\n    onChange: React.PropTypes.func.isRequired,\n}\n\nfunction Player(props) {\n    return (\n        <div className=\"player\">\n            <div className=\"player-name\">\n                {props.name}\n            </div>\n            <div className=\"player-score\">\n                <Counter score={props.score} onChange={props.onScoreChange}/>\n            </div>\n        </div>\n    );\n}\n\nPlayer.propTypes = {\n    name: React.PropTypes.string.isRequired,\n    score: React.PropTypes.number.isRequired,\n    onScoreChange: React.PropTypes.func.isRequired,\n}\n\nvar Application = React.createClass({\n    propTypes: {\n        title: React.PropTypes.string,\n        initialPlayers: React.PropTypes.arrayOf(React.PropTypes.shape({\n            name: React.PropTypes.string.isRequired,\n            score: React.PropTypes.number.isRequired,\n            id: React.PropTypes.number.isRequired,\n        })).isRequired,\n    },\n\n    getDefaultProps: function() {\n        return {\n            title: \"Scoreboard\",\n        }\n    },\n    getInitialState: function() {\n        return {\n            players: this.props.initialPlayers,\n        };\n    },\n    onScoreChange: function(index, delta) {\n        // uncomment this to double check value change on the application\n        // console.log('onScoreChange', index, delta);\n        this.state.players[index].score += delta;\n        this.setState(this.state);\n    },\n\n    render: function() {\n        return(\n            <div className=\"scoreboard\">\n                <Header title={this.props.title} players={this.state.players} />\n\n                <div className=\"players\">\n                    {this.state.players.map(function (player, index) {\n                        return (\n                            <Player\n                            onScoreChange={function(delta) {\n                                this.onScoreChange(index,delta)}.bind(this)\n                            }\n                            name={player.name}\n                            score{player.score}\n                            key={player.id} />\n                        );\n                    }.bind(this))}\n                </div>\n            </div>\n        );\n    }\n});\n\nReactDOM.render(<Application intialPlayers={PLAYERS}/>, document.getElementById('container'));\n`}</code></pre>\n    <h4 {...{\n      \"id\": \"threact-20-adding-players-to-the-scoreboard\"\n    }}>{`THREACT-20: Adding Players to the Scoreboard`}</h4>\n    <p>{`In React, States are our responsibility. What happens if we need to add players?`}</p>\n    <ul>\n      <li parentName=\"ul\">{`form values need to be handled differently due to the unidirectional flow and re-rendering. - to update State, we need an onChange handler`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`let PLAYERS = [\n    {\n        name: \"Dennis\",\n        score: 33,\n        id:1,\n    },\n    {\n        name: \"Ben\",\n        score: 34,\n        id:2,\n    },\n    {\n        name: \"Clark From InVision\",\n        score: 12,\n        id:3,\n    }\n];\n\nvar nextId = 4;\n\nvar AddPlayerForm = React.createClass({\n    propTypes: {\n        onAdd: React.PropTypes.func.isRequired,\n    },\n    getInitialState: function() {\n        return {\n            name: \"\"\n        };\n    },\n    onNameChange: function(e) {\n        // uncomment to see the changes on target value\n        // console.log(\"onNameChange\", e.target.value);\n        this.setState({name: e.target.value});\n    },\n    onSubmit: function(e) {\n        e.preventDefault();\n\n        this.props.onAdd(this.state.name);\n        this.setState({name: \"\"});\n    },\n    render: function() {\n        return (\n            <div className=\"add-player-form\">\n                <form onSubmit={this.onSubmit}>\n                    <input type=\"text\" value={this.state.name} onChange={this.onNameChange} />\n                    <input type=\"submit\" value=\"Add Player\" />\n                </form>\n            </div>\n        );\n    }\n});\n\nfunction Stats(props) {\n    // you don't have to store it, but it's handy for organisation\n    var totalPlayers = props.players.length;\n    var totalPoints = props.players.reduce(function(total, player){\n        return total + player.score;\n    }, 0)\n\n    return (\n        <table className=\"stats\">\n            <tbody>\n                <tr>\n                    <td>Players:</td>\n                    <td>{totalPlayers}</td>\n                </tr>\n                <tr>\n                    <td>Total Points:</td>\n                    <td>{totalPoints}</td>\n                </tr>\n            </tbody>\n        </table>\n    );\n}\n\nStats.propTypes = {\n    players: React.PropTypes.array.isRequired,\n};\n\nfunction Header(props) {\n    return (\n        <div className=\"header\">\n            <Stats />\n            <h1>{props.title}</h1>\n        </div>\n    );\n}\n\nHeader.propTypes = {\n    title: React.PropTypes.string.isRequired,\n};\n\nfunction Counter(props) {\n    return (\n        <div className=\"counter\">\n            <button className=\"counter-action decrement\" onClick={function() {props.onChange(-1)}}> - </button>\n            <div className=\"counter-score\"> {props.score }</div>\n            <button className=\"counter-action increment\" onClick={function() {props.onChange(1)}}> + </button>\n        </div>\n    );\n}\n\nCounter.propTypes = {\n    score: React.PropTypes.number.isRequired,\n    onChange: React.PropTypes.func.isRequired,\n}\n\nfunction Player(props) {\n    return (\n        <div className=\"player\">\n            <div className=\"player-name\">\n                <a className=\"remove-player\" onClick={props.onRemove}>x</a>\n                {props.name}\n            </div>\n            <div className=\"player-score\">\n                <Counter score={props.score} onChange={props.onScoreChange}/>\n            </div>\n        </div>\n    );\n}\n\nPlayer.propTypes = {\n    name: React.PropTypes.string.isRequired,\n    score: React.PropTypes.number.isRequired,\n    onScoreChange: React.PropTypes.func.isRequired,\n    onRemove: React.PropTypes.func.isRequired,\n}\n\nvar Application = React.createClass({\n    propTypes: {\n        title: React.PropTypes.string,\n        initialPlayers: React.PropTypes.arrayOf(React.PropTypes.shape({\n            name: React.PropTypes.string.isRequired,\n            score: React.PropTypes.number.isRequired,\n            id: React.PropTypes.number.isRequired,\n        })).isRequired,\n    },\n\n    getDefaultProps: function() {\n        return {\n            title: \"Scoreboard\",\n        }\n    },\n    getInitialState: function() {\n        return {\n            players: this.props.initialPlayers,\n        };\n    },\n    onScoreChange: function(index, delta) {\n        // uncomment this to double check value change on the application\n        // console.log('onScoreChange', index, delta);\n        this.state.players[index].score += delta;\n        this.setState(this.state);\n    },\n    onPlayerRemove: function(index) {\n        // uncomment to see the player index\n        // console.log('remove', index);\n        this.state.players.splice(index, 1);\n        setState(this.state);\n    },\n    onPlayerAdd: function() {\n        // uncomment to see new player name\n        //console.log('Player added:', name);\n        this.state.players.push({\n            name: name,\n            score: 0,\n            id: nextId,\n        });\n\n        /*\n            NOTE: in something like Redux, we don't update the state itself, we actually create a brand new state object\n        */\n\n        this.setState(this.state);\n        nextId += 1;\n    };\n    render: function() {\n        return(\n            <div className=\"scoreboard\">\n                <Header title={this.props.title} players={this.state.players} />\n\n                <div className=\"players\">\n                    {this.state.players.map(function (player, index) {\n                        return (\n                            <Player\n                            onScoreChange={function(delta) {\n                                this.onScoreChange(index,delta)}.bind(this)\n                            }\n                            onRemove={function() {\n                                this.onRemovePlayer(index);\n                                }.bind(this)\n                            }\n                            name={player.name}\n                            score{player.score}\n                            key={player.id} />\n                        );\n                    }.bind(this))}\n                </div>\n                <AddPlayerForm onAdd={this.onPlayerAdd} />\n            </div>\n        );\n    }\n});\n\nReactDOM.render(<Application intialPlayers={PLAYERS}/>, document.getElementById('container'));\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"threact-21-component-lifecyle\"\n    }}>{`THREACT-21: Component Lifecyle`}</h2>\n    <h4 {...{\n      \"id\": \"threact-22-designing-a-stopwatch\"\n    }}>{`THREACT-22: Designing a Stopwatch`}</h4>\n    <p>{`Let's build a more advanced component. A stopwatch.`}</p>\n    <p>{`We will need a timer in seconds. We will have a button to stop and start the timer.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`The clock will continue ticking, so this presents the unique challenge of continually changing State.`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`let PLAYERS = [\n    {\n        name: \"Dennis\",\n        score: 33,\n        id:1,\n    },\n    {\n        name: \"Ben\",\n        score: 34,\n        id:2,\n    },\n    {\n        name: \"Clark From InVision\",\n        score: 12,\n        id:3,\n    }\n];\n\nvar nextId = 4;\n\nvar StopWatch = React.createClass({\n    render: function() {\n        return (\n            <div className=\"stopwatch\">\n                <h2>Stopwatch</h2>\n                <div className=\"stopwatch-time\">0</div>\n                <button>Start</button>\n                <button>Reset</button>\n            </div>\n        );\n    }\n});\n\nvar AddPlayerForm = React.createClass({\n    propTypes: {\n        onAdd: React.PropTypes.func.isRequired,\n    },\n    getInitialState: function() {\n        return {\n            name: \"\"\n        };\n    },\n    onNameChange: function(e) {\n        // uncomment to see the changes on target value\n        // console.log(\"onNameChange\", e.target.value);\n        this.setState({name: e.target.value});\n    },\n    onSubmit: function(e) {\n        e.preventDefault();\n\n        this.props.onAdd(this.state.name);\n        this.setState({name: \"\"});\n    },\n    render: function() {\n        return (\n            <div className=\"add-player-form\">\n                <form onSubmit={this.onSubmit}>\n                    <input type=\"text\" value={this.state.name} onChange={this.onNameChange} />\n                    <input type=\"submit\" value=\"Add Player\" />\n                </form>\n            </div>\n        );\n    }\n});\n\nfunction Stats(props) {\n    // you don't have to store it, but it's handy for organisation\n    var totalPlayers = props.players.length;\n    var totalPoints = props.players.reduce(function(total, player){\n        return total + player.score;\n    }, 0)\n\n    return (\n        <table className=\"stats\">\n            <tbody>\n                <tr>\n                    <td>Players:</td>\n                    <td>{totalPlayers}</td>\n                </tr>\n                <tr>\n                    <td>Total Points:</td>\n                    <td>{totalPoints}</td>\n                </tr>\n            </tbody>\n        </table>\n    );\n}\n\nStats.propTypes = {\n    players: React.PropTypes.array.isRequired,\n};\n\nfunction Header(props) {\n    return (\n        <div className=\"header\">\n            <Stats />\n            <h1>{props.title}</h1>\n            <Stopwatch />\n        </div>\n    );\n}\n\nHeader.propTypes = {\n    title: React.PropTypes.string.isRequired,\n};\n\nfunction Counter(props) {\n    return (\n        <div className=\"counter\">\n            <button className=\"counter-action decrement\" onClick={function() {props.onChange(-1)}}> - </button>\n            <div className=\"counter-score\"> {props.score }</div>\n            <button className=\"counter-action increment\" onClick={function() {props.onChange(1)}}> + </button>\n        </div>\n    );\n}\n\nCounter.propTypes = {\n    score: React.PropTypes.number.isRequired,\n    onChange: React.PropTypes.func.isRequired,\n}\n\nfunction Player(props) {\n    return (\n        <div className=\"player\">\n            <div className=\"player-name\">\n                <a className=\"remove-player\" onClick={props.onRemove}>x</a>\n                {props.name}\n            </div>\n            <div className=\"player-score\">\n                <Counter score={props.score} onChange={props.onScoreChange}/>\n            </div>\n        </div>\n    );\n}\n\nPlayer.propTypes = {\n    name: React.PropTypes.string.isRequired,\n    score: React.PropTypes.number.isRequired,\n    onScoreChange: React.PropTypes.func.isRequired,\n    onRemove: React.PropTypes.func.isRequired,\n}\n\nvar Application = React.createClass({\n    propTypes: {\n        title: React.PropTypes.string,\n        initialPlayers: React.PropTypes.arrayOf(React.PropTypes.shape({\n            name: React.PropTypes.string.isRequired,\n            score: React.PropTypes.number.isRequired,\n            id: React.PropTypes.number.isRequired,\n        })).isRequired,\n    },\n\n    getDefaultProps: function() {\n        return {\n            title: \"Scoreboard\",\n        }\n    },\n    getInitialState: function() {\n        return {\n            players: this.props.initialPlayers,\n        };\n    },\n    onScoreChange: function(index, delta) {\n        // uncomment this to double check value change on the application\n        // console.log('onScoreChange', index, delta);\n        this.state.players[index].score += delta;\n        this.setState(this.state);\n    },\n    onPlayerRemove: function(index) {\n        // uncomment to see the player index\n        // console.log('remove', index);\n        this.state.players.splice(index, 1);\n        setState(this.state);\n    },\n    onPlayerAdd: function() {\n        // uncomment to see new player name\n        //console.log('Player added:', name);\n        this.state.players.push({\n            name: name,\n            score: 0,\n            id: nextId,\n        });\n\n        /*\n            NOTE: in something like Redux, we don't update the state itself, we actually create a brand new state object\n        */\n\n        this.setState(this.state);\n        nextId += 1;\n    };\n    render: function() {\n        return(\n            <div className=\"scoreboard\">\n                <Header title={this.props.title} players={this.state.players} />\n\n                <div className=\"players\">\n                    {this.state.players.map(function (player, index) {\n                        return (\n                            <Player\n                            onScoreChange={function(delta) {\n                                this.onScoreChange(index,delta)}.bind(this)\n                            }\n                            onRemove={function() {\n                                this.onRemovePlayer(index);\n                                }.bind(this)\n                            }\n                            name={player.name}\n                            score{player.score}\n                            key={player.id} />\n                        );\n                    }.bind(this))}\n                </div>\n                <AddPlayerForm onAdd={this.onPlayerAdd} />\n            </div>\n        );\n    }\n});\n\nReactDOM.render(<Application intialPlayers={PLAYERS}/>, document.getElementById('container'));\n`}</code></pre>\n    <h4 {...{\n      \"id\": \"threact-23-stopwatch-state\"\n    }}>{`THREACT-23: Stopwatch State`}</h4>\n    <p>{`Stopwatch will either be running, or it won't be.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Implement the getInitialState method for Stopwatch`}</li>\n      <li parentName=\"ul\">{`One way to implement the button name depending on the state is to have control logic and a var that equals `}<button>{`[state]`}</button></li>\n      <li parentName=\"ul\">{`The other way is to use a ternary operator. We can use this in a JSX expression!`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`let PLAYERS = [\n    {\n        name: \"Dennis\",\n        score: 33,\n        id:1,\n    },\n    {\n        name: \"Ben\",\n        score: 34,\n        id:2,\n    },\n    {\n        name: \"Clark From InVision\",\n        score: 12,\n        id:3,\n    }\n];\n\nvar nextId = 4;\n\nvar StopWatch = React.createClass({\n    getInitialState: function () {\n        return {\n            running: false,\n\n        };\n    },\n    onStop: function() {\n        this.setState({ running: false });\n    },\n    onStart: function() {\n        this.setState({ running: true });\n    },\n    onReset: function() {\n\n    },\n    render: function() {\n        return (\n            <div className=\"stopwatch\">\n                <h2>Stopwatch</h2>\n                <div className=\"stopwatch-time\">0</div>\n                { this.state.running ?\n                    <button onClick={this.onStop}>Stop</button>\n                    :\n                    <button onClick={this.onStart}>Start</button>;\n                }\n                <button onClick={this.onReset}>Reset</button>\n            </div>\n        );\n    }\n});\n\nvar AddPlayerForm = React.createClass({\n    propTypes: {\n        onAdd: React.PropTypes.func.isRequired,\n    },\n    getInitialState: function() {\n        return {\n            name: \"\"\n        };\n    },\n    onNameChange: function(e) {\n        // uncomment to see the changes on target value\n        // console.log(\"onNameChange\", e.target.value);\n        this.setState({name: e.target.value});\n    },\n    onSubmit: function(e) {\n        e.preventDefault();\n\n        this.props.onAdd(this.state.name);\n        this.setState({name: \"\"});\n    },\n    render: function() {\n        return (\n            <div className=\"add-player-form\">\n                <form onSubmit={this.onSubmit}>\n                    <input type=\"text\" value={this.state.name} onChange={this.onNameChange} />\n                    <input type=\"submit\" value=\"Add Player\" />\n                </form>\n            </div>\n        );\n    }\n});\n\nfunction Stats(props) {\n    // you don't have to store it, but it's handy for organisation\n    var totalPlayers = props.players.length;\n    var totalPoints = props.players.reduce(function(total, player){\n        return total + player.score;\n    }, 0)\n\n    return (\n        <table className=\"stats\">\n            <tbody>\n                <tr>\n                    <td>Players:</td>\n                    <td>{totalPlayers}</td>\n                </tr>\n                <tr>\n                    <td>Total Points:</td>\n                    <td>{totalPoints}</td>\n                </tr>\n            </tbody>\n        </table>\n    );\n}\n\nStats.propTypes = {\n    players: React.PropTypes.array.isRequired,\n};\n\nfunction Header(props) {\n    return (\n        <div className=\"header\">\n            <Stats />\n            <h1>{props.title}</h1>\n            <Stopwatch />\n        </div>\n    );\n}\n\nHeader.propTypes = {\n    title: React.PropTypes.string.isRequired,\n};\n\nfunction Counter(props) {\n    return (\n        <div className=\"counter\">\n            <button className=\"counter-action decrement\" onClick={function() {props.onChange(-1)}}> - </button>\n            <div className=\"counter-score\"> {props.score }</div>\n            <button className=\"counter-action increment\" onClick={function() {props.onChange(1)}}> + </button>\n        </div>\n    );\n}\n\nCounter.propTypes = {\n    score: React.PropTypes.number.isRequired,\n    onChange: React.PropTypes.func.isRequired,\n}\n\nfunction Player(props) {\n    return (\n        <div className=\"player\">\n            <div className=\"player-name\">\n                <a className=\"remove-player\" onClick={props.onRemove}>x</a>\n                {props.name}\n            </div>\n            <div className=\"player-score\">\n                <Counter score={props.score} onChange={props.onScoreChange}/>\n            </div>\n        </div>\n    );\n}\n\nPlayer.propTypes = {\n    name: React.PropTypes.string.isRequired,\n    score: React.PropTypes.number.isRequired,\n    onScoreChange: React.PropTypes.func.isRequired,\n    onRemove: React.PropTypes.func.isRequired,\n}\n\nvar Application = React.createClass({\n    propTypes: {\n        title: React.PropTypes.string,\n        initialPlayers: React.PropTypes.arrayOf(React.PropTypes.shape({\n            name: React.PropTypes.string.isRequired,\n            score: React.PropTypes.number.isRequired,\n            id: React.PropTypes.number.isRequired,\n        })).isRequired,\n    },\n\n    getDefaultProps: function() {\n        return {\n            title: \"Scoreboard\",\n        }\n    },\n    getInitialState: function() {\n        return {\n            players: this.props.initialPlayers,\n        };\n    },\n    onScoreChange: function(index, delta) {\n        // uncomment this to double check value change on the application\n        // console.log('onScoreChange', index, delta);\n        this.state.players[index].score += delta;\n        this.setState(this.state);\n    },\n    onPlayerRemove: function(index) {\n        // uncomment to see the player index\n        // console.log('remove', index);\n        this.state.players.splice(index, 1);\n        setState(this.state);\n    },\n    onPlayerAdd: function() {\n        // uncomment to see new player name\n        //console.log('Player added:', name);\n        this.state.players.push({\n            name: name,\n            score: 0,\n            id: nextId,\n        });\n\n        /*\n            NOTE: in something like Redux, we don't update the state itself, we actually create a brand new state object\n        */\n\n        this.setState(this.state);\n        nextId += 1;\n    };\n    render: function() {\n        return(\n            <div className=\"scoreboard\">\n                <Header title={this.props.title} players={this.state.players} />\n\n                <div className=\"players\">\n                    {this.state.players.map(function (player, index) {\n                        return (\n                            <Player\n                            onScoreChange={function(delta) {\n                                this.onScoreChange(index,delta)}.bind(this)\n                            }\n                            onRemove={function() {\n                                this.onRemovePlayer(index);\n                                }.bind(this)\n                            }\n                            name={player.name}\n                            score{player.score}\n                            key={player.id} />\n                        );\n                    }.bind(this))}\n                </div>\n                <AddPlayerForm onAdd={this.onPlayerAdd} />\n            </div>\n        );\n    }\n});\n\nReactDOM.render(<Application intialPlayers={PLAYERS}/>, document.getElementById('container'));\n`}</code></pre>\n    <h4 {...{\n      \"id\": \"threact-24-making-the-stopwatch-tick\"\n    }}>{`THREACT-24: Making the Stopwatch Tick`}</h4>\n    <ul>\n      <li parentName=\"ul\">{`Create the onTick function. - We don't want this function in Render. - There are several lifecycle methods in React, we'll use componentDidMount.`}</li>\n      <li parentName=\"ul\">{`Be careful with componentDidMount. The memory attachment with 'this' creates a strong cycle. We need to also use componentWillUnmount.`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`let PLAYERS = [\n    {\n        name: \"Dennis\",\n        score: 33,\n        id:1,\n    },\n    {\n        name: \"Ben\",\n        score: 34,\n        id:2,\n    },\n    {\n        name: \"Clark From InVision\",\n        score: 12,\n        id:3,\n    }\n];\n\nvar nextId = 4;\n\nvar StopWatch = React.createClass({\n    getInitialState: function () {\n        return {\n            running: false,\n            elapsedTime: 0,\n            previousTime: 0,\n        };\n    },\n    componentDidMount: function() {\n        this.interval = setInterval(this.onTick, 100);\n    },\n    componentWillUnmount: function() {\n        clearInterval(this.setInterval);\n    },\n    onTick: function() {\n        //uncomment to confirm the tick in the console.\n        //console.log('onTick');\n        if (this.state.running) {\n            var now = Date.now();\n            this.setState({\n                previousTime: now,\n                elapsedTime: this.state.elapsedTime + (now - this.state.previousTime),\n            });\n        }\n    },\n    onStop: function() {\n        this.setState({ running: false });\n    },\n    onStart: function() {\n        this.setState({\n            running: true,\n            previousTime: Date.now(),\n        });\n    },\n    onReset: function() {\n        this.setState({\n            elapsedTime: 0,\n            previousTime: Date.now(),\n        });\n    },\n    render: function() {\n        var seconds = Math.floor(this.state.elapsedTime / 1000);\n        return (\n            <div className=\"stopwatch\">\n                <h2>Stopwatch</h2>\n                <div className=\"stopwatch-time\">{seconds}</div>\n                { this.state.running ?\n                    <button onClick={this.onStop}>Stop</button>\n                    :\n                    <button onClick={this.onStart}>Start</button>;\n                }\n                <button onClick={this.onReset}>Reset</button>\n            </div>\n        );\n    }\n});\n\nvar AddPlayerForm = React.createClass({\n    propTypes: {\n        onAdd: React.PropTypes.func.isRequired,\n    },\n    getInitialState: function() {\n        return {\n            name: \"\"\n        };\n    },\n    onNameChange: function(e) {\n        // uncomment to see the changes on target value\n        // console.log(\"onNameChange\", e.target.value);\n        this.setState({name: e.target.value});\n    },\n    onSubmit: function(e) {\n        e.preventDefault();\n\n        this.props.onAdd(this.state.name);\n        this.setState({name: \"\"});\n    },\n    render: function() {\n        return (\n            <div className=\"add-player-form\">\n                <form onSubmit={this.onSubmit}>\n                    <input type=\"text\" value={this.state.name} onChange={this.onNameChange} />\n                    <input type=\"submit\" value=\"Add Player\" />\n                </form>\n            </div>\n        );\n    }\n});\n\nfunction Stats(props) {\n    // you don't have to store it, but it's handy for organisation\n    var totalPlayers = props.players.length;\n    var totalPoints = props.players.reduce(function(total, player){\n        return total + player.score;\n    }, 0)\n\n    return (\n        <table className=\"stats\">\n            <tbody>\n                <tr>\n                    <td>Players:</td>\n                    <td>{totalPlayers}</td>\n                </tr>\n                <tr>\n                    <td>Total Points:</td>\n                    <td>{totalPoints}</td>\n                </tr>\n            </tbody>\n        </table>\n    );\n}\n\nStats.propTypes = {\n    players: React.PropTypes.array.isRequired,\n};\n\nfunction Header(props) {\n    return (\n        <div className=\"header\">\n            <Stats />\n            <h1>{props.title}</h1>\n            <Stopwatch />\n        </div>\n    );\n}\n\nHeader.propTypes = {\n    title: React.PropTypes.string.isRequired,\n};\n\nfunction Counter(props) {\n    return (\n        <div className=\"counter\">\n            <button className=\"counter-action decrement\" onClick={function() {props.onChange(-1)}}> - </button>\n            <div className=\"counter-score\"> {props.score }</div>\n            <button className=\"counter-action increment\" onClick={function() {props.onChange(1)}}> + </button>\n        </div>\n    );\n}\n\nCounter.propTypes = {\n    score: React.PropTypes.number.isRequired,\n    onChange: React.PropTypes.func.isRequired,\n}\n\nfunction Player(props) {\n    return (\n        <div className=\"player\">\n            <div className=\"player-name\">\n                <a className=\"remove-player\" onClick={props.onRemove}>x</a>\n                {props.name}\n            </div>\n            <div className=\"player-score\">\n                <Counter score={props.score} onChange={props.onScoreChange}/>\n            </div>\n        </div>\n    );\n}\n\nPlayer.propTypes = {\n    name: React.PropTypes.string.isRequired,\n    score: React.PropTypes.number.isRequired,\n    onScoreChange: React.PropTypes.func.isRequired,\n    onRemove: React.PropTypes.func.isRequired,\n}\n\nvar Application = React.createClass({\n    propTypes: {\n        title: React.PropTypes.string,\n        initialPlayers: React.PropTypes.arrayOf(React.PropTypes.shape({\n            name: React.PropTypes.string.isRequired,\n            score: React.PropTypes.number.isRequired,\n            id: React.PropTypes.number.isRequired,\n        })).isRequired,\n    },\n\n    getDefaultProps: function() {\n        return {\n            title: \"Scoreboard\",\n        }\n    },\n    getInitialState: function() {\n        return {\n            players: this.props.initialPlayers,\n        };\n    },\n    onScoreChange: function(index, delta) {\n        // uncomment this to double check value change on the application\n        // console.log('onScoreChange', index, delta);\n        this.state.players[index].score += delta;\n        this.setState(this.state);\n    },\n    onPlayerRemove: function(index) {\n        // uncomment to see the player index\n        // console.log('remove', index);\n        this.state.players.splice(index, 1);\n        setState(this.state);\n    },\n    onPlayerAdd: function() {\n        // uncomment to see new player name\n        //console.log('Player added:', name);\n        this.state.players.push({\n            name: name,\n            score: 0,\n            id: nextId,\n        });\n\n        /*\n            NOTE: in something like Redux, we don't update the state itself, we actually create a brand new state object\n        */\n\n        this.setState(this.state);\n        nextId += 1;\n    };\n    render: function() {\n        return(\n            <div className=\"scoreboard\">\n                <Header title={this.props.title} players={this.state.players} />\n\n                <div className=\"players\">\n                    {this.state.players.map(function (player, index) {\n                        return (\n                            <Player\n                            onScoreChange={function(delta) {\n                                this.onScoreChange(index,delta)}.bind(this)\n                            }\n                            onRemove={function() {\n                                this.onRemovePlayer(index);\n                                }.bind(this)\n                            }\n                            name={player.name}\n                            score{player.score}\n                            key={player.id} />\n                        );\n                    }.bind(this))}\n                </div>\n                <AddPlayerForm onAdd={this.onPlayerAdd} />\n            </div>\n        );\n    }\n});\n\nReactDOM.render(<Application intialPlayers={PLAYERS}/>, document.getElementById('container'));\n`}</code></pre>\n    <h4 {...{\n      \"id\": \"threact-25-review-and-next-steps\"\n    }}>{`THREACT-25: Review and Next Steps`}</h4>\n    <p>{`What did we learn?`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Managing State, a key component of design we focused on.`}</li>\n      <li parentName=\"ul\">{`We used intermediate components to use callbacks to send upwards.`}</li>\n      <li parentName=\"ul\">{`Redux can give us useful utilities for managing state.`}</li>\n      <li parentName=\"ul\">{`Babel.js has been used to precompile our JSX.`}</li>\n      <li parentName=\"ul\">{`React for mobile doesn't render to the DOM, but the native components for the platform.`}</li>\n    </ul>\n    </MDXLayout>;\n}\n\nMDXContent.isMDXComponent = true;\n  "]}]}